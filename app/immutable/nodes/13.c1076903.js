import{$ as Ie,s as me,e as ie,i as E,d as $,z as V,a1 as at,f as B,l as re,a as M,g as z,h as K,m as ne,c as O,j,x as S,n as Ne,p as be,M as he,E as st,a0 as lt,P as ot,y as Se,C as it,Z as Rt,o as It}from"../chunks/scheduler.8e28fde2.js";import{S as _e,i as pe,a as c,g as ue,t as m,c as de,b as w,d as v,m as k,e as y,f as we}from"../chunks/index.7310de3c.js";import{b as Ae,r as ke,e as Be,c as Pe}from"../chunks/rbac.state.809eeacf.js";import{B as ve}from"../chunks/Button.483fa7bd.js";import{D as Te,a as Ee,b as ut,c as dt}from"../chunks/DataTable.5e58b13c.js";import{w as te,d as St}from"../chunks/index.e56d8ce4.js";import{a as ft}from"../chunks/auth.state.082b92f3.js";import{n as ct}from"../chunks/toaster.state.4f2416aa.js";import{C as mt,c as _t}from"../chunks/CloseButton.1a9c47d6.js";import{D as pt}from"../chunks/Drawer.adfaabd7.js";import{f as gt,c as $t,a as bt,b as ht,T as wt}from"../chunks/TextField.da583b18.js";import{N as vt,T as Ct,a as ze}from"../chunks/NumberField.262caf1b.js";import{S as Tt,I as kt}from"../chunks/SelectField.ddfd47cc.js";import{p as Et}from"../chunks/stores.05b160c3.js";import{g as Nt}from"../chunks/navigation.a0c1800b.js";import{P as At,a as Pt}from"../chunks/PageLayout.e01325d0.js";let x=null;const Ut=()=>(x={drawerClosed:te(!0),focusedUser:te(null),closeDrawer:()=>{var s,e;x&&((e=(s=x==null?void 0:x.drawerClosed)==null?void 0:s.set)==null||e.call(s,!0))},openDrawer:()=>{var s,e;x&&((e=(s=x==null?void 0:x.drawerClosed)==null?void 0:s.set)==null||e.call(s,!1))}},x),Vt=()=>{x=null},Ue=()=>x||Ut(),{store:{currentUser:je}}=ft,{store:{roles:qt}}=ke,{action:{toastify:De}}=ct,Gt={name:"",sort_index:0,role_group_id:0},Lt={name:"",sort_index:0,group_id:"0"};let se=null;const Ft=()=>(se={loading:te(!1),model:te(Lt),action:te("view"),targetRole:te(Gt),addRole:async s=>{var e,r,t,n;try{let a=s.sort_index;s.sort_index||(a=(((e=Ie(qt).sort((i,u)=>!(u!=null&&u.sort_index)||!(i!=null&&i.sort_index)?0:u.sort_index-i.sort_index)[1])==null?void 0:e.sort_index)??0)+1);const l=[{name:s.name,sort_index:a,role_group_id:s.role_group_id,created_by_id:(r=Ie(je))==null?void 0:r.id,created_at:new Date().toISOString()}];await Ae.bulkCreate(l),(n=(t=se==null?void 0:se.targetRole)==null?void 0:t.set)==null||n.call(t,null),De({type:"success",message:"Updated role successfully"})}catch{De({type:"error",message:"Update role failed, please refresh browser and try again."})}},updateRole:async s=>{var e,r,t;try{const n=[{name:s.name,sort_index:s.sort_index,uuid:s.uuid,role_group_id:s.role_group_id,updated_by_id:(e=Ie(je))==null?void 0:e.id,updated_at:new Date().toISOString()}];await Ae.bulkUpdate(n,{onConflict:"uuid"}),(t=(r=se==null?void 0:se.targetRole)==null?void 0:r.set)==null||t.call(r,null),De({type:"success",message:"Updated role successfully."})}catch{De({type:"error",message:"Update role failed, please refresh browser and try again."})}},deleteRole:async s=>{if(s)try{await Ae.bulkDelete([s]),De({type:"success",message:"Deleted role successfully."})}catch{De({type:"error",message:"Delete role failed, please refresh browser and try again."})}}},se),yt=()=>se===null?Ft():se,Mt=()=>{se=null};function Ke(s){let e,r;return e=new ut({props:{options:s[1],data:s[3],loading:s[4],$$slots:{header:[Bt]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){k(e,t,n),r=!0},p(t,n){const a={};n&2&&(a.options=t[1]),n&8&&(a.data=t[3]),n&16&&(a.loading=t[4]),n&262145&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Ot(s){let e;return{c(){e=re("Add")},l(r){e=ne(r,"Add")},m(r,t){E(r,e,t)},d(r){r&&$(e)}}}function Bt(s){let e,r,t,n,a,l;return a=new ve({props:{size:"xs",color:"alternative",$$slots:{default:[Ot]},$$scope:{ctx:s}}}),a.$on("click",s[9]),{c(){e=B("div"),r=B("p"),t=re(s[0]),n=M(),w(a.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0,class:!0});var i=K(e);r=z(i,"P",{class:!0});var u=K(r);t=ne(u,s[0]),u.forEach($),n=O(i),v(a.$$.fragment,i),i.forEach($),this.h()},h(){j(r,"class","dark:text-white text-lg"),j(e,"slot","header"),j(e,"class","flex justify-between mb-0 items-center mx-md-5")},m(o,i){E(o,e,i),S(e,r),S(r,t),S(e,n),k(a,e,null),l=!0},p(o,i){(!l||i&1)&&Ne(t,o[0]);const u={};i&262144&&(u.$$scope={dirty:i,ctx:o}),a.$set(u)},i(o){l||(c(a.$$.fragment,o),l=!0)},o(o){m(a.$$.fragment,o),l=!1},d(o){o&&$(e),y(a)}}}function zt(s){let e,r,t=s[1]&&s[2]&&s[2].length>0&&Ke(s);return{c(){t&&t.c(),e=ie()},l(n){t&&t.l(n),e=ie()},m(n,a){t&&t.m(n,a),E(n,e,a),r=!0},p(n,[a]){n[1]&&n[2]&&n[2].length>0?t?(t.p(n,a),a&6&&c(t,1)):(t=Ke(n),t.c(),c(t,1),t.m(e.parentNode,e)):t&&(ue(),m(t,1,1,()=>{t=null}),de())},i(n){r||(c(t),r=!0)},o(n){m(t),r=!1},d(n){n&&$(e),t&&t.d(n)}}}function jt(s,e,r){let t,n,a,l,{title:o="Roles"}=e,{group_id:i=1}=e;const{store:{roles:u}}=ke;V(s,u,h=>r(2,n=h));const{openDrawer:f}=Ue(),{targetRole:b,action:R}=yt(),{loading:D}=u;V(s,D,h=>r(4,l=h));const q={onRowClick:h=>{R.set("update"),f();const F={...h},Q={id:F.id,name:F.name,role_group_id:F.group_id,sort_index:F.sort_index,uuid:F.uuid,created_by_id:F.created_by_id,created_at:F.created_at,updated_by_id:F.updated_by_id,updated_at:F.updated_at};b.set(Q)},columnDefs:[{label:"Name",dataProperty:"name",dataType:Te.String,viewAlignment:Ee.Left},{label:"Sort Index",dataProperty:"sort_index",dataType:Te.String,viewAlignment:Ee.Right}]},Z=dt(q),{store:{options:A,data:G},actions:{setRowData:J}}=Z;V(s,A,h=>r(1,t=h)),V(s,G,h=>r(3,a=h));const L=()=>{R.set("add"),b.set({name:"",sort_index:0,role_group_id:i}),f()},C=u.subscribe(h=>{const F=h.filter(Q=>Q.group_id===i).sort(({sort_index:Q},{sort_index:I})=>Q-I);J(F)});return at(()=>{C(),Vt(),Mt()}),s.$$set=h=>{"title"in h&&r(0,o=h.title),"group_id"in h&&r(10,i=h.group_id)},[o,t,n,a,l,u,D,A,G,L,i]}class Kt extends _e{constructor(e){super(),pe(this,e,jt,zt,me,{title:0,group_id:10})}}function Ht(s){let e,r,t;function n(l){s[6](l)}let a={label:s[1],name:s[2],items:s[3]};return s[0]!==void 0&&(a.value=s[0]),e=new Tt({props:a}),be.push(()=>we(e,"value",n)),{c(){w(e.$$.fragment)},l(l){v(e.$$.fragment,l)},m(l,o){k(e,l,o),t=!0},p(l,[o]){const i={};o&2&&(i.label=l[1]),o&4&&(i.name=l[2]),o&8&&(i.items=l[3]),!r&&o&1&&(r=!0,i.value=l[0],he(()=>r=!1)),e.$set(i)},i(l){t||(c(e.$$.fragment,l),t=!0)},o(l){m(e.$$.fragment,l),t=!1},d(l){y(e,l)}}}function Zt(s,e,r){let t,n,{label:a=""}=e,{name:l=""}=e,{value:o}=e;const{store:{roleGroups:i}}=ke;V(s,i,f=>r(5,n=f));function u(f){o=f,r(0,o)}return s.$$set=f=>{"label"in f&&r(1,a=f.label),"name"in f&&r(2,l=f.name),"value"in f&&r(0,o=f.value)},s.$$.update=()=>{s.$$.dirty&32&&r(3,t=n.map(f=>({value:f.id+"",name:`${f.name}`})))},[o,a,l,t,i,n,u]}class Jt extends _e{constructor(e){super(),pe(this,e,Zt,Ht,me,{label:1,name:2,value:0})}}function He(s){var g,p,N,W,X,ce;let e,r,t,n,a,l,o,i,u,f,b,R,D,q,Z,A,G,J,L,C,h,F;function Q(_){s[15](_)}let I={type:"text",name:"role-name",label:"Name",placeholder:"Name",disabled:s[3],isInvalid:((g=s[4])==null?void 0:g.name)!==void 0,helperMessage:(N=(p=s[4])==null?void 0:p.name)==null?void 0:N.message,novalidate:!0,required:!0};s[2].name!==void 0&&(I.value=s[2].name),t=new wt({props:I}),be.push(()=>we(t,"value",Q)),t.$on("input",s[12]);function P(_){s[16](_)}let oe={name:"role-sort-index",label:"Sort Index",disabled:s[3],isInvalid:((W=s[4])==null?void 0:W.sort_index)!==void 0,helperMessage:(ce=(X=s[4])==null?void 0:X.sort_index)==null?void 0:ce.message,novalidate:!0,required:!0};s[2].sort_index!==void 0&&(oe.value=s[2].sort_index),l=new vt({props:oe}),be.push(()=>we(l,"value",P)),l.$on("input",s[12]);function ge(_){s[17](_)}let fe={name:"role-group",label:"Role Group"};s[2].group_id!==void 0&&(fe.value=s[2].group_id),u=new Jt({props:fe}),be.push(()=>we(u,"value",ge));let U=s[1]==="update"&&Ze(s),d=s[1]!=="add"&&Je(s);return G=new ve({props:{type:"button",size:"xs",class:"mr-2",color:"alternative",disabled:s[3],$$slots:{default:[Wt]},$$scope:{ctx:s}}}),G.$on("click",s[11]),L=new ve({props:{type:"button",size:"xs",disabled:s[3],$$slots:{default:[xt]},$$scope:{ctx:s}}}),L.$on("click",s[13]),{c(){e=B("form"),r=B("div"),w(t.$$.fragment),a=M(),w(l.$$.fragment),i=M(),w(u.$$.fragment),b=M(),U&&U.c(),R=M(),D=B("div"),q=B("div"),d&&d.c(),Z=M(),A=B("div"),w(G.$$.fragment),J=M(),w(L.$$.fragment),this.h()},l(_){e=z(_,"FORM",{class:!0});var T=K(e);r=z(T,"DIV",{class:!0});var H=K(r);v(t.$$.fragment,H),a=O(H),v(l.$$.fragment,H),i=O(H),v(u.$$.fragment,H),b=O(H),U&&U.l(H),H.forEach($),R=O(T),D=z(T,"DIV",{class:!0});var Y=K(D);q=z(Y,"DIV",{});var $e=K(q);d&&d.l($e),$e.forEach($),Z=O(Y),A=z(Y,"DIV",{});var ae=K(A);v(G.$$.fragment,ae),J=O(ae),v(L.$$.fragment,ae),ae.forEach($),Y.forEach($),T.forEach($),this.h()},h(){j(r,"class","space-y-6"),j(D,"class","flex justify-between"),e.noValidate=!0,j(e,"class","form mb-0 flex flex-col justify-between svelte-1dy7x2v")},m(_,T){E(_,e,T),S(e,r),k(t,r,null),S(r,a),k(l,r,null),S(r,i),k(u,r,null),S(r,b),U&&U.m(r,null),S(e,R),S(e,D),S(D,q),d&&d.m(q,null),S(D,Z),S(D,A),k(G,A,null),S(A,J),k(L,A,null),C=!0,h||(F=st(e,"submit",lt(s[14])),h=!0)},p(_,T){var qe,Ge,Le,Fe,Me,Oe;const H={};T&8&&(H.disabled=_[3]),T&16&&(H.isInvalid=((qe=_[4])==null?void 0:qe.name)!==void 0),T&16&&(H.helperMessage=(Le=(Ge=_[4])==null?void 0:Ge.name)==null?void 0:Le.message),!n&&T&4&&(n=!0,H.value=_[2].name,he(()=>n=!1)),t.$set(H);const Y={};T&8&&(Y.disabled=_[3]),T&16&&(Y.isInvalid=((Fe=_[4])==null?void 0:Fe.sort_index)!==void 0),T&16&&(Y.helperMessage=(Oe=(Me=_[4])==null?void 0:Me.sort_index)==null?void 0:Oe.message),!o&&T&4&&(o=!0,Y.value=_[2].sort_index,he(()=>o=!1)),l.$set(Y);const $e={};!f&&T&4&&(f=!0,$e.value=_[2].group_id,he(()=>f=!1)),u.$set($e),_[1]==="update"?U?(U.p(_,T),T&2&&c(U,1)):(U=Ze(_),U.c(),c(U,1),U.m(r,null)):U&&(ue(),m(U,1,1,()=>{U=null}),de()),_[1]!=="add"?d?(d.p(_,T),T&2&&c(d,1)):(d=Je(_),d.c(),c(d,1),d.m(q,null)):d&&(ue(),m(d,1,1,()=>{d=null}),de());const ae={};T&8&&(ae.disabled=_[3]),T&134217728&&(ae.$$scope={dirty:T,ctx:_}),G.$set(ae);const ye={};T&8&&(ye.disabled=_[3]),T&134217738&&(ye.$$scope={dirty:T,ctx:_}),L.$set(ye)},i(_){C||(c(t.$$.fragment,_),c(l.$$.fragment,_),c(u.$$.fragment,_),c(U),c(d),c(G.$$.fragment,_),c(L.$$.fragment,_),C=!0)},o(_){m(t.$$.fragment,_),m(l.$$.fragment,_),m(u.$$.fragment,_),m(U),m(d),m(G.$$.fragment,_),m(L.$$.fragment,_),C=!1},d(_){_&&$(e),y(t),y(l),y(u),U&&U.d(),d&&d.d(),y(G),y(L),h=!1,F()}}}function Ze(s){var t,n,a,l;let e,r;return e=new kt({props:{created_at:(t=s[0])==null?void 0:t.created_at,created_by_id:(n=s[0])==null?void 0:n.created_by_id,updated_at:(a=s[0])==null?void 0:a.updated_at,updated_by_id:(l=s[0])==null?void 0:l.updated_by_id}}),{c(){w(e.$$.fragment)},l(o){v(e.$$.fragment,o)},m(o,i){k(e,o,i),r=!0},p(o,i){var f,b,R,D;const u={};i&1&&(u.created_at=(f=o[0])==null?void 0:f.created_at),i&1&&(u.created_by_id=(b=o[0])==null?void 0:b.created_by_id),i&1&&(u.updated_at=(R=o[0])==null?void 0:R.updated_at),i&1&&(u.updated_by_id=(D=o[0])==null?void 0:D.updated_by_id),e.$set(u)},i(o){r||(c(e.$$.fragment,o),r=!0)},o(o){m(e.$$.fragment,o),r=!1},d(o){y(e,o)}}}function Je(s){let e,r;return e=new ve({props:{type:"button",size:"xs",color:"red",disabled:s[3],$$slots:{default:[Qt]},$$scope:{ctx:s}}}),e.$on("click",s[18]),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){k(e,t,n),r=!0},p(t,n){const a={};n&8&&(a.disabled=t[3]),n&134217728&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Qt(s){let e;return{c(){e=re("Delete")},l(r){e=ne(r,"Delete")},m(r,t){E(r,e,t)},d(r){r&&$(e)}}}function Wt(s){let e;return{c(){e=re("Reset")},l(r){e=ne(r,"Reset")},m(r,t){E(r,e,t)},d(r){r&&$(e)}}}function Xt(s){let e=s[1]==="add"?"Add":"Update",r;return{c(){r=re(e)},l(t){r=ne(t,e)},m(t,n){E(t,r,n)},p(t,n){n&2&&e!==(e=t[1]==="add"?"Add":"Update")&&Ne(r,e)},d(t){t&&$(r)}}}function Yt(s){let e;return{c(){e=re("...")},l(r){e=ne(r,"...")},m(r,t){E(r,e,t)},p:Se,d(r){r&&$(e)}}}function xt(s){let e;function r(a,l){return a[3]?Yt:Xt}let t=r(s),n=t(s);return{c(){n.c(),e=ie()},l(a){n.l(a),e=ie()},m(a,l){n.m(a,l),E(a,e,l)},p(a,l){t===(t=r(a))&&n?n.p(a,l):(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){a&&$(e),n.d(a)}}}function er(s){let e,r,t=s[2]&&He(s);return{c(){t&&t.c(),e=ie()},l(n){t&&t.l(n),e=ie()},m(n,a){t&&t.m(n,a),E(n,e,a),r=!0},p(n,[a]){n[2]?t?(t.p(n,a),a&4&&c(t,1)):(t=He(n),t.c(),c(t,1),t.m(e.parentNode,e)):t&&(ue(),m(t,1,1,()=>{t=null}),de())},i(n){r||(c(t),r=!0)},o(n){m(t),r=!1},d(n){n&&$(e),t&&t.d(n)}}}function tr(s,e,r){let t,n,a,l,o,i;const{loading:u,targetRole:f,model:b,action:R,addRole:D,updateRole:q,deleteRole:Z}=yt();V(s,u,d=>r(3,o=d)),V(s,f,d=>r(0,t=d)),V(s,b,d=>r(2,a=d)),V(s,R,d=>r(1,n=d));const{closeDrawer:A}=Ue(),{store:{roles:G}}=ke,{errors:J,submitted:L,validate:C,reset:h}=gt($t({name:bt().required("Name is required").label("Name"),sort_index:ht().required().label("Sort Index")}));V(s,J,d=>r(4,i=d)),V(s,L,d=>r(19,l=d));const F=()=>{t&&b.set({name:t.name,sort_index:(t==null?void 0:t.sort_index)??0,group_id:`${t==null?void 0:t.role_group_id}`??"0"}),L.set(!1),h()},Q=async()=>{if(!l)return;const{name:d,sort_index:g}=a;await C({name:d,sort_index:g})},I=async()=>{try{u.set(!0),L.set(!0);const{name:d,sort_index:g,group_id:p}=a;switch(await C({name:d,sort_index:g}),n){case"add":await D({...t,name:d,sort_index:g,role_group_id:parseInt(p,10)});break;case"update":await q({...t,name:d,sort_index:g,role_group_id:parseInt(p,10)});break;case"delete":t!=null&&t.id&&await Z(t.id);break;default:}await G.reload(),A()}catch(d){console.log("submit failed",d)}finally{u.set(!1)}};f.subscribe(d=>{d&&b.set({name:d==null?void 0:d.name,sort_index:(d==null?void 0:d.sort_index)??0,group_id:`${d==null?void 0:d.role_group_id}`??"0"})});function P(d){ot.call(this,s,d)}function oe(d){s.$$.not_equal(a.name,d)&&(a.name=d,b.set(a))}function ge(d){s.$$.not_equal(a.sort_index,d)&&(a.sort_index=d,b.set(a))}function fe(d){s.$$.not_equal(a.group_id,d)&&(a.group_id=d,b.set(a))}return[t,n,a,o,i,u,f,b,R,J,L,F,Q,I,P,oe,ge,fe,()=>{R.set("delete"),I()}]}class rr extends _e{constructor(e){super(),pe(this,e,tr,er,me,{})}}function nr(s){let e,r,t="Role",n,a,l,o,i;return a=new mt({props:{class:"mb-4 dark:text-white"}}),a.$on("click",s[3]),o=new rr({}),{c(){e=B("div"),r=B("h5"),r.textContent=t,n=M(),w(a.$$.fragment),l=M(),w(o.$$.fragment),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=K(e);r=z(f,"H5",{id:!0,class:!0,"data-svelte-h":!0}),it(r)!=="svelte-1mqrwvg"&&(r.textContent=t),n=O(f),v(a.$$.fragment,f),f.forEach($),l=O(u),v(o.$$.fragment,u),this.h()},h(){j(r,"id","drawer-label"),j(r,"class","inline-flex items-center mb-6 text-base font-semibold text-gray-500 uppercase dark:text-gray-400"),j(e,"class","flex items-center")},m(u,f){E(u,e,f),S(e,r),S(e,n),k(a,e,null),E(u,l,f),k(o,u,f),i=!0},p:Se,i(u){i||(c(a.$$.fragment,u),c(o.$$.fragment,u),i=!0)},o(u){m(a.$$.fragment,u),m(o.$$.fragment,u),i=!1},d(u){u&&($(e),$(l)),y(a),y(o,u)}}}function ar(s){let e,r,t;function n(l){s[4](l)}let a={transitionType:"fly",transitionParams:s[1],id:"roles-drawer",placement:"right",class:"mt-0",$$slots:{default:[nr]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.hidden=s[0]),e=new pt({props:a}),be.push(()=>we(e,"hidden",n)),{c(){w(e.$$.fragment)},l(l){v(e.$$.fragment,l)},m(l,o){k(e,l,o),t=!0},p(l,[o]){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),!r&&o&1&&(r=!0,i.hidden=l[0],he(()=>r=!1)),e.$set(i)},i(l){t||(c(e.$$.fragment,l),t=!0)},o(l){m(e.$$.fragment,l),t=!1},d(l){y(e,l)}}}function sr(s,e,r){let t,n={x:320,duration:200,easing:_t};const{drawerClosed:a,closeDrawer:l}=Ue();V(s,a,i=>r(0,t=i));function o(i){t=i,a.set(t)}return[t,n,a,l,o]}class lr extends _e{constructor(e){super(),pe(this,e,sr,ar,me,{})}}function Qe(s,e,r){const t=s.slice();return t[2]=e[r],t}function We(s){let e,r,t=Be(s[0]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Xe(Qe(s,t,l));const a=l=>m(n[l],1,1,()=>{n[l]=null});return{c(){e=B("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=z(l,"DIV",{class:!0});var o=K(e);for(let i=0;i<n.length;i+=1)n[i].l(o);o.forEach($),this.h()},h(){j(e,"class","flex flex-col space-y-8")},m(l,o){E(l,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);r=!0},p(l,o){if(o&1){t=Be(l[0]);let i;for(i=0;i<t.length;i+=1){const u=Qe(l,t,i);n[i]?(n[i].p(u,o),c(n[i],1)):(n[i]=Xe(u),n[i].c(),c(n[i],1),n[i].m(e,null))}for(ue(),i=t.length;i<n.length;i+=1)a(i);de()}},i(l){if(!r){for(let o=0;o<t.length;o+=1)c(n[o]);r=!0}},o(l){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)m(n[o]);r=!1},d(l){l&&$(e),Rt(n,l)}}}function Xe(s){let e,r,t,n;return r=new Kt({props:{title:s[2].name,group_id:s[2].id}}),{c(){e=B("div"),w(r.$$.fragment),t=M(),this.h()},l(a){e=z(a,"DIV",{class:!0});var l=K(e);v(r.$$.fragment,l),t=O(l),l.forEach($),this.h()},h(){j(e,"class","flex flex-col space-y-3")},m(a,l){E(a,e,l),k(r,e,null),S(e,t),n=!0},p(a,l){const o={};l&1&&(o.title=a[2].name),l&1&&(o.group_id=a[2].id),r.$set(o)},i(a){n||(c(r.$$.fragment,a),n=!0)},o(a){m(r.$$.fragment,a),n=!1},d(a){a&&$(e),y(r)}}}function or(s){let e,r,t,n=s[0]&&s[0].length>0&&We(s);return r=new lr({}),{c(){n&&n.c(),e=M(),w(r.$$.fragment)},l(a){n&&n.l(a),e=O(a),v(r.$$.fragment,a)},m(a,l){n&&n.m(a,l),E(a,e,l),k(r,a,l),t=!0},p(a,[l]){a[0]&&a[0].length>0?n?(n.p(a,l),l&1&&c(n,1)):(n=We(a),n.c(),c(n,1),n.m(e.parentNode,e)):n&&(ue(),m(n,1,1,()=>{n=null}),de())},i(a){t||(c(n),c(r.$$.fragment,a),t=!0)},o(a){m(n),m(r.$$.fragment,a),t=!1},d(a){a&&$(e),n&&n.d(a),y(r,a)}}}function ir(s,e,r){let t;const{store:{roleGroups:n}}=ke;return V(s,n,a=>r(0,t=a)),[t,n]}class ur extends _e{constructor(e){super(),pe(this,e,ir,or,me,{})}}let ee=null;const dr=()=>(ee={drawerClosed:te(!0),focusedUser:te(null),closeDrawer:()=>{ee!=null&&ee.drawerClosed&&ee.drawerClosed.set(!0)},openDrawer:()=>{ee!=null&&ee.drawerClosed&&ee.drawerClosed.set(!1)}},ee),fr=()=>{ee=null},Ve=()=>ee||dr(),{store:{currentUser:Ye}}=ft,{store:{roles:xe}}=ke,{action:{toastify:Re}}=ct,cr={name:"",sort_index:0},mr={name:"",sort_index:0};let le=null,Ce=null;const _r=()=>(Ce=te(cr),le={loading:te(!1),model:te(mr),action:te("view"),targetRoleGroup:Ce,canDelete:St([xe,Ce],([s,e])=>e?s.filter(t=>t.group_id===e.id).length===0:!1),addRoleGroup:async s=>{var e,r,t,n;try{let a=s.sort_index;s.sort_index||(a=(((e=Ie(xe).sort((i,u)=>!(u!=null&&u.sort_index)||!(i!=null&&i.sort_index)?0:u.sort_index-i.sort_index)[1])==null?void 0:e.sort_index)??0)+1);const l=[{name:s.name,sort_index:a,created_by_id:(r=Ie(Ye))==null?void 0:r.id,created_at:new Date().toISOString()}];await Pe.bulkCreate(l),(n=(t=le==null?void 0:le.targetRoleGroup)==null?void 0:t.set)==null||n.call(t,null),Re({type:"success",message:"Updated role group successfully"})}catch{Re({type:"error",message:"Update role group failed, please refresh browser and try again."})}},updateRoleGroup:async s=>{var e,r,t;try{const n=[{name:s.name,sort_index:s.sort_index,uuid:s.uuid,updated_by_id:(e=Ie(Ye))==null?void 0:e.id,updated_at:new Date().toISOString()}];await Pe.bulkUpdate(n,{onConflict:"uuid"}),(t=(r=le==null?void 0:le.targetRoleGroup)==null?void 0:r.set)==null||t.call(r,null),Re({type:"success",message:"Updated role group successfully."})}catch{Re({type:"error",message:"Update role group failed, please refresh browser and try again."})}},deleteRoleGroup:async s=>{if(s)try{await Pe.bulkDelete([s]),Re({type:"success",message:"Deleted role successfully."})}catch{Re({type:"error",message:"Delete role failed, please refresh browser and try again."})}}},le),Dt=()=>le===null?_r():le,pr=()=>{le=null,Ce=null};function et(s){var oe,ge,fe,U,d,g;let e,r,t,n,a,l,o,i,u,f,b,R,D,q,Z,A,G,J,L;function C(p){s[17](p)}let h={type:"text",name:"role-group-name",label:"Name",placeholder:"Name",disabled:s[3],isInvalid:((oe=s[4])==null?void 0:oe.name)!==void 0,helperMessage:(fe=(ge=s[4])==null?void 0:ge.name)==null?void 0:fe.message,novalidate:!0,required:!0};s[2].name!==void 0&&(h.value=s[2].name),t=new wt({props:h}),be.push(()=>we(t,"value",C)),t.$on("input",s[14]);function F(p){s[18](p)}let Q={name:"role-group-sort-index",label:"Sort Index",disabled:s[3],isInvalid:((U=s[4])==null?void 0:U.sort_index)!==void 0,helperMessage:(g=(d=s[4])==null?void 0:d.sort_index)==null?void 0:g.message,novalidate:!0,required:!0};s[2].sort_index!==void 0&&(Q.value=s[2].sort_index),l=new vt({props:Q}),be.push(()=>we(l,"value",F)),l.$on("input",s[14]);let I=s[1]==="update"&&tt(s),P=s[1]!=="add"&&s[5]&&rt(s);return q=new ve({props:{type:"button",size:"xs",class:"mr-2",color:"alternative",disabled:s[3],$$slots:{default:[$r]},$$scope:{ctx:s}}}),q.$on("click",s[13]),A=new ve({props:{type:"button",size:"xs",disabled:s[3],$$slots:{default:[wr]},$$scope:{ctx:s}}}),A.$on("click",s[15]),{c(){e=B("form"),r=B("div"),w(t.$$.fragment),a=M(),w(l.$$.fragment),i=M(),I&&I.c(),u=M(),f=B("div"),b=B("div"),P&&P.c(),R=M(),D=B("div"),w(q.$$.fragment),Z=M(),w(A.$$.fragment),this.h()},l(p){e=z(p,"FORM",{class:!0});var N=K(e);r=z(N,"DIV",{class:!0});var W=K(r);v(t.$$.fragment,W),a=O(W),v(l.$$.fragment,W),i=O(W),I&&I.l(W),W.forEach($),u=O(N),f=z(N,"DIV",{class:!0});var X=K(f);b=z(X,"DIV",{});var ce=K(b);P&&P.l(ce),ce.forEach($),R=O(X),D=z(X,"DIV",{});var _=K(D);v(q.$$.fragment,_),Z=O(_),v(A.$$.fragment,_),_.forEach($),X.forEach($),N.forEach($),this.h()},h(){j(r,"class","space-y-6"),j(f,"class","flex justify-between"),e.noValidate=!0,j(e,"class","form mb-0 flex flex-col justify-between svelte-1dy7x2v")},m(p,N){E(p,e,N),S(e,r),k(t,r,null),S(r,a),k(l,r,null),S(r,i),I&&I.m(r,null),S(e,u),S(e,f),S(f,b),P&&P.m(b,null),S(f,R),S(f,D),k(q,D,null),S(D,Z),k(A,D,null),G=!0,J||(L=st(e,"submit",lt(s[16])),J=!0)},p(p,N){var T,H,Y,$e,ae,ye;const W={};N&8&&(W.disabled=p[3]),N&16&&(W.isInvalid=((T=p[4])==null?void 0:T.name)!==void 0),N&16&&(W.helperMessage=(Y=(H=p[4])==null?void 0:H.name)==null?void 0:Y.message),!n&&N&4&&(n=!0,W.value=p[2].name,he(()=>n=!1)),t.$set(W);const X={};N&8&&(X.disabled=p[3]),N&16&&(X.isInvalid=(($e=p[4])==null?void 0:$e.sort_index)!==void 0),N&16&&(X.helperMessage=(ye=(ae=p[4])==null?void 0:ae.sort_index)==null?void 0:ye.message),!o&&N&4&&(o=!0,X.value=p[2].sort_index,he(()=>o=!1)),l.$set(X),p[1]==="update"?I?(I.p(p,N),N&2&&c(I,1)):(I=tt(p),I.c(),c(I,1),I.m(r,null)):I&&(ue(),m(I,1,1,()=>{I=null}),de()),p[1]!=="add"&&p[5]?P?(P.p(p,N),N&34&&c(P,1)):(P=rt(p),P.c(),c(P,1),P.m(b,null)):P&&(ue(),m(P,1,1,()=>{P=null}),de());const ce={};N&8&&(ce.disabled=p[3]),N&268435456&&(ce.$$scope={dirty:N,ctx:p}),q.$set(ce);const _={};N&8&&(_.disabled=p[3]),N&268435466&&(_.$$scope={dirty:N,ctx:p}),A.$set(_)},i(p){G||(c(t.$$.fragment,p),c(l.$$.fragment,p),c(I),c(P),c(q.$$.fragment,p),c(A.$$.fragment,p),G=!0)},o(p){m(t.$$.fragment,p),m(l.$$.fragment,p),m(I),m(P),m(q.$$.fragment,p),m(A.$$.fragment,p),G=!1},d(p){p&&$(e),y(t),y(l),I&&I.d(),P&&P.d(),y(q),y(A),J=!1,L()}}}function tt(s){var t,n,a,l;let e,r;return e=new kt({props:{created_at:(t=s[0])==null?void 0:t.created_at,created_by_id:(n=s[0])==null?void 0:n.created_by_id,updated_at:(a=s[0])==null?void 0:a.updated_at,updated_by_id:(l=s[0])==null?void 0:l.updated_by_id}}),{c(){w(e.$$.fragment)},l(o){v(e.$$.fragment,o)},m(o,i){k(e,o,i),r=!0},p(o,i){var f,b,R,D;const u={};i&1&&(u.created_at=(f=o[0])==null?void 0:f.created_at),i&1&&(u.created_by_id=(b=o[0])==null?void 0:b.created_by_id),i&1&&(u.updated_at=(R=o[0])==null?void 0:R.updated_at),i&1&&(u.updated_by_id=(D=o[0])==null?void 0:D.updated_by_id),e.$set(u)},i(o){r||(c(e.$$.fragment,o),r=!0)},o(o){m(e.$$.fragment,o),r=!1},d(o){y(e,o)}}}function rt(s){let e,r;return e=new ve({props:{type:"button",size:"xs",color:"red",disabled:s[3],$$slots:{default:[gr]},$$scope:{ctx:s}}}),e.$on("click",s[19]),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){k(e,t,n),r=!0},p(t,n){const a={};n&8&&(a.disabled=t[3]),n&268435456&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function gr(s){let e;return{c(){e=re("Delete")},l(r){e=ne(r,"Delete")},m(r,t){E(r,e,t)},d(r){r&&$(e)}}}function $r(s){let e;return{c(){e=re("Reset")},l(r){e=ne(r,"Reset")},m(r,t){E(r,e,t)},d(r){r&&$(e)}}}function br(s){let e=s[1]==="add"?"Add":"Update",r;return{c(){r=re(e)},l(t){r=ne(t,e)},m(t,n){E(t,r,n)},p(t,n){n&2&&e!==(e=t[1]==="add"?"Add":"Update")&&Ne(r,e)},d(t){t&&$(r)}}}function hr(s){let e;return{c(){e=re("...")},l(r){e=ne(r,"...")},m(r,t){E(r,e,t)},p:Se,d(r){r&&$(e)}}}function wr(s){let e;function r(a,l){return a[3]?hr:br}let t=r(s),n=t(s);return{c(){n.c(),e=ie()},l(a){n.l(a),e=ie()},m(a,l){n.m(a,l),E(a,e,l)},p(a,l){t===(t=r(a))&&n?n.p(a,l):(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){a&&$(e),n.d(a)}}}function vr(s){let e,r,t=s[2]&&et(s);return{c(){t&&t.c(),e=ie()},l(n){t&&t.l(n),e=ie()},m(n,a){t&&t.m(n,a),E(n,e,a),r=!0},p(n,[a]){n[2]?t?(t.p(n,a),a&4&&c(t,1)):(t=et(n),t.c(),c(t,1),t.m(e.parentNode,e)):t&&(ue(),m(t,1,1,()=>{t=null}),de())},i(n){r||(c(t),r=!0)},o(n){m(t),r=!1},d(n){n&&$(e),t&&t.d(n)}}}function kr(s,e,r){let t,n,a,l,o,i,u;const{loading:f,targetRoleGroup:b,model:R,action:D,canDelete:q,addRoleGroup:Z,updateRoleGroup:A,deleteRoleGroup:G}=Dt();V(s,f,g=>r(3,o=g)),V(s,b,g=>r(0,t=g)),V(s,R,g=>r(2,a=g)),V(s,D,g=>r(1,n=g)),V(s,q,g=>r(5,u=g));const{closeDrawer:J}=Ve(),{store:{roleGroups:L}}=ke,{errors:C,submitted:h,validate:F,reset:Q}=gt($t({name:bt().required("Name is required").label("Name"),sort_index:ht().required().label("Sort Index")}));V(s,C,g=>r(4,i=g)),V(s,h,g=>r(20,l=g));const I=()=>{t&&R.set({name:t.name,sort_index:(t==null?void 0:t.sort_index)??0}),h.set(!1),Q()},P=async()=>{if(!l)return;const{name:g,sort_index:p}=a;await F({name:g,sort_index:p})},oe=async()=>{try{f.set(!0),h.set(!0);const{name:g,sort_index:p}=a;switch(await F({name:g,sort_index:p}),n){case"add":await Z({...t,name:g,sort_index:p});break;case"update":await A({...t,name:g,sort_index:p});break;case"delete":t!=null&&t.id&&await G(t.id);break;default:}await L.reload(),J()}catch(g){console.log("submit failed",g)}finally{f.set(!1)}};b.subscribe(g=>{g&&R.set({name:g==null?void 0:g.name,sort_index:(g==null?void 0:g.sort_index)??0})});function ge(g){ot.call(this,s,g)}function fe(g){s.$$.not_equal(a.name,g)&&(a.name=g,R.set(a))}function U(g){s.$$.not_equal(a.sort_index,g)&&(a.sort_index=g,R.set(a))}return[t,n,a,o,i,u,f,b,R,D,q,C,h,I,P,oe,ge,fe,U,()=>{D.set("delete"),oe()}]}class yr extends _e{constructor(e){super(),pe(this,e,kr,vr,me,{})}}function Dr(s){let e,r,t="Role Group",n,a,l,o,i;return a=new mt({props:{class:"mb-4 dark:text-white"}}),a.$on("click",s[3]),o=new yr({}),{c(){e=B("div"),r=B("h5"),r.textContent=t,n=M(),w(a.$$.fragment),l=M(),w(o.$$.fragment),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=K(e);r=z(f,"H5",{id:!0,class:!0,"data-svelte-h":!0}),it(r)!=="svelte-euk447"&&(r.textContent=t),n=O(f),v(a.$$.fragment,f),f.forEach($),l=O(u),v(o.$$.fragment,u),this.h()},h(){j(r,"id","drawer-label"),j(r,"class","inline-flex items-center mb-6 text-base font-semibold text-gray-500 uppercase dark:text-gray-400"),j(e,"class","flex items-center")},m(u,f){E(u,e,f),S(e,r),S(e,n),k(a,e,null),E(u,l,f),k(o,u,f),i=!0},p:Se,i(u){i||(c(a.$$.fragment,u),c(o.$$.fragment,u),i=!0)},o(u){m(a.$$.fragment,u),m(o.$$.fragment,u),i=!1},d(u){u&&($(e),$(l)),y(a),y(o,u)}}}function Rr(s){let e,r,t;function n(l){s[4](l)}let a={transitionType:"fly",transitionParams:s[1],id:"role-group-drawer",placement:"right",class:"mt-0",$$slots:{default:[Dr]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.hidden=s[0]),e=new pt({props:a}),be.push(()=>we(e,"hidden",n)),{c(){w(e.$$.fragment)},l(l){v(e.$$.fragment,l)},m(l,o){k(e,l,o),t=!0},p(l,[o]){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),!r&&o&1&&(r=!0,i.hidden=l[0],he(()=>r=!1)),e.$set(i)},i(l){t||(c(e.$$.fragment,l),t=!0)},o(l){m(e.$$.fragment,l),t=!1},d(l){y(e,l)}}}function Ir(s,e,r){let t,n={x:320,duration:200,easing:_t};const{drawerClosed:a,closeDrawer:l}=Ve();V(s,a,i=>r(0,t=i));function o(i){t=i,a.set(t)}return[t,n,a,l,o]}class Sr extends _e{constructor(e){super(),pe(this,e,Ir,Rr,me,{})}}function nt(s){let e,r,t;return r=new ut({props:{options:s[1],data:s[3],loading:s[4],$$slots:{header:[Tr]},$$scope:{ctx:s}}}),{c(){e=B("div"),w(r.$$.fragment),this.h()},l(n){e=z(n,"DIV",{class:!0});var a=K(e);v(r.$$.fragment,a),a.forEach($),this.h()},h(){j(e,"class","flex flex-col space-y-3")},m(n,a){E(n,e,a),k(r,e,null),t=!0},p(n,a){const l={};a&2&&(l.options=n[1]),a&8&&(l.data=n[3]),a&16&&(l.loading=n[4]),a&131073&&(l.$$scope={dirty:a,ctx:n}),r.$set(l)},i(n){t||(c(r.$$.fragment,n),t=!0)},o(n){m(r.$$.fragment,n),t=!1},d(n){n&&$(e),y(r)}}}function Cr(s){let e;return{c(){e=re("Add")},l(r){e=ne(r,"Add")},m(r,t){E(r,e,t)},d(r){r&&$(e)}}}function Tr(s){let e,r,t,n,a,l;return a=new ve({props:{size:"xs",color:"alternative",$$slots:{default:[Cr]},$$scope:{ctx:s}}}),a.$on("click",s[9]),{c(){e=B("div"),r=B("p"),t=re(s[0]),n=M(),w(a.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0,class:!0});var i=K(e);r=z(i,"P",{class:!0});var u=K(r);t=ne(u,s[0]),u.forEach($),n=O(i),v(a.$$.fragment,i),i.forEach($),this.h()},h(){j(r,"class","dark:text-white text-lg"),j(e,"slot","header"),j(e,"class","flex justify-between mb-0 items-center mx-md-5")},m(o,i){E(o,e,i),S(e,r),S(r,t),S(e,n),k(a,e,null),l=!0},p(o,i){(!l||i&1)&&Ne(t,o[0]);const u={};i&131072&&(u.$$scope={dirty:i,ctx:o}),a.$set(u)},i(o){l||(c(a.$$.fragment,o),l=!0)},o(o){m(a.$$.fragment,o),l=!1},d(o){o&&$(e),y(a)}}}function Er(s){let e,r,t,n=s[1]&&s[2]&&s[2].length>0&&nt(s);return r=new Sr({}),{c(){n&&n.c(),e=M(),w(r.$$.fragment)},l(a){n&&n.l(a),e=O(a),v(r.$$.fragment,a)},m(a,l){n&&n.m(a,l),E(a,e,l),k(r,a,l),t=!0},p(a,[l]){a[1]&&a[2]&&a[2].length>0?n?(n.p(a,l),l&6&&c(n,1)):(n=nt(a),n.c(),c(n,1),n.m(e.parentNode,e)):n&&(ue(),m(n,1,1,()=>{n=null}),de())},i(a){t||(c(n),c(r.$$.fragment,a),t=!0)},o(a){m(n),m(r.$$.fragment,a),t=!1},d(a){a&&$(e),n&&n.d(a),y(r,a)}}}function Nr(s,e,r){let t,n,a,l,{title:o="Role Groups"}=e;const{store:{roleGroups:i}}=ke;V(s,i,C=>r(2,n=C));const{openDrawer:u}=Ve(),{targetRoleGroup:f,action:b}=Dt(),{loading:R}=i;V(s,R,C=>r(4,l=C));const D={onRowClick:C=>{b.set("update"),u();const h={...C};f.set(h)},columnDefs:[{label:"Name",dataProperty:"name",dataType:Te.String,viewAlignment:Ee.Left},{label:"Sort Index",dataProperty:"sort_index",dataType:Te.String,viewAlignment:Ee.Right}]},q=dt(D),{store:{options:Z,data:A},actions:{setRowData:G}}=q;V(s,Z,C=>r(1,t=C)),V(s,A,C=>r(3,a=C));const J=()=>{b.set("add"),f.set({name:"",sort_index:0}),u()},L=i.subscribe(C=>{const h=C.sort(({sort_index:F},{sort_index:Q})=>F-Q);G(h)});return at(()=>{L(),fr(),pr()}),s.$$set=C=>{"title"in C&&r(0,o=C.title)},[o,t,n,a,l,i,R,Z,A,J]}class Ar extends _e{constructor(e){super(),pe(this,e,Nr,Er,me,{title:0})}}function Pr(s){let e,r;return e=new Pt({props:{title:"Roles"}}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){k(e,t,n),r=!0},p:Se,i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Ur(s){let e,r;return e=new ur({}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){k(e,t,n),r=!0},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Vr(s){let e,r;return e=new Ar({}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){k(e,t,n),r=!0},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function qr(s){let e,r,t,n;return e=new ze({props:{open:s[0].roles.open,title:"Roles",$$slots:{default:[Ur]},$$scope:{ctx:s}}}),e.$on("click",s[2]),t=new ze({props:{open:s[0].groups.open,title:"Groups",$$slots:{default:[Vr]},$$scope:{ctx:s}}}),t.$on("click",s[3]),{c(){w(e.$$.fragment),r=M(),w(t.$$.fragment)},l(a){v(e.$$.fragment,a),r=O(a),v(t.$$.fragment,a)},m(a,l){k(e,a,l),E(a,r,l),k(t,a,l),n=!0},p(a,l){const o={};l&1&&(o.open=a[0].roles.open),l&64&&(o.$$scope={dirty:l,ctx:a}),e.$set(o);const i={};l&1&&(i.open=a[0].groups.open),l&64&&(i.$$scope={dirty:l,ctx:a}),t.$set(i)},i(a){n||(c(e.$$.fragment,a),c(t.$$.fragment,a),n=!0)},o(a){m(e.$$.fragment,a),m(t.$$.fragment,a),n=!1},d(a){a&&$(r),y(e,a),y(t,a)}}}function Gr(s){let e,r;return e=new Ct({props:{style:"underline",contentClass:"py-4 px-0 rounded-lg mt-0",$$slots:{default:[qr]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){k(e,t,n),r=!0},p(t,n){const a={};n&65&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Lr(s){let e,r;return e=new At({props:{title:"Roles",$$slots:{body:[Gr],header:[Pr]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){k(e,t,n),r=!0},p(t,[n]){const a={};n&65&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Fr(s,e,r){let t;V(s,Et,u=>r(4,t=u));let n={roles:{open:!1},groups:{open:!1}};const a=u=>{t.url.searchParams.set("tab",u),Nt(`?${t.url.searchParams.toString()}`)},l=u=>{switch(u==null?void 0:u.toLowerCase()){case"roles":r(0,n.roles.open=!0,n),r(0,n.groups.open=!1,n);break;case"groups":r(0,n.roles.open=!1,n),r(0,n.groups.open=!0,n);break;default:r(0,n.roles.open=!0,n),r(0,n.groups.open=!1,n);break}};return It(()=>{l(t.url.searchParams.get("tab")??null)}),[n,a,()=>a("roles"),()=>a("groups")]}class rn extends _e{constructor(e){super(),pe(this,e,Fr,Lr,me,{})}}export{rn as component};
