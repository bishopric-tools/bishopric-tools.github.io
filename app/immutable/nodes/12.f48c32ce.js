import{s as $,F as ot,G as ut,h as W,d as _,j as S,i as D,y as M,H as Q,u as X,E as de,r as Ge,f as N,g as z,A as Je,B as Qe,C as Ke,M as At,e as B,D as ge,x as We,V as Be,a as Y,c as H,W as ft,P as Lt,X as dt,Y as Ee,z as ze,R as Wt,L as qt,l as q,m as U,Z as Ye,n as se,O as fe,_ as Ut,$ as Ie,I as x,U as Xt,w as Ot,p as ve,S as pe,a0 as Bt}from"../chunks/scheduler.5ee162ca.js";import{S as te,i as ae,a as v,t as p,g as ce,c as me,b as O,d as F,m as V,e as j,h as ye}from"../chunks/index.3a145c36.js";import{e as Oe}from"../chunks/each.e59479a4.js";import{d as je,r as Se,D as ct,a as mt,b as Yt,c as Ht}from"../chunks/DataTable.cc5970ea.js";import{B as Fe}from"../chunks/Button.6a69d899.js";import{w as Me}from"../chunks/index.d5413678.js";import{a as Gt}from"../chunks/auth.state.d295d359.js";import{n as Jt}from"../chunks/toaster.state.4d15da3a.js";import{C as Qt,c as Kt}from"../chunks/CloseButton.296bfa69.js";import{D as Zt}from"../chunks/Drawer.5c8639de.js";import{L as Ft,I as xt,f as $t,c as ea,a as ta,b as aa,T as na}from"../chunks/TextField.364a2cf1.js";import{t as De,g as Pe,a as Ze}from"../chunks/tw-merge.dd2125e8.js";function ra(n){let e,t;return{c(){e=ot("svg"),t=ot("path"),this.h()},l(a){e=ut(a,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var r=W(e);t=ut(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),W(t).forEach(_),r.forEach(_),this.h()},h(){S(t,"fill-rule","evenodd"),S(t,"d","M8 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"),S(t,"clip-rule","evenodd"),S(e,"class",n[0]),S(e,"fill","currentColor"),S(e,"viewBox","0 0 16 16"),S(e,"xmlns","http://www.w3.org/2000/svg")},m(a,r){D(a,e,r),M(e,t)},p:Q,i:Q,o:Q,d(a){a&&_(e)}}}function la(n,e,t){let{rounded:a=!1}=e,{border:r=!1}=e,{size:l="md"}=e,i=De("text-gray-400 bg-gray-100 dark:bg-gray-600",a?"rounded":"rounded-full",r?{xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-16 h-16",xl:"w-32 h-32"}[l]:{xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"}[l],e.class);return n.$$set=u=>{t(6,e=X(X({},e),de(u))),"rounded"in u&&t(1,a=u.rounded),"border"in u&&t(2,r=u.border),"size"in u&&t(3,l=u.size)},e=de(e),[i,a,r,l]}class sa extends te{constructor(e){super(),ae(this,e,la,ra,$,{rounded:1,border:2,size:3})}}function ia(n){let e,t;const a=n[8].default,r=Ge(a,n,n[7],null);return{c(){e=N("div"),r&&r.c(),this.h()},l(l){e=z(l,"DIV",{class:!0});var s=W(e);r&&r.l(s),s.forEach(_),this.h()},h(){S(e,"class",n[0])},m(l,s){D(l,e,s),r&&r.m(e,null),t=!0},p(l,[s]){r&&r.p&&(!t||s&128)&&Je(r,a,l,l[7],t?Ke(a,l[7],s,null):Qe(l[7]),null),(!t||s&1)&&S(e,"class",l[0])},i(l){t||(v(r,l),t=!0)},o(l){p(r,l),t=!1},d(l){l&&_(e),r&&r.d(l)}}}function oa(n,e,t){let{$$slots:a={},$$scope:r}=e;const l=At(a);let{color:s="gray"}=e,{rounded:o=!1}=e,{size:i="md"}=e,{border:u=!1}=e,{placement:f=void 0}=e,{offset:d=!0}=e;const m={gray:"bg-gray-200",dark:"bg-gray-900 dark:bg-gray-700",blue:"bg-blue-600",orange:"bg-orange-600",green:"bg-green-500",red:"bg-red-500",purple:"bg-purple-500",indigo:"bg-indigo-500",yellow:"bg-yellow-300",teal:"bg-teal-500",none:""},c={xs:"w-2 h-2",sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-3.5 h-3.5",xl:"w-6 h-6"},b={"top-left":"top-0 left-0","top-center":"top-0 left-1/2 -translate-x-1/2","top-right":"top-0 right-0","center-left":"top-1/2 -translate-y-1/2 left-0",center:"top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2","center-right":"top-1/2 -translate-y-1/2 right-0","bottom-left":"bottom-0 left-0","bottom-center":"bottom-0 left-1/2 -translate-x-1/2","bottom-right":"bottom-0 right-0"},P={"top-left":"-translate-x-1/3 -translate-y-1/3","top-center":"-translate-y-1/3","top-right":"translate-x-1/3 -translate-y-1/3","center-left":"-translate-x-1/3",center:"","center-right":"translate-x-1/3","bottom-left":"-translate-x-1/3 translate-y-1/3","bottom-center":"translate-y-1/3","bottom-right":"translate-x-1/3 translate-y-1/3"};let T;return n.$$set=y=>{t(13,e=X(X({},e),de(y))),"color"in y&&t(1,s=y.color),"rounded"in y&&t(2,o=y.rounded),"size"in y&&t(3,i=y.size),"border"in y&&t(4,u=y.border),"placement"in y&&t(5,f=y.placement),"offset"in y&&t(6,d=y.offset),"$$scope"in y&&t(7,r=y.$$scope)},n.$$.update=()=>{t(0,T=De("flex-shrink-0",o?"rounded":"rounded-full",u&&"border-2 border-white dark:border-gray-800",c[i],m[s],l.default&&"inline-flex items-center justify-center",f&&"absolute "+b[f],f&&d&&P[f],e.class))},e=de(e),[T,s,o,i,u,f,d,r,a]}class ua extends te{constructor(e){super(),ae(this,e,oa,ia,$,{color:1,rounded:2,size:3,border:4,placement:5,offset:6})}}function fa(n){let e,t,a=[{alt:n[5]},{src:t=n[1]},n[10],{class:n[7]}],r={};for(let l=0;l<a.length;l+=1)r=X(r,a[l]);return{c(){e=N("img"),this.h()},l(l){e=z(l,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){We(e,r)},m(l,s){D(l,e,s)},p(l,s){We(e,r=Pe(a,[s&32&&{alt:l[5]},s&2&&!Be(e.src,t=l[1])&&{src:t},s&1024&&l[10],s&128&&{class:l[7]}]))},i:Q,o:Q,d(l){l&&_(e)}}}function da(n){let e=n[2]?"a":"div",t,a,r=(n[2]?"a":"div")&&Le(n);return{c(){r&&r.c(),t=B()},l(l){r&&r.l(l),t=B()},m(l,s){r&&r.m(l,s),D(l,t,s),a=!0},p(l,s){l[2],e?$(e,l[2]?"a":"div")?(r.d(1),r=Le(l),e=l[2]?"a":"div",r.c(),r.m(t.parentNode,t)):r.p(l,s):(r=Le(l),e=l[2]?"a":"div",r.c(),r.m(t.parentNode,t))},i(l){a||(v(r,l),a=!0)},o(l){p(r,l),a=!1},d(l){l&&_(t),r&&r.d(l)}}}function ca(n){let e;const t=n[13].default,a=Ge(t,n,n[12],null),r=a||ha(n);return{c(){r&&r.c()},l(l){r&&r.l(l)},m(l,s){r&&r.m(l,s),e=!0},p(l,s){a?a.p&&(!e||s&4096)&&Je(a,t,l,l[12],e?Ke(t,l[12],s,null):Qe(l[12]),null):r&&r.p&&(!e||s&344)&&r.p(l,e?s:-1)},i(l){e||(v(r,l),e=!0)},o(l){p(r,l),e=!1},d(l){r&&r.d(l)}}}function ma(n){let e,t,a;return{c(){e=N("img"),this.h()},l(r){e=z(r,"IMG",{alt:!0,src:!0,class:!0}),this.h()},h(){S(e,"alt",n[5]),Be(e.src,t=n[1])||S(e,"src",t),S(e,"class",a=n[3]?"rounded":"rounded-full")},m(r,l){D(r,e,l)},p(r,l){l&32&&S(e,"alt",r[5]),l&2&&!Be(e.src,t=r[1])&&S(e,"src",t),l&8&&a!==(a=r[3]?"rounded":"rounded-full")&&S(e,"class",a)},i:Q,o:Q,d(r){r&&_(e)}}}function ha(n){let e,t;return e=new sa({props:{rounded:n[3],size:n[6],border:n[4],class:De(n[8].classPlaceholder)}}),{c(){O(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,r){V(e,a,r),t=!0},p(a,r){const l={};r&8&&(l.rounded=a[3]),r&64&&(l.size=a[6]),r&16&&(l.border=a[4]),r&256&&(l.class=De(a[8].classPlaceholder)),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){p(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function ht(n){let e,t;const a=[{border:!0},{offset:n[3]},n[0]];let r={};for(let l=0;l<a.length;l+=1)r=X(r,a[l]);return e=new ua({props:r}),{c(){O(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,s){V(e,l,s),t=!0},p(l,s){const o=s&9?Pe(a,[a[0],s&8&&{offset:l[3]},s&1&&Ze(l[0])]):{};e.$set(o)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){p(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Le(n){let e,t,a,r,l,s;const o=[ma,ca],i=[];function u(c,b){return c[1]?0:1}t=u(n),a=i[t]=o[t](n);let f=n[0]&&ht(n),d=[{href:n[2]},n[10],{class:l="relative flex justify-center items-center "+n[7]}],m={};for(let c=0;c<d.length;c+=1)m=X(m,d[c]);return{c(){e=N(n[2]?"a":"div"),a.c(),r=Y(),f&&f.c(),this.h()},l(c){e=z(c,((n[2]?"a":"div")||"null").toUpperCase(),{href:!0,class:!0});var b=W(e);a.l(b),r=H(b),f&&f.l(b),b.forEach(_),this.h()},h(){ft(n[2]?"a":"div")(e,m)},m(c,b){D(c,e,b),i[t].m(e,null),M(e,r),f&&f.m(e,null),s=!0},p(c,b){let P=t;t=u(c),t===P?i[t].p(c,b):(ce(),p(i[P],1,1,()=>{i[P]=null}),me(),a=i[t],a?a.p(c,b):(a=i[t]=o[t](c),a.c()),v(a,1),a.m(e,r)),c[0]?f?(f.p(c,b),b&1&&v(f,1)):(f=ht(c),f.c(),v(f,1),f.m(e,null)):f&&(ce(),p(f,1,1,()=>{f=null}),me()),ft(c[2]?"a":"div")(e,m=Pe(d,[(!s||b&4)&&{href:c[2]},b&1024&&c[10],(!s||b&128&&l!==(l="relative flex justify-center items-center "+c[7]))&&{class:l}]))},i(c){s||(v(a),v(f),s=!0)},o(c){p(a),p(f),s=!1},d(c){c&&_(e),i[t].d(),f&&f.d()}}}function ga(n){let e,t,a,r;const l=[da,fa],s=[];function o(i,u){return!i[1]||i[2]||i[9].default||i[0]?0:1}return e=o(n),t=s[e]=l[e](n),{c(){t.c(),a=B()},l(i){t.l(i),a=B()},m(i,u){s[e].m(i,u),D(i,a,u),r=!0},p(i,[u]){let f=e;e=o(i),e===f?s[e].p(i,u):(ce(),p(s[f],1,1,()=>{s[f]=null}),me(),t=s[e],t?t.p(i,u):(t=s[e]=l[e](i),t.c()),v(t,1),t.m(a.parentNode,a))},i(i){r||(v(t),r=!0)},o(i){p(t),r=!1},d(i){i&&_(a),s[e].d(i)}}}function _a(n,e,t){const a=["src","href","rounded","border","stacked","dot","alt","size"];let r=ge(e,a),{$$slots:l={},$$scope:s}=e;const o=At(l);let{src:i=""}=e,{href:u=void 0}=e,{rounded:f=!1}=e,{border:d=!1}=e,{stacked:m=!1}=e,{dot:c=void 0}=e,{alt:b=""}=e,{size:P="md"}=e;const T={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"};let y;return n.$$set=g=>{t(8,e=X(X({},e),de(g))),t(10,r=ge(e,a)),"src"in g&&t(1,i=g.src),"href"in g&&t(2,u=g.href),"rounded"in g&&t(3,f=g.rounded),"border"in g&&t(4,d=g.border),"stacked"in g&&t(11,m=g.stacked),"dot"in g&&t(0,c=g.dot),"alt"in g&&t(5,b=g.alt),"size"in g&&t(6,P=g.size),"$$scope"in g&&t(12,s=g.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(0,c=c&&{placement:"top-right",color:"gray",size:"lg",...c}),t(7,y=De(f?"rounded":"rounded-full",d&&"p-1 ring-2 ring-gray-300 dark:ring-gray-500",T[P],m&&"border-2 -ml-4 border-white dark:border-gray-800","bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300",e.class))},e=de(e),[c,i,u,f,d,b,P,y,e,o,r,m,s,l]}class gt extends te{constructor(e){super(),ae(this,e,_a,ga,$,{src:1,href:2,rounded:3,border:4,stacked:11,dot:0,alt:5,size:6})}}function _t(n,e,t){const a=n.slice();return a[0]=e[t].value,a[17]=e[t].name,a}function bt(n){let e,t;return{c(){e=N("option"),t=q(n[2]),this.h()},l(a){e=z(a,"OPTION",{});var r=W(e);t=U(r,n[2]),r.forEach(_),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="",Ye(e,e.__value)},m(a,r){D(a,e,r),M(e,t)},p(a,r){r&4&&se(t,a[2])},d(a){a&&_(e)}}}function vt(n){let e;const t=n[10].default,a=Ge(t,n,n[9],null);return{c(){a&&a.c()},l(r){a&&a.l(r)},m(r,l){a&&a.m(r,l),e=!0},p(r,l){a&&a.p&&(!e||l&512)&&Je(a,t,r,r[9],e?Ke(t,r[9],l,null):Qe(r[9]),null)},i(r){e||(v(a,r),e=!0)},o(r){p(a,r),e=!1},d(r){a&&a.d(r)}}}function pt(n){let e,t=n[17]+"",a,r;return{c(){e=N("option"),a=q(t),this.h()},l(l){e=z(l,"OPTION",{});var s=W(e);a=U(s,t),s.forEach(_),this.h()},h(){e.__value=r=n[0],Ye(e,e.__value)},m(l,s){D(l,e,s),M(e,a)},p(l,s){s&2&&t!==(t=l[17]+"")&&se(a,t),s&2&&r!==(r=l[0])&&(e.__value=r,Ye(e,e.__value))},d(l){l&&_(e)}}}function ba(n){let e,t,a,r,l=n[2]&&bt(n),s=Oe(n[1]),o=[];for(let d=0;d<s.length;d+=1)o[d]=pt(_t(n,s,d));let i=null;s.length||(i=vt(n));let u=[n[4],{class:n[3]}],f={};for(let d=0;d<u.length;d+=1)f=X(f,u[d]);return{c(){e=N("select"),l&&l.c(),t=B();for(let d=0;d<o.length;d+=1)o[d].c();i&&i.c(),this.h()},l(d){e=z(d,"SELECT",{class:!0});var m=W(e);l&&l.l(m),t=B();for(let c=0;c<o.length;c+=1)o[c].l(m);i&&i.l(m),m.forEach(_),this.h()},h(){We(e,f),n[0]===void 0&&Lt(()=>n[14].call(e))},m(d,m){D(d,e,m),l&&l.m(e,null),M(e,t);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);i&&i.m(e,null),"value"in f&&(f.multiple?dt:Ee)(e,f.value),e.autofocus&&e.focus(),Ee(e,n[0],!0),a||(r=[ze(e,"change",n[14]),ze(e,"change",n[11]),ze(e,"contextmenu",n[12]),ze(e,"input",n[13])],a=!0)},p(d,[m]){if(d[2]?l?l.p(d,m):(l=bt(d),l.c(),l.m(e,t)):l&&(l.d(1),l=null),m&514){s=Oe(d[1]);let c;for(c=0;c<s.length;c+=1){const b=_t(d,s,c);o[c]?o[c].p(b,m):(o[c]=pt(b),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=s.length,!s.length&&i?i.p(d,m):s.length?i&&(ce(),p(i,1,1,()=>{i=null}),me()):(i=vt(d),i.c(),v(i,1),i.m(e,null))}We(e,f=Pe(u,[m&16&&d[4],{class:d[3]}])),m&24&&"value"in f&&(f.multiple?dt:Ee)(e,f.value),m&3&&Ee(e,d[0])},i:Q,o:Q,d(d){d&&_(e),l&&l.d(),Wt(o,d),i&&i.d(),a=!1,qt(r)}}}const va="block w-full";function pa(n,e,t){const a=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let r=ge(e,a),{$$slots:l={},$$scope:s}=e,{items:o=[]}=e,{value:i=void 0}=e,{placeholder:u="Choose option ..."}=e,{underline:f=!1}=e,{size:d="md"}=e,{defaultClass:m="text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"}=e,{underlineClass:c="text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const b={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let P;function T(w){fe.call(this,n,w)}function y(w){fe.call(this,n,w)}function g(w){fe.call(this,n,w)}function C(){i=Ut(this),t(0,i),t(1,o)}return n.$$set=w=>{t(16,e=X(X({},e),de(w))),t(4,r=ge(e,a)),"items"in w&&t(1,o=w.items),"value"in w&&t(0,i=w.value),"placeholder"in w&&t(2,u=w.placeholder),"underline"in w&&t(5,f=w.underline),"size"in w&&t(6,d=w.size),"defaultClass"in w&&t(7,m=w.defaultClass),"underlineClass"in w&&t(8,c=w.underlineClass),"$$scope"in w&&t(9,s=w.$$scope)},n.$$.update=()=>{t(3,P=De(va,f?c:m,b[d],f&&"!px-0",e.class))},e=de(e),[i,o,u,P,r,f,d,m,c,s,l,T,y,g,C]}class ya extends te{constructor(e){super(),ae(this,e,pa,ba,$,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}let ee=null;const ka=()=>(ee={drawerClosed:Me(!0),focusedUser:Me(null),closeDrawer:()=>{var n,e;ee&&((e=(n=ee==null?void 0:ee.drawerClosed)==null?void 0:n.set)==null||e.call(n,!0))},openDrawer:()=>{var n,e;ee&&((e=(n=ee==null?void 0:ee.drawerClosed)==null?void 0:n.set)==null||e.call(n,!1))}},ee),wa=()=>{ee=null},xe=()=>ee||ka(),{store:{currentUser:qe,currentSession:Ma}}=Gt,{store:{roles:Da}}=Se,{action:{toastify:we}}=Jt,Sa={name:"",sort_index:0,role_group_id:0},Pa={name:"",sort_index:0,group_id:"0"};let le=null;const Ca=()=>(le={loading:Me(!1),model:Me(Pa),action:Me("view"),targetRole:Me(Sa),addRole:async n=>{var e,t,a,r;try{let l=n.sort_index;n.sort_index||(l=(((e=Ie(Da).sort((i,u)=>!(u!=null&&u.sort_index)||!(i!=null&&i.sort_index)?0:u.sort_index-i.sort_index)[1])==null?void 0:e.sort_index)??0)+1);const s=[{name:n.name,sort_index:l,role_group_id:n.role_group_id,created_by_id:(t=Ie(qe))==null?void 0:t.id,created_at:new Date().toISOString()}];await je.bulkCreate(s),(r=(a=le==null?void 0:le.targetRole)==null?void 0:a.set)==null||r.call(a,null),we({type:"success",message:"Updated role successfully"})}catch{we({type:"error",message:"Update role failed, please refresh browser and try again."})}},updateRole:async n=>{var e,t,a;try{console.log("### update role",Ie(qe),Ie(Ma));const r=[{name:n.name,sort_index:n.sort_index,uuid:n.uuid,role_group_id:n.role_group_id,updated_by_id:(e=Ie(qe))==null?void 0:e.id,updated_at:new Date().toISOString()}];await je.bulkUpdate(r,{onConflict:"uuid"}),(a=(t=le==null?void 0:le.targetRole)==null?void 0:t.set)==null||a.call(t,null),we({type:"success",message:"Updated role successfully."})}catch{we({type:"error",message:"Update role failed, please refresh browser and try again."})}},deleteRole:async n=>{if(n)try{await je.bulkDelete([n]),we({type:"success",message:"Deleted role successfully."})}catch{we({type:"error",message:"Delete role failed, please refresh browser and try again."})}}},le),Vt=()=>le===null?Ca():le,Ia=()=>{le=null};function Ta(n){let e,t="No data";return{c(){e=N("p"),e.textContent=t},l(a){e=z(a,"P",{"data-svelte-h":!0}),Ot(e)!=="svelte-t5me1l"&&(e.textContent=t)},m(a,r){D(a,e,r)},p:Q,i:Q,o:Q,d(a){a&&_(e)}}}function Na(n){let e,t;return e=new Yt({props:{options:n[1],data:n[3],loading:n[4],$$slots:{header:[Ea]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,r){V(e,a,r),t=!0},p(a,r){const l={};r&2&&(l.options=a[1]),r&8&&(l.data=a[3]),r&16&&(l.loading=a[4]),r&262145&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){p(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function za(n){let e;return{c(){e=q("Add")},l(t){e=U(t,"Add")},m(t,a){D(t,e,a)},d(t){t&&_(e)}}}function Ea(n){let e,t,a,r,l,s;return l=new Fe({props:{size:"xs",color:"alternative",$$slots:{default:[za]},$$scope:{ctx:n}}}),l.$on("click",n[9]),{c(){e=N("div"),t=N("p"),a=q(n[0]),r=Y(),O(l.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0,class:!0});var i=W(e);t=z(i,"P",{class:!0});var u=W(t);a=U(u,n[0]),u.forEach(_),r=H(i),F(l.$$.fragment,i),i.forEach(_),this.h()},h(){S(t,"class","text-base dark:text-white"),S(e,"slot","header"),S(e,"class","flex justify-between mb-2 items-center mx-md-5")},m(o,i){D(o,e,i),M(e,t),M(t,a),M(e,r),V(l,e,null),s=!0},p(o,i){(!s||i&1)&&se(a,o[0]);const u={};i&262144&&(u.$$scope={dirty:i,ctx:o}),l.$set(u)},i(o){s||(v(l.$$.fragment,o),s=!0)},o(o){p(l.$$.fragment,o),s=!1},d(o){o&&_(e),j(l)}}}function Ra(n){let e,t,a,r;const l=[Na,Ta],s=[];function o(i,u){return i[1]&&i[2]&&i[2].length>0?0:1}return e=o(n),t=s[e]=l[e](n),{c(){t.c(),a=B()},l(i){t.l(i),a=B()},m(i,u){s[e].m(i,u),D(i,a,u),r=!0},p(i,[u]){let f=e;e=o(i),e===f?s[e].p(i,u):(ce(),p(s[f],1,1,()=>{s[f]=null}),me(),t=s[e],t?t.p(i,u):(t=s[e]=l[e](i),t.c()),v(t,1),t.m(a.parentNode,a))},i(i){r||(v(t),r=!0)},o(i){p(t),r=!1},d(i){i&&_(a),s[e].d(i)}}}function Aa(n,e,t){let a,r,l,s,{title:o="Roles"}=e,{group_id:i=1}=e;const{store:{roles:u}}=Se;x(n,u,E=>t(2,r=E));const{openDrawer:f}=xe(),{targetRole:d,action:m}=Vt(),{loading:c}=u;x(n,c,E=>t(4,s=E));const b={onRowClick:E=>{m.set("update"),f();const L={...E},oe={id:L.id,name:L.name,role_group_id:L.group_id,sort_index:L.sort_index,uuid:L.uuid,created_by_id:L.created_by_id,created_at:L.created_at,updated_by_id:L.updated_by_id,updated_at:L.updated_at};d.set(oe)},columnDefs:[{label:"Name",dataProperty:"name",dataType:ct.String,viewAlignment:mt.Left,width:100},{label:"Sort Index",dataProperty:"sort_index",dataType:ct.String,viewAlignment:mt.Right,width:32}]},P=Ht(b),{store:{options:T,data:y},actions:{setRowData:g}}=P;x(n,T,E=>t(1,a=E)),x(n,y,E=>t(3,l=E));const C=()=>{m.set("add"),d.set({name:"",sort_index:0,role_group_id:i}),f()},w=u.subscribe(E=>{g(E.filter(L=>L.group_id===i))});return Xt(()=>{w(),wa(),Ia()}),n.$$set=E=>{"title"in E&&t(0,o=E.title),"group_id"in E&&t(10,i=E.group_id)},[o,a,r,l,s,u,c,T,y,C,i]}class Wa extends te{constructor(e){super(),ae(this,e,Aa,Ra,$,{title:0,group_id:10})}}function yt(n){let e,t;return{c(){e=N("small"),t=q(n[1])},l(a){e=z(a,"SMALL",{});var r=W(e);t=U(r,n[1]),r.forEach(_)},m(a,r){D(a,e,r),M(e,t)},p(a,r){r&2&&se(t,a[1])},d(a){a&&_(e)}}}function Oa(n){let e,t=n[1]&&yt(n);return{c(){t&&t.c(),e=B()},l(a){t&&t.l(a),e=B()},m(a,r){t&&t.m(a,r),D(a,e,r)},p(a,r){a[1]?t?t.p(a,r):(t=yt(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(a){a&&_(e),t&&t.d(a)}}}function kt(n){let e,t;return{c(){e=N("div"),t=q(n[4]),this.h()},l(a){e=z(a,"DIV",{class:!0});var r=W(e);t=U(r,n[4]),r.forEach(_),this.h()},h(){S(e,"class",Va)},m(a,r){D(a,e,r),M(e,t)},p(a,r){r&16&&se(t,a[4])},d(a){a&&_(e)}}}function Fa(n){let e,t,a,r,l,s,o;e=new Ft({props:{for:n[2],class:n[3]?`${n[5]} block mb-2`:"block mb-2",$$slots:{default:[Oa]},$$scope:{ctx:n}}});const i=[n[6],{type:"number"},{class:n[3]?Mt:wt}];function u(m){n[7](m)}let f={};for(let m=0;m<i.length;m+=1)f=X(f,i[m]);n[0]!==void 0&&(f.value=n[0]),a=new xt({props:f}),ve.push(()=>ye(a,"value",u)),a.$on("click",n[8]),a.$on("blur",n[9]),a.$on("focus",n[10]),a.$on("input",n[11]),a.$on("keydown",n[12]),a.$on("keyup",n[13]);let d=n[4]&&kt(n);return{c(){O(e.$$.fragment),t=Y(),O(a.$$.fragment),l=Y(),d&&d.c(),s=B()},l(m){F(e.$$.fragment,m),t=H(m),F(a.$$.fragment,m),l=H(m),d&&d.l(m),s=B()},m(m,c){V(e,m,c),D(m,t,c),V(a,m,c),D(m,l,c),d&&d.m(m,c),D(m,s,c),o=!0},p(m,[c]){const b={};c&4&&(b.for=m[2]),c&8&&(b.class=m[3]?`${m[5]} block mb-2`:"block mb-2"),c&16386&&(b.$$scope={dirty:c,ctx:m}),e.$set(b);const P=c&72?Pe(i,[c&64&&Ze(m[6]),i[1],c&8&&{class:m[3]?Mt:wt}]):{};!r&&c&1&&(r=!0,P.value=m[0],pe(()=>r=!1)),a.$set(P),m[4]?d?d.p(m,c):(d=kt(m),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},i(m){o||(v(e.$$.fragment,m),v(a.$$.fragment,m),o=!0)},o(m){p(e.$$.fragment,m),p(a.$$.fragment,m),o=!1},d(m){m&&(_(t),_(l),_(s)),j(e,m),j(a,m),d&&d.d(m)}}}const wt="block w-full disabled:cursor-not-allowed disabled:opacity-50 p-2.5 focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 border-gray-300 dark:border-gray-600 text-sm rounded-lg",Mt="block w-full disabled:cursor-not-allowed disabled:opacity-50 p-2.5 focus:ring-red-500 focus:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500 bg-red-50 text-red-900 placeholder-red-700 dark:text-red-500 dark:placeholder-red-500 dark:bg-gray-700 border-red-500 dark:border-red-400 text-sm rounded-lg",Va="text-xs font-normal text-red-700 dark:text-red-500";function ja(n,e,t){const a=["label","name","value","isInvalid","helperMessage"];let r=ge(e,a),{label:l=""}=e,{name:s=""}=e,{value:o}=e,{isInvalid:i=!1}=e,{helperMessage:u}=e;const f="text-sm font-medium text-red-700 dark:text-red-500";function d(g){o=g,t(0,o)}function m(g){fe.call(this,n,g)}function c(g){fe.call(this,n,g)}function b(g){fe.call(this,n,g)}function P(g){fe.call(this,n,g)}function T(g){fe.call(this,n,g)}function y(g){fe.call(this,n,g)}return n.$$set=g=>{e=X(X({},e),de(g)),t(6,r=ge(e,a)),"label"in g&&t(1,l=g.label),"name"in g&&t(2,s=g.name),"value"in g&&t(0,o=g.value),"isInvalid"in g&&t(3,i=g.isInvalid),"helperMessage"in g&&t(4,u=g.helperMessage)},[o,l,s,i,u,f,r,d,m,c,b,P,T,y]}class La extends te{constructor(e){super(),ae(this,e,ja,Fa,$,{label:1,name:2,value:0,isInvalid:3,helperMessage:4})}}function Dt(n){let e,t;return{c(){e=N("small"),t=q(n[1])},l(a){e=z(a,"SMALL",{});var r=W(e);t=U(r,n[1]),r.forEach(_)},m(a,r){D(a,e,r),M(e,t)},p(a,r){r&2&&se(t,a[1])},d(a){a&&_(e)}}}function qa(n){let e,t=n[1]&&Dt(n);return{c(){t&&t.c(),e=B()},l(a){t&&t.l(a),e=B()},m(a,r){t&&t.m(a,r),D(a,e,r)},p(a,r){a[1]?t?t.p(a,r):(t=Dt(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(a){a&&_(e),t&&t.d(a)}}}function Ua(n){let e,t,a,r,l;e=new Ft({props:{for:n[2],class:"block mb-2",$$slots:{default:[qa]},$$scope:{ctx:n}}});const s=[n[4],{items:n[3]}];function o(u){n[5](u)}let i={};for(let u=0;u<s.length;u+=1)i=X(i,s[u]);return n[0]!==void 0&&(i.value=n[0]),a=new ya({props:i}),ve.push(()=>ye(a,"value",o)),{c(){O(e.$$.fragment),t=Y(),O(a.$$.fragment)},l(u){F(e.$$.fragment,u),t=H(u),F(a.$$.fragment,u)},m(u,f){V(e,u,f),D(u,t,f),V(a,u,f),l=!0},p(u,[f]){const d={};f&4&&(d.for=u[2]),f&66&&(d.$$scope={dirty:f,ctx:u}),e.$set(d);const m=f&24?Pe(s,[f&16&&Ze(u[4]),f&8&&{items:u[3]}]):{};!r&&f&1&&(r=!0,m.value=u[0],pe(()=>r=!1)),a.$set(m)},i(u){l||(v(e.$$.fragment,u),v(a.$$.fragment,u),l=!0)},o(u){p(e.$$.fragment,u),p(a.$$.fragment,u),l=!1},d(u){u&&_(t),j(e,u),j(a,u)}}}function Xa(n,e,t){const a=["label","name","value","items"];let r=ge(e,a),{label:l=""}=e,{name:s=""}=e,{value:o}=e,{items:i}=e;function u(f){o=f,t(0,o)}return n.$$set=f=>{e=X(X({},e),de(f)),t(4,r=ge(e,a)),"label"in f&&t(1,l=f.label),"name"in f&&t(2,s=f.name),"value"in f&&t(0,o=f.value),"items"in f&&t(3,i=f.items)},[o,l,s,i,r,u]}class Ba extends te{constructor(e){super(),ae(this,e,Xa,Ua,$,{label:1,name:2,value:0,items:3})}}function Ya(n){let e,t,a;function r(s){n[6](s)}let l={label:n[1],name:n[2],items:n[3]};return n[0]!==void 0&&(l.value=n[0]),e=new Ba({props:l}),ve.push(()=>ye(e,"value",r)),{c(){O(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){V(e,s,o),a=!0},p(s,[o]){const i={};o&2&&(i.label=s[1]),o&4&&(i.name=s[2]),o&8&&(i.items=s[3]),!t&&o&1&&(t=!0,i.value=s[0],pe(()=>t=!1)),e.$set(i)},i(s){a||(v(e.$$.fragment,s),a=!0)},o(s){p(e.$$.fragment,s),a=!1},d(s){j(e,s)}}}function Ha(n,e,t){let a,r,{label:l=""}=e,{name:s=""}=e,{value:o}=e;const{store:{roleGroups:i}}=Se;x(n,i,f=>t(5,r=f));function u(f){o=f,t(0,o)}return n.$$set=f=>{"label"in f&&t(1,l=f.label),"name"in f&&t(2,s=f.name),"value"in f&&t(0,o=f.value)},n.$$.update=()=>{n.$$.dirty&32&&t(3,a=r.map(f=>({value:f.id+"",name:`${f.name}`})))},[o,l,s,a,i,r,u]}class Ga extends te{constructor(e){super(),ae(this,e,Ha,Ya,$,{label:1,name:2,value:0})}}function He(n){"@babel/helpers - typeof";return He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(n)}function ie(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function J(n){ie(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||He(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var Ja={};function Qa(){return Ja}function St(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function Ae(n,e){ie(2,arguments);var t=J(n),a=J(e),r=t.getTime()-a.getTime();return r<0?-1:r>0?1:r}function Ka(n,e){ie(2,arguments);var t=J(n),a=J(e),r=t.getFullYear()-a.getFullYear(),l=t.getMonth()-a.getMonth();return r*12+l}function Za(n,e){return ie(2,arguments),J(n).getTime()-J(e).getTime()}var Pt={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},xa="trunc";function $a(n){return n?Pt[n]:Pt[xa]}function en(n){ie(1,arguments);var e=J(n);return e.setHours(23,59,59,999),e}function tn(n){ie(1,arguments);var e=J(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function an(n){ie(1,arguments);var e=J(n);return en(e).getTime()===tn(e).getTime()}function nn(n,e){ie(2,arguments);var t=J(n),a=J(e),r=Ae(t,a),l=Math.abs(Ka(t,a)),s;if(l<1)s=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-r*l);var o=Ae(t,a)===-r;an(J(n))&&l===1&&Ae(n,a)===1&&(o=!1),s=r*(l-Number(o))}return s===0?0:s}function rn(n,e,t){ie(2,arguments);var a=Za(n,e)/1e3;return $a(t==null?void 0:t.roundingMethod)(a)}var ln={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sn=function(e,t,a){var r,l=ln[e];return typeof l=="string"?r=l:t===1?r=l.one:r=l.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};const on=sn;function Ue(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,a=n.formats[t]||n.formats[n.defaultWidth];return a}}var un={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cn={date:Ue({formats:un,defaultWidth:"full"}),time:Ue({formats:fn,defaultWidth:"full"}),dateTime:Ue({formats:dn,defaultWidth:"full"})};const mn=cn;var hn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gn=function(e,t,a,r){return hn[e]};const _n=gn;function Te(n){return function(e,t){var a=t!=null&&t.context?String(t.context):"standalone",r;if(a==="formatting"&&n.formattingValues){var l=n.defaultFormattingWidth||n.defaultWidth,s=t!=null&&t.width?String(t.width):l;r=n.formattingValues[s]||n.formattingValues[l]}else{var o=n.defaultWidth,i=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[i]||n.values[o]}var u=n.argumentCallback?n.argumentCallback(e):e;return r[u]}}var bn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mn=function(e,t){var a=Number(e),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Dn={ordinalNumber:Mn,era:Te({values:bn,defaultWidth:"wide"}),quarter:Te({values:vn,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Te({values:pn,defaultWidth:"wide"}),day:Te({values:yn,defaultWidth:"wide"}),dayPeriod:Te({values:kn,defaultWidth:"wide",formattingValues:wn,defaultFormattingWidth:"wide"})};const Sn=Dn;function Ne(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.width,r=a&&n.matchPatterns[a]||n.matchPatterns[n.defaultMatchWidth],l=e.match(r);if(!l)return null;var s=l[0],o=a&&n.parsePatterns[a]||n.parsePatterns[n.defaultParseWidth],i=Array.isArray(o)?Cn(o,function(d){return d.test(s)}):Pn(o,function(d){return d.test(s)}),u;u=n.valueCallback?n.valueCallback(i):i,u=t.valueCallback?t.valueCallback(u):u;var f=e.slice(s.length);return{value:u,rest:f}}}function Pn(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function Cn(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function In(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.match(n.matchPattern);if(!a)return null;var r=a[0],l=e.match(n.parsePattern);if(!l)return null;var s=n.valueCallback?n.valueCallback(l[0]):l[0];s=t.valueCallback?t.valueCallback(s):s;var o=e.slice(r.length);return{value:s,rest:o}}}var Tn=/^(\d+)(th|st|nd|rd)?/i,Nn=/\d+/i,zn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},En={any:[/^b/i,/^(a|c)/i]},Rn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},An={any:[/1/i,/2/i,/3/i,/4/i]},Wn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},On={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ln={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qn={ordinalNumber:In({matchPattern:Tn,parsePattern:Nn,valueCallback:function(e){return parseInt(e,10)}}),era:Ne({matchPatterns:zn,defaultMatchWidth:"wide",parsePatterns:En,defaultParseWidth:"any"}),quarter:Ne({matchPatterns:Rn,defaultMatchWidth:"wide",parsePatterns:An,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ne({matchPatterns:Wn,defaultMatchWidth:"wide",parsePatterns:On,defaultParseWidth:"any"}),day:Ne({matchPatterns:Fn,defaultMatchWidth:"wide",parsePatterns:Vn,defaultParseWidth:"any"}),dayPeriod:Ne({matchPatterns:jn,defaultMatchWidth:"any",parsePatterns:Ln,defaultParseWidth:"any"})};const Un=qn;var Xn={code:"en-US",formatDistance:on,formatLong:mn,formatRelative:_n,localize:Sn,match:Un,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Bn=Xn;function jt(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function Yn(n){return jt({},n)}var Ct=1440,Hn=2520,Xe=43200,Gn=86400;function Jn(n,e,t){var a,r;ie(2,arguments);var l=Qa(),s=(a=(r=t==null?void 0:t.locale)!==null&&r!==void 0?r:l.locale)!==null&&a!==void 0?a:Bn;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=Ae(n,e);if(isNaN(o))throw new RangeError("Invalid time value");var i=jt(Yn(t),{addSuffix:!!(t!=null&&t.addSuffix),comparison:o}),u,f;o>0?(u=J(e),f=J(n)):(u=J(n),f=J(e));var d=rn(f,u),m=(St(f)-St(u))/1e3,c=Math.round((d-m)/60),b;if(c<2)return t!=null&&t.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,i):d<10?s.formatDistance("lessThanXSeconds",10,i):d<20?s.formatDistance("lessThanXSeconds",20,i):d<40?s.formatDistance("halfAMinute",0,i):d<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):c===0?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",c,i);if(c<45)return s.formatDistance("xMinutes",c,i);if(c<90)return s.formatDistance("aboutXHours",1,i);if(c<Ct){var P=Math.round(c/60);return s.formatDistance("aboutXHours",P,i)}else{if(c<Hn)return s.formatDistance("xDays",1,i);if(c<Xe){var T=Math.round(c/Ct);return s.formatDistance("xDays",T,i)}else if(c<Gn)return b=Math.round(c/Xe),s.formatDistance("aboutXMonths",b,i)}if(b=nn(f,u),b<12){var y=Math.round(c/Xe);return s.formatDistance("xMonths",y,i)}else{var g=b%12,C=Math.floor(b/12);return g<3?s.formatDistance("aboutXYears",C,i):g<9?s.formatDistance("overXYears",C,i):s.formatDistance("almostXYears",C+1,i)}}function Re(n,e){return ie(1,arguments),Jn(n,Date.now(),e)}function Qn(n){var ke,_e;let e,t,a,r=n[1]?Re(new Date(n[1]))+" ago":"",l,s,o,i,u,f=(((ke=n[2])==null?void 0:ke.name)??"Bot")+"",d,m,c,b,P,T=n[0]?Re(new Date(n[0]))+" ago":"",y,g,C,w,E,L=(((_e=n[3])==null?void 0:_e.name)??"Bot")+"",oe,K;return i=new gt({props:{size:"xs",class:"mr-1"}}),w=new gt({props:{size:"xs",class:"mr-1"}}),{c(){e=N("div"),t=N("div"),a=q("Updated "),l=q(r),s=q(` by
		`),o=N("span"),O(i.$$.fragment),u=Y(),d=q(f),m=Y(),c=N("div"),b=N("div"),P=q("Created "),y=q(T),g=q(` by
		`),C=N("span"),O(w.$$.fragment),E=Y(),oe=q(L),this.h()},l(R){e=z(R,"DIV",{class:!0});var G=W(e);t=z(G,"DIV",{class:!0});var I=W(t);a=U(I,"Updated "),l=U(I,r),s=U(I,` by
		`),o=z(I,"SPAN",{class:!0});var h=W(o);F(i.$$.fragment,h),u=H(h),d=U(h,f),h.forEach(_),I.forEach(_),G.forEach(_),m=H(R),c=z(R,"DIV",{class:!0});var ne=W(c);b=z(ne,"DIV",{class:!0});var re=W(b);P=U(re,"Created "),y=U(re,T),g=U(re,` by
		`),C=z(re,"SPAN",{class:!0});var be=W(C);F(w.$$.fragment,be),E=H(be),oe=U(be,L),be.forEach(_),re.forEach(_),ne.forEach(_),this.h()},h(){S(o,"class","ml-1 flex items-center"),S(t,"class","flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 justify-end"),S(e,"class","mb-3"),S(C,"class","ml-1 flex items-center"),S(b,"class","flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 justify-end"),S(c,"class","mb-6")},m(R,G){D(R,e,G),M(e,t),M(t,a),M(t,l),M(t,s),M(t,o),V(i,o,null),M(o,u),M(o,d),D(R,m,G),D(R,c,G),M(c,b),M(b,P),M(b,y),M(b,g),M(b,C),V(w,C,null),M(C,E),M(C,oe),K=!0},p(R,[G]){var I,h;(!K||G&2)&&r!==(r=R[1]?Re(new Date(R[1]))+" ago":"")&&se(l,r),(!K||G&4)&&f!==(f=(((I=R[2])==null?void 0:I.name)??"Bot")+"")&&se(d,f),(!K||G&1)&&T!==(T=R[0]?Re(new Date(R[0]))+" ago":"")&&se(y,T),(!K||G&8)&&L!==(L=(((h=R[3])==null?void 0:h.name)??"Bot")+"")&&se(oe,L)},i(R){K||(v(i.$$.fragment,R),v(w.$$.fragment,R),K=!0)},o(R){p(i.$$.fragment,R),p(w.$$.fragment,R),K=!1},d(R){R&&(_(e),_(m),_(c)),j(i),j(w)}}}function Kn(n,e,t){let a,r,l,{created_by_id:s}=e,{created_at:o}=e,{updated_by_id:i}=e,{updated_at:u}=e;const{store:{users:f}}=Se;return x(n,f,d=>t(7,l=d)),n.$$set=d=>{"created_by_id"in d&&t(5,s=d.created_by_id),"created_at"in d&&t(0,o=d.created_at),"updated_by_id"in d&&t(6,i=d.updated_by_id),"updated_at"in d&&t(1,u=d.updated_at)},n.$$.update=()=>{n.$$.dirty&160&&t(3,a=s?l.find(d=>d.id===s):null),n.$$.dirty&192&&t(2,r=i?l.find(d=>d.id===i):null)},[o,u,r,a,f,s,i,l]}class Zn extends te{constructor(e){super(),ae(this,e,Kn,Qn,$,{created_by_id:5,created_at:0,updated_by_id:6,updated_at:1})}}function It(n){var ne,re,be,$e,et,tt;let e,t,a,r,l,s,o,i,u,f,d,m,c,b,P,T,y,g,C,w,E,L;function oe(k){n[15](k)}let K={type:"text",name:"role-name",label:"Name",placeholder:"Name",disabled:n[3],isInvalid:((ne=n[4])==null?void 0:ne.name)!==void 0,helperMessage:(be=(re=n[4])==null?void 0:re.name)==null?void 0:be.message,novalidate:!0,required:!0};n[2].name!==void 0&&(K.value=n[2].name),a=new na({props:K}),ve.push(()=>ye(a,"value",oe)),a.$on("input",n[12]);function ke(k){n[16](k)}let _e={name:"role-sort-index",label:"Sort Index",disabled:n[3],isInvalid:(($e=n[4])==null?void 0:$e.sort_index)!==void 0,helperMessage:(tt=(et=n[4])==null?void 0:et.sort_index)==null?void 0:tt.message,novalidate:!0,required:!0};n[2].sort_index!==void 0&&(_e.value=n[2].sort_index),s=new La({props:_e}),ve.push(()=>ye(s,"value",ke)),s.$on("input",n[12]);function R(k){n[17](k)}let G={name:"role-group",label:"Role Group"};n[2].group_id!==void 0&&(G.value=n[2].group_id),u=new Ga({props:G}),ve.push(()=>ye(u,"value",R));let I=n[1]==="update"&&Tt(n),h=n[1]!=="add"&&Nt(n);return y=new Fe({props:{type:"button",size:"xs",class:"mr-2",color:"alternative",disabled:n[3],$$slots:{default:[$n]},$$scope:{ctx:n}}}),y.$on("click",n[11]),C=new Fe({props:{type:"button",size:"xs",disabled:n[3],$$slots:{default:[ar]},$$scope:{ctx:n}}}),C.$on("click",n[13]),{c(){e=N("form"),t=N("div"),O(a.$$.fragment),l=Y(),O(s.$$.fragment),i=Y(),O(u.$$.fragment),d=Y(),I&&I.c(),m=Y(),c=N("div"),b=N("div"),h&&h.c(),P=Y(),T=N("div"),O(y.$$.fragment),g=Y(),O(C.$$.fragment),this.h()},l(k){e=z(k,"FORM",{class:!0});var A=W(e);t=z(A,"DIV",{class:!0});var Z=W(t);F(a.$$.fragment,Z),l=H(Z),F(s.$$.fragment,Z),i=H(Z),F(u.$$.fragment,Z),d=H(Z),I&&I.l(Z),Z.forEach(_),m=H(A),c=z(A,"DIV",{class:!0});var ue=W(c);b=z(ue,"DIV",{});var Ce=W(b);h&&h.l(Ce),Ce.forEach(_),P=H(ue),T=z(ue,"DIV",{});var he=W(T);F(y.$$.fragment,he),g=H(he),F(C.$$.fragment,he),he.forEach(_),ue.forEach(_),A.forEach(_),this.h()},h(){S(t,"class","space-y-6"),S(c,"class","flex justify-between"),e.noValidate=!0,S(e,"class","form mb-0 flex flex-col justify-between svelte-b6q6p2")},m(k,A){D(k,e,A),M(e,t),V(a,t,null),M(t,l),V(s,t,null),M(t,i),V(u,t,null),M(t,d),I&&I.m(t,null),M(e,m),M(e,c),M(c,b),h&&h.m(b,null),M(c,P),M(c,T),V(y,T,null),M(T,g),V(C,T,null),w=!0,E||(L=ze(e,"submit",Bt(n[14])),E=!0)},p(k,A){var at,nt,rt,lt,st,it;const Z={};A&8&&(Z.disabled=k[3]),A&16&&(Z.isInvalid=((at=k[4])==null?void 0:at.name)!==void 0),A&16&&(Z.helperMessage=(rt=(nt=k[4])==null?void 0:nt.name)==null?void 0:rt.message),!r&&A&4&&(r=!0,Z.value=k[2].name,pe(()=>r=!1)),a.$set(Z);const ue={};A&8&&(ue.disabled=k[3]),A&16&&(ue.isInvalid=((lt=k[4])==null?void 0:lt.sort_index)!==void 0),A&16&&(ue.helperMessage=(it=(st=k[4])==null?void 0:st.sort_index)==null?void 0:it.message),!o&&A&4&&(o=!0,ue.value=k[2].sort_index,pe(()=>o=!1)),s.$set(ue);const Ce={};!f&&A&4&&(f=!0,Ce.value=k[2].group_id,pe(()=>f=!1)),u.$set(Ce),k[1]==="update"?I?(I.p(k,A),A&2&&v(I,1)):(I=Tt(k),I.c(),v(I,1),I.m(t,null)):I&&(ce(),p(I,1,1,()=>{I=null}),me()),k[1]!=="add"?h?(h.p(k,A),A&2&&v(h,1)):(h=Nt(k),h.c(),v(h,1),h.m(b,null)):h&&(ce(),p(h,1,1,()=>{h=null}),me());const he={};A&8&&(he.disabled=k[3]),A&134217728&&(he.$$scope={dirty:A,ctx:k}),y.$set(he);const Ve={};A&8&&(Ve.disabled=k[3]),A&134217738&&(Ve.$$scope={dirty:A,ctx:k}),C.$set(Ve)},i(k){w||(v(a.$$.fragment,k),v(s.$$.fragment,k),v(u.$$.fragment,k),v(I),v(h),v(y.$$.fragment,k),v(C.$$.fragment,k),w=!0)},o(k){p(a.$$.fragment,k),p(s.$$.fragment,k),p(u.$$.fragment,k),p(I),p(h),p(y.$$.fragment,k),p(C.$$.fragment,k),w=!1},d(k){k&&_(e),j(a),j(s),j(u),I&&I.d(),h&&h.d(),j(y),j(C),E=!1,L()}}}function Tt(n){var a,r,l,s;let e,t;return e=new Zn({props:{created_at:(a=n[0])==null?void 0:a.created_at,created_by_id:(r=n[0])==null?void 0:r.created_by_id,updated_at:(l=n[0])==null?void 0:l.updated_at,updated_by_id:(s=n[0])==null?void 0:s.updated_by_id}}),{c(){O(e.$$.fragment)},l(o){F(e.$$.fragment,o)},m(o,i){V(e,o,i),t=!0},p(o,i){var f,d,m,c;const u={};i&1&&(u.created_at=(f=o[0])==null?void 0:f.created_at),i&1&&(u.created_by_id=(d=o[0])==null?void 0:d.created_by_id),i&1&&(u.updated_at=(m=o[0])==null?void 0:m.updated_at),i&1&&(u.updated_by_id=(c=o[0])==null?void 0:c.updated_by_id),e.$set(u)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){p(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function Nt(n){let e,t;return e=new Fe({props:{type:"button",size:"xs",color:"red",disabled:n[3],$$slots:{default:[xn]},$$scope:{ctx:n}}}),e.$on("click",n[18]),{c(){O(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,r){V(e,a,r),t=!0},p(a,r){const l={};r&8&&(l.disabled=a[3]),r&134217728&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){p(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function xn(n){let e;return{c(){e=q("Delete")},l(t){e=U(t,"Delete")},m(t,a){D(t,e,a)},d(t){t&&_(e)}}}function $n(n){let e;return{c(){e=q("Reset")},l(t){e=U(t,"Reset")},m(t,a){D(t,e,a)},d(t){t&&_(e)}}}function er(n){let e=n[1]==="add"?"Add":"Update",t;return{c(){t=q(e)},l(a){t=U(a,e)},m(a,r){D(a,t,r)},p(a,r){r&2&&e!==(e=a[1]==="add"?"Add":"Update")&&se(t,e)},d(a){a&&_(t)}}}function tr(n){let e;return{c(){e=q("...")},l(t){e=U(t,"...")},m(t,a){D(t,e,a)},p:Q,d(t){t&&_(e)}}}function ar(n){let e;function t(l,s){return l[3]?tr:er}let a=t(n),r=a(n);return{c(){r.c(),e=B()},l(l){r.l(l),e=B()},m(l,s){r.m(l,s),D(l,e,s)},p(l,s){a===(a=t(l))&&r?r.p(l,s):(r.d(1),r=a(l),r&&(r.c(),r.m(e.parentNode,e)))},d(l){l&&_(e),r.d(l)}}}function nr(n){let e,t,a=n[2]&&It(n);return{c(){a&&a.c(),e=B()},l(r){a&&a.l(r),e=B()},m(r,l){a&&a.m(r,l),D(r,e,l),t=!0},p(r,[l]){r[2]?a?(a.p(r,l),l&4&&v(a,1)):(a=It(r),a.c(),v(a,1),a.m(e.parentNode,e)):a&&(ce(),p(a,1,1,()=>{a=null}),me())},i(r){t||(v(a),t=!0)},o(r){p(a),t=!1},d(r){r&&_(e),a&&a.d(r)}}}function rr(n,e,t){let a,r,l,s,o,i;const{loading:u,targetRole:f,model:d,action:m,addRole:c,updateRole:b,deleteRole:P}=Vt();x(n,u,h=>t(3,o=h)),x(n,f,h=>t(0,a=h)),x(n,d,h=>t(2,l=h)),x(n,m,h=>t(1,r=h));const{closeDrawer:T}=xe(),{store:{roles:y}}=Se,{errors:g,submitted:C,validate:w,reset:E}=$t(ea({name:ta().required("Name is required").label("Name"),sort_index:aa().required().label("Sort Index")}));x(n,g,h=>t(4,i=h)),x(n,C,h=>t(19,s=h));const L=()=>{a&&d.set({name:a.name,sort_index:(a==null?void 0:a.sort_index)??0,group_id:`${a==null?void 0:a.role_group_id}`??"0"}),C.set(!1),E()},oe=async()=>{if(!s)return;const{name:h,sort_index:ne}=l;await w({name:h,sort_index:ne})},K=async()=>{try{u.set(!0),C.set(!0);const{name:h,sort_index:ne,group_id:re}=l;switch(await w({name:h,sort_index:ne}),r){case"add":await c({...a,name:h,sort_index:ne,role_group_id:parseInt(re,10)});break;case"update":await b({...a,name:h,sort_index:ne,role_group_id:parseInt(re,10)});break;case"delete":a!=null&&a.id&&await P(a.id);break;default:}await y.reload(),T()}catch(h){console.log("submit failed",h)}finally{u.set(!1)}};f.subscribe(h=>{h&&d.set({name:h==null?void 0:h.name,sort_index:(h==null?void 0:h.sort_index)??0,group_id:`${h==null?void 0:h.role_group_id}`??"0"})});function ke(h){fe.call(this,n,h)}function _e(h){n.$$.not_equal(l.name,h)&&(l.name=h,d.set(l))}function R(h){n.$$.not_equal(l.sort_index,h)&&(l.sort_index=h,d.set(l))}function G(h){n.$$.not_equal(l.group_id,h)&&(l.group_id=h,d.set(l))}return[a,r,l,o,i,u,f,d,m,g,C,L,oe,K,ke,_e,R,G,()=>{m.set("delete"),K()}]}class lr extends te{constructor(e){super(),ae(this,e,rr,nr,$,{})}}function sr(n){let e,t,a="Role",r,l,s,o,i;return l=new Qt({props:{class:"mb-4 dark:text-white"}}),l.$on("click",n[3]),o=new lr({}),{c(){e=N("div"),t=N("h5"),t.textContent=a,r=Y(),O(l.$$.fragment),s=Y(),O(o.$$.fragment),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=W(e);t=z(f,"H5",{id:!0,class:!0,"data-svelte-h":!0}),Ot(t)!=="svelte-1mqrwvg"&&(t.textContent=a),r=H(f),F(l.$$.fragment,f),f.forEach(_),s=H(u),F(o.$$.fragment,u),this.h()},h(){S(t,"id","drawer-label"),S(t,"class","inline-flex items-center mb-6 text-base font-semibold text-gray-500 uppercase dark:text-gray-400"),S(e,"class","flex items-center")},m(u,f){D(u,e,f),M(e,t),M(e,r),V(l,e,null),D(u,s,f),V(o,u,f),i=!0},p:Q,i(u){i||(v(l.$$.fragment,u),v(o.$$.fragment,u),i=!0)},o(u){p(l.$$.fragment,u),p(o.$$.fragment,u),i=!1},d(u){u&&(_(e),_(s)),j(l),j(o,u)}}}function ir(n){let e,t,a;function r(s){n[4](s)}let l={transitionType:"fly",transitionParams:n[1],id:"sidebar4",placement:"right",class:"mt-0",$$slots:{default:[sr]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.hidden=n[0]),e=new Zt({props:l}),ve.push(()=>ye(e,"hidden",r)),{c(){O(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){V(e,s,o),a=!0},p(s,[o]){const i={};o&32&&(i.$$scope={dirty:o,ctx:s}),!t&&o&1&&(t=!0,i.hidden=s[0],pe(()=>t=!1)),e.$set(i)},i(s){a||(v(e.$$.fragment,s),a=!0)},o(s){p(e.$$.fragment,s),a=!1},d(s){j(e,s)}}}function or(n,e,t){let a,r={x:320,duration:200,easing:Kt};const{drawerClosed:l,closeDrawer:s}=xe();x(n,l,i=>t(0,a=i));function o(i){a=i,l.set(a)}return[a,r,l,s,o]}class ur extends te{constructor(e){super(),ae(this,e,or,ir,$,{})}}function zt(n,e,t){const a=n.slice();return a[2]=e[t],a}function Et(n){let e,t,a=Oe(n[0]),r=[];for(let s=0;s<a.length;s+=1)r[s]=Rt(zt(n,a,s));const l=s=>p(r[s],1,1,()=>{r[s]=null});return{c(){e=N("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=z(s,"DIV",{class:!0});var o=W(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(_),this.h()},h(){S(e,"class","flex flex-col space-y-3")},m(s,o){D(s,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(s,o){if(o&1){a=Oe(s[0]);let i;for(i=0;i<a.length;i+=1){const u=zt(s,a,i);r[i]?(r[i].p(u,o),v(r[i],1)):(r[i]=Rt(u),r[i].c(),v(r[i],1),r[i].m(e,null))}for(ce(),i=a.length;i<r.length;i+=1)l(i);me()}},i(s){if(!t){for(let o=0;o<a.length;o+=1)v(r[o]);t=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)p(r[o]);t=!1},d(s){s&&_(e),Wt(r,s)}}}function Rt(n){let e,t;return e=new Wa({props:{title:n[2].name,group_id:n[2].id}}),{c(){O(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,r){V(e,a,r),t=!0},p(a,r){const l={};r&1&&(l.title=a[2].name),r&1&&(l.group_id=a[2].id),e.$set(l)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){p(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function fr(n){let e,t,a,r=n[0]&&n[0].length>0&&Et(n);return t=new ur({}),{c(){r&&r.c(),e=Y(),O(t.$$.fragment)},l(l){r&&r.l(l),e=H(l),F(t.$$.fragment,l)},m(l,s){r&&r.m(l,s),D(l,e,s),V(t,l,s),a=!0},p(l,[s]){l[0]&&l[0].length>0?r?(r.p(l,s),s&1&&v(r,1)):(r=Et(l),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(ce(),p(r,1,1,()=>{r=null}),me())},i(l){a||(v(r),v(t.$$.fragment,l),a=!0)},o(l){p(r),p(t.$$.fragment,l),a=!1},d(l){l&&_(e),r&&r.d(l),j(t,l)}}}function dr(n,e,t){let a;const{store:{roleGroups:r}}=Se;return x(n,r,l=>t(0,a=l)),[a,r]}class cr extends te{constructor(e){super(),ae(this,e,dr,fr,$,{})}}function mr(n){let e,t;return e=new cr({}),{c(){O(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,r){V(e,a,r),t=!0},p:Q,i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){p(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}class Pr extends te{constructor(e){super(),ae(this,e,null,mr,$,{})}}export{Pr as component};
