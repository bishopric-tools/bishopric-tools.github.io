import{$ as Se,s as pe,e as le,i as S,d as g,z as q,p as be,f as M,a as B,g as O,h as K,c as z,j,x as I,E as nt,a0 as it,M as he,l as se,m as re,P as at,n as Ae,y as we,C as Ve,a1 as ot,Z as Dt,o as Pt}from"../chunks/scheduler.8e28fde2.js";import{S as me,i as _e,a as c,g as ue,t as p,c as de,f as ve,b as w,d as v,m as k,e as y}from"../chunks/index.7310de3c.js";import{p as It}from"../chunks/stores.baa309bc.js";import{N as lt,T as St,a as ze}from"../chunks/NumberField.262caf1b.js";import{B as ke}from"../chunks/Button.483fa7bd.js";import{D as Te,a as Ee,b as ut,c as dt}from"../chunks/DataTable.5e58b13c.js";import{p as Ne,r as ye,a as Ue,e as je}from"../chunks/rbac.state.809eeacf.js";import{w as te,d as Ct}from"../chunks/index.e56d8ce4.js";import{a as ft}from"../chunks/auth.state.082b92f3.js";import{n as ct}from"../chunks/toaster.state.4f2416aa.js";import{C as pt,c as mt}from"../chunks/CloseButton.1a9c47d6.js";import{D as _t}from"../chunks/Drawer.adfaabd7.js";import{f as $t,c as gt,a as bt,b as ht,T as wt}from"../chunks/TextField.da583b18.js";import{I as vt,S as Tt}from"../chunks/SelectField.ddfd47cc.js";import{g as Et}from"../chunks/navigation.f09cfbf3.js";import{P as At,a as Nt}from"../chunks/PageLayout.e01325d0.js";let Y=null;const Ut=()=>(Y={drawerClosed:te(!0),focusedUser:te(null),closeDrawer:()=>{Y!=null&&Y.drawerClosed&&Y.drawerClosed.set(!0)},openDrawer:()=>{Y!=null&&Y.drawerClosed&&Y.drawerClosed.set(!1)}},Y),Vt=()=>{Y=null},qe=()=>Y||Ut(),{store:{currentUser:Ke}}=ft,{store:{permissions:He}}=ye,{action:{toastify:Pe}}=ct,qt={name:"",sort_index:0},Gt={name:"",sort_index:0};let ie=null,Ce=null;const Rt=()=>(Ce=te(qt),ie={loading:te(!1),model:te(Gt),action:te("view"),targetPermissionGroup:Ce,canDelete:Ct([He,Ce],([i,e])=>e?i.filter(t=>t.group_id===e.id).length===0:!1),addPermissionGroup:async i=>{var e,s,t,r;try{let n=i.sort_index;i.sort_index||(n=(((e=Se(He).sort((o,u)=>!(u!=null&&u.sort_index)||!(o!=null&&o.sort_index)?0:u.sort_index-o.sort_index)[1])==null?void 0:e.sort_index)??0)+1);const a=[{name:i.name,sort_index:n,created_by_id:(s=Se(Ke))==null?void 0:s.id,created_at:new Date().toISOString()}];await Ne.bulkCreate(a),(r=(t=ie==null?void 0:ie.targetPermissionGroup)==null?void 0:t.set)==null||r.call(t,null),Pe({type:"success",message:"Updated permission group successfully"})}catch{Pe({type:"error",message:"Update permission group failed, please refresh browser and try again."})}},updatePermissionGroup:async i=>{var e,s,t;try{const r=[{name:i.name,sort_index:i.sort_index,uuid:i.uuid,updated_by_id:(e=Se(Ke))==null?void 0:e.id,updated_at:new Date().toISOString()}];await Ne.bulkUpdate(r,{onConflict:"uuid"}),(t=(s=ie==null?void 0:ie.targetPermissionGroup)==null?void 0:s.set)==null||t.call(s,null),Pe({type:"success",message:"Updated permission group successfully."})}catch{Pe({type:"error",message:"Update permission group failed, please refresh browser and try again."})}},deletePermissionGroup:async i=>{if(i)try{await Ne.bulkDelete([i]),Pe({type:"success",message:"Deleted permission successfully."})}catch{Pe({type:"error",message:"Delete permission failed, please refresh browser and try again."})}}},ie),kt=()=>ie===null?Rt():ie,Ft=()=>{ie=null,Ce=null};function Ze(i){var oe,$e,fe,V,f,$;let e,s,t,r,n,a,l,o,u,d,b,P,D,G,Z,N,R,J,F;function C(_){i[17](_)}let h={type:"text",name:"permission-group-name",label:"Name",placeholder:"Name",disabled:i[3],isInvalid:((oe=i[4])==null?void 0:oe.name)!==void 0,helperMessage:(fe=($e=i[4])==null?void 0:$e.name)==null?void 0:fe.message,novalidate:!0,required:!0};i[2].name!==void 0&&(h.value=i[2].name),t=new wt({props:h}),be.push(()=>ve(t,"value",C)),t.$on("input",i[14]);function L(_){i[18](_)}let ee={name:"permission-group-sort-index",label:"Sort Index",disabled:i[3],isInvalid:((V=i[4])==null?void 0:V.sort_index)!==void 0,helperMessage:($=(f=i[4])==null?void 0:f.sort_index)==null?void 0:$.message,novalidate:!0,required:!0};i[2].sort_index!==void 0&&(ee.value=i[2].sort_index),a=new lt({props:ee}),be.push(()=>ve(a,"value",L)),a.$on("input",i[14]);let E=i[1]==="update"&&Je(i),U=i[1]!=="add"&&i[5]&&Qe(i);return G=new ke({props:{type:"button",size:"xs",class:"mr-2",color:"alternative",disabled:i[3],$$slots:{default:[Mt]},$$scope:{ctx:i}}}),G.$on("click",i[13]),N=new ke({props:{type:"button",size:"xs",disabled:i[3],$$slots:{default:[zt]},$$scope:{ctx:i}}}),N.$on("click",i[15]),{c(){e=M("form"),s=M("div"),w(t.$$.fragment),n=B(),w(a.$$.fragment),o=B(),E&&E.c(),u=B(),d=M("div"),b=M("div"),U&&U.c(),P=B(),D=M("div"),w(G.$$.fragment),Z=B(),w(N.$$.fragment),this.h()},l(_){e=O(_,"FORM",{class:!0});var A=K(e);s=O(A,"DIV",{class:!0});var Q=K(s);v(t.$$.fragment,Q),n=z(Q),v(a.$$.fragment,Q),o=z(Q),E&&E.l(Q),Q.forEach(g),u=z(A),d=O(A,"DIV",{class:!0});var W=K(d);b=O(W,"DIV",{});var ce=K(b);U&&U.l(ce),ce.forEach(g),P=z(W),D=O(W,"DIV",{});var m=K(D);v(G.$$.fragment,m),Z=z(m),v(N.$$.fragment,m),m.forEach(g),W.forEach(g),A.forEach(g),this.h()},h(){j(s,"class","space-y-6"),j(d,"class","flex justify-between"),e.noValidate=!0,j(e,"class","form mb-0 flex flex-col justify-between svelte-1dy7x2v")},m(_,A){S(_,e,A),I(e,s),k(t,s,null),I(s,n),k(a,s,null),I(s,o),E&&E.m(s,null),I(e,u),I(e,d),I(d,b),U&&U.m(b,null),I(d,P),I(d,D),k(G,D,null),I(D,Z),k(N,D,null),R=!0,J||(F=nt(e,"submit",it(i[16])),J=!0)},p(_,A){var T,H,X,ge,ne,De;const Q={};A&8&&(Q.disabled=_[3]),A&16&&(Q.isInvalid=((T=_[4])==null?void 0:T.name)!==void 0),A&16&&(Q.helperMessage=(X=(H=_[4])==null?void 0:H.name)==null?void 0:X.message),!r&&A&4&&(r=!0,Q.value=_[2].name,he(()=>r=!1)),t.$set(Q);const W={};A&8&&(W.disabled=_[3]),A&16&&(W.isInvalid=((ge=_[4])==null?void 0:ge.sort_index)!==void 0),A&16&&(W.helperMessage=(De=(ne=_[4])==null?void 0:ne.sort_index)==null?void 0:De.message),!l&&A&4&&(l=!0,W.value=_[2].sort_index,he(()=>l=!1)),a.$set(W),_[1]==="update"?E?(E.p(_,A),A&2&&c(E,1)):(E=Je(_),E.c(),c(E,1),E.m(s,null)):E&&(ue(),p(E,1,1,()=>{E=null}),de()),_[1]!=="add"&&_[5]?U?(U.p(_,A),A&34&&c(U,1)):(U=Qe(_),U.c(),c(U,1),U.m(b,null)):U&&(ue(),p(U,1,1,()=>{U=null}),de());const ce={};A&8&&(ce.disabled=_[3]),A&268435456&&(ce.$$scope={dirty:A,ctx:_}),G.$set(ce);const m={};A&8&&(m.disabled=_[3]),A&268435466&&(m.$$scope={dirty:A,ctx:_}),N.$set(m)},i(_){R||(c(t.$$.fragment,_),c(a.$$.fragment,_),c(E),c(U),c(G.$$.fragment,_),c(N.$$.fragment,_),R=!0)},o(_){p(t.$$.fragment,_),p(a.$$.fragment,_),p(E),p(U),p(G.$$.fragment,_),p(N.$$.fragment,_),R=!1},d(_){_&&g(e),y(t),y(a),E&&E.d(),U&&U.d(),y(G),y(N),J=!1,F()}}}function Je(i){var t,r,n,a;let e,s;return e=new vt({props:{created_at:(t=i[0])==null?void 0:t.created_at,created_by_id:(r=i[0])==null?void 0:r.created_by_id,updated_at:(n=i[0])==null?void 0:n.updated_at,updated_by_id:(a=i[0])==null?void 0:a.updated_by_id}}),{c(){w(e.$$.fragment)},l(l){v(e.$$.fragment,l)},m(l,o){k(e,l,o),s=!0},p(l,o){var d,b,P,D;const u={};o&1&&(u.created_at=(d=l[0])==null?void 0:d.created_at),o&1&&(u.created_by_id=(b=l[0])==null?void 0:b.created_by_id),o&1&&(u.updated_at=(P=l[0])==null?void 0:P.updated_at),o&1&&(u.updated_by_id=(D=l[0])==null?void 0:D.updated_by_id),e.$set(u)},i(l){s||(c(e.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),s=!1},d(l){y(e,l)}}}function Qe(i){let e,s;return e=new ke({props:{type:"button",size:"xs",color:"red",disabled:i[3],$$slots:{default:[Lt]},$$scope:{ctx:i}}}),e.$on("click",i[19]),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,r){const n={};r&8&&(n.disabled=t[3]),r&268435456&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(c(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function Lt(i){let e;return{c(){e=se("Delete")},l(s){e=re(s,"Delete")},m(s,t){S(s,e,t)},d(s){s&&g(e)}}}function Mt(i){let e;return{c(){e=se("Reset")},l(s){e=re(s,"Reset")},m(s,t){S(s,e,t)},d(s){s&&g(e)}}}function Ot(i){let e=i[1]==="add"?"Add":"Update",s;return{c(){s=se(e)},l(t){s=re(t,e)},m(t,r){S(t,s,r)},p(t,r){r&2&&e!==(e=t[1]==="add"?"Add":"Update")&&Ae(s,e)},d(t){t&&g(s)}}}function Bt(i){let e;return{c(){e=se("...")},l(s){e=re(s,"...")},m(s,t){S(s,e,t)},p:we,d(s){s&&g(e)}}}function zt(i){let e;function s(n,a){return n[3]?Bt:Ot}let t=s(i),r=t(i);return{c(){r.c(),e=le()},l(n){r.l(n),e=le()},m(n,a){r.m(n,a),S(n,e,a)},p(n,a){t===(t=s(n))&&r?r.p(n,a):(r.d(1),r=t(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&g(e),r.d(n)}}}function jt(i){let e,s,t=i[2]&&Ze(i);return{c(){t&&t.c(),e=le()},l(r){t&&t.l(r),e=le()},m(r,n){t&&t.m(r,n),S(r,e,n),s=!0},p(r,[n]){r[2]?t?(t.p(r,n),n&4&&c(t,1)):(t=Ze(r),t.c(),c(t,1),t.m(e.parentNode,e)):t&&(ue(),p(t,1,1,()=>{t=null}),de())},i(r){s||(c(t),s=!0)},o(r){p(t),s=!1},d(r){r&&g(e),t&&t.d(r)}}}function Kt(i,e,s){let t,r,n,a,l,o,u;const{loading:d,targetPermissionGroup:b,model:P,action:D,canDelete:G,addPermissionGroup:Z,updatePermissionGroup:N,deletePermissionGroup:R}=kt();q(i,d,$=>s(3,l=$)),q(i,b,$=>s(0,t=$)),q(i,P,$=>s(2,n=$)),q(i,D,$=>s(1,r=$)),q(i,G,$=>s(5,u=$));const{closeDrawer:J}=qe(),{store:{permissionGroups:F}}=ye,{errors:C,submitted:h,validate:L,reset:ee}=$t(gt({name:bt().required("Name is required").label("Name"),sort_index:ht().required().label("Sort Index")}));q(i,C,$=>s(4,o=$)),q(i,h,$=>s(20,a=$));const E=()=>{t&&P.set({name:t.name,sort_index:(t==null?void 0:t.sort_index)??0}),h.set(!1),ee()},U=async()=>{if(!a)return;const{name:$,sort_index:_}=n;await L({name:$,sort_index:_})},oe=async()=>{try{d.set(!0),h.set(!0);const{name:$,sort_index:_}=n;switch(await L({name:$,sort_index:_}),r){case"add":await Z({...t,name:$,sort_index:_});break;case"update":await N({...t,name:$,sort_index:_});break;case"delete":t!=null&&t.id&&await R(t.id);break;default:}await F.reload(),J()}catch($){console.log("submit failed",$)}finally{d.set(!1)}};b.subscribe($=>{$&&P.set({name:$==null?void 0:$.name,sort_index:($==null?void 0:$.sort_index)??0})});function $e($){at.call(this,i,$)}function fe($){i.$$.not_equal(n.name,$)&&(n.name=$,P.set(n))}function V($){i.$$.not_equal(n.sort_index,$)&&(n.sort_index=$,P.set(n))}return[t,r,n,l,o,u,d,b,P,D,G,C,h,E,U,oe,$e,fe,V,()=>{D.set("delete"),oe()}]}class Ht extends me{constructor(e){super(),_e(this,e,Kt,jt,pe,{})}}function Zt(i){let e,s,t="Permission Group",r,n,a,l,o;return n=new pt({props:{class:"mb-4 dark:text-white"}}),n.$on("click",i[3]),l=new Ht({}),{c(){e=M("div"),s=M("h5"),s.textContent=t,r=B(),w(n.$$.fragment),a=B(),w(l.$$.fragment),this.h()},l(u){e=O(u,"DIV",{class:!0});var d=K(e);s=O(d,"H5",{id:!0,class:!0,"data-svelte-h":!0}),Ve(s)!=="svelte-1amlidg"&&(s.textContent=t),r=z(d),v(n.$$.fragment,d),d.forEach(g),a=z(u),v(l.$$.fragment,u),this.h()},h(){j(s,"id","drawer-label"),j(s,"class","inline-flex items-center mb-6 text-base font-semibold text-gray-500 uppercase dark:text-gray-400"),j(e,"class","flex items-center")},m(u,d){S(u,e,d),I(e,s),I(e,r),k(n,e,null),S(u,a,d),k(l,u,d),o=!0},p:we,i(u){o||(c(n.$$.fragment,u),c(l.$$.fragment,u),o=!0)},o(u){p(n.$$.fragment,u),p(l.$$.fragment,u),o=!1},d(u){u&&(g(e),g(a)),y(n),y(l,u)}}}function Jt(i){let e,s,t;function r(a){i[4](a)}let n={transitionType:"fly",transitionParams:i[1],id:"permission-group-drawer",placement:"right",class:"mt-0",$$slots:{default:[Zt]},$$scope:{ctx:i}};return i[0]!==void 0&&(n.hidden=i[0]),e=new _t({props:n}),be.push(()=>ve(e,"hidden",r)),{c(){w(e.$$.fragment)},l(a){v(e.$$.fragment,a)},m(a,l){k(e,a,l),t=!0},p(a,[l]){const o={};l&32&&(o.$$scope={dirty:l,ctx:a}),!s&&l&1&&(s=!0,o.hidden=a[0],he(()=>s=!1)),e.$set(o)},i(a){t||(c(e.$$.fragment,a),t=!0)},o(a){p(e.$$.fragment,a),t=!1},d(a){y(e,a)}}}function Qt(i,e,s){let t,r={x:320,duration:200,easing:mt};const{drawerClosed:n,closeDrawer:a}=qe();q(i,n,o=>s(0,t=o));function l(o){t=o,n.set(t)}return[t,r,n,a,l]}class Wt extends me{constructor(e){super(),_e(this,e,Qt,Jt,pe,{})}}function We(i){let e,s,t;return s=new ut({props:{options:i[1],data:i[3],loading:i[4],$$slots:{header:[Yt]},$$scope:{ctx:i}}}),{c(){e=M("div"),w(s.$$.fragment),this.h()},l(r){e=O(r,"DIV",{class:!0});var n=K(e);v(s.$$.fragment,n),n.forEach(g),this.h()},h(){j(e,"class","flex flex-col space-y-3")},m(r,n){S(r,e,n),k(s,e,null),t=!0},p(r,n){const a={};n&2&&(a.options=r[1]),n&8&&(a.data=r[3]),n&16&&(a.loading=r[4]),n&131073&&(a.$$scope={dirty:n,ctx:r}),s.$set(a)},i(r){t||(c(s.$$.fragment,r),t=!0)},o(r){p(s.$$.fragment,r),t=!1},d(r){r&&g(e),y(s)}}}function Xt(i){let e;return{c(){e=se("Add")},l(s){e=re(s,"Add")},m(s,t){S(s,e,t)},d(s){s&&g(e)}}}function Yt(i){let e,s,t,r,n,a;return n=new ke({props:{size:"xs",color:"alternative",$$slots:{default:[Xt]},$$scope:{ctx:i}}}),n.$on("click",i[9]),{c(){e=M("div"),s=M("p"),t=se(i[0]),r=B(),w(n.$$.fragment),this.h()},l(l){e=O(l,"DIV",{slot:!0,class:!0});var o=K(e);s=O(o,"P",{class:!0});var u=K(s);t=re(u,i[0]),u.forEach(g),r=z(o),v(n.$$.fragment,o),o.forEach(g),this.h()},h(){j(s,"class","dark:text-white text-lg"),j(e,"slot","header"),j(e,"class","flex justify-between mb-0 items-center mx-md-5")},m(l,o){S(l,e,o),I(e,s),I(s,t),I(e,r),k(n,e,null),a=!0},p(l,o){(!a||o&1)&&Ae(t,l[0]);const u={};o&131072&&(u.$$scope={dirty:o,ctx:l}),n.$set(u)},i(l){a||(c(n.$$.fragment,l),a=!0)},o(l){p(n.$$.fragment,l),a=!1},d(l){l&&g(e),y(n)}}}function xt(i){let e,s,t,r=i[1]&&i[2]&&i[2].length>0&&We(i);return s=new Wt({}),{c(){r&&r.c(),e=B(),w(s.$$.fragment)},l(n){r&&r.l(n),e=z(n),v(s.$$.fragment,n)},m(n,a){r&&r.m(n,a),S(n,e,a),k(s,n,a),t=!0},p(n,[a]){n[1]&&n[2]&&n[2].length>0?r?(r.p(n,a),a&6&&c(r,1)):(r=We(n),r.c(),c(r,1),r.m(e.parentNode,e)):r&&(ue(),p(r,1,1,()=>{r=null}),de())},i(n){t||(c(r),c(s.$$.fragment,n),t=!0)},o(n){p(r),p(s.$$.fragment,n),t=!1},d(n){n&&g(e),r&&r.d(n),y(s,n)}}}function es(i,e,s){let t,r,n,a,{title:l="Permission Groups"}=e;const{store:{permissionGroups:o}}=ye;q(i,o,C=>s(2,r=C));const{openDrawer:u}=qe(),{targetPermissionGroup:d,action:b}=kt(),{loading:P}=o;q(i,P,C=>s(4,a=C));const D={onRowClick:C=>{b.set("update"),u();const h={...C};d.set(h)},columnDefs:[{label:"Name",dataProperty:"name",dataType:Te.String,viewAlignment:Ee.Left},{label:"Sort Index",dataProperty:"sort_index",dataType:Te.String,viewAlignment:Ee.Right}]},G=dt(D),{store:{options:Z,data:N},actions:{setRowData:R}}=G;q(i,Z,C=>s(1,t=C)),q(i,N,C=>s(3,n=C));const J=()=>{b.set("add"),d.set({name:"",sort_index:0}),u()},F=o.subscribe(C=>{const h=C.sort(({sort_index:L},{sort_index:ee})=>L-ee);R(h)});return ot(()=>{F(),Vt(),Ft()}),i.$$set=C=>{"title"in C&&s(0,l=C.title)},[l,t,r,n,a,o,P,Z,N,J]}class ts extends me{constructor(e){super(),_e(this,e,es,xt,pe,{title:0})}}let x=null;const ss=()=>(x={drawerClosed:te(!0),focusedUser:te(null),closeDrawer:()=>{var i,e;x&&((e=(i=x==null?void 0:x.drawerClosed)==null?void 0:i.set)==null||e.call(i,!0))},openDrawer:()=>{var i,e;x&&((e=(i=x==null?void 0:x.drawerClosed)==null?void 0:i.set)==null||e.call(i,!1))}},x),rs=()=>{x=null},Ge=()=>x||ss(),{store:{currentUser:Xe}}=ft,{store:{permissions:ns}}=ye,{action:{toastify:Ie}}=ct,is={description:"",sort_index:0,permission_group_id:0},as={description:"",sort_index:0,group_id:"0"};let ae=null;const os=()=>(ae={loading:te(!1),model:te(as),action:te("view"),targetPermission:te(is),addPermission:async i=>{var e,s,t,r;try{let n=i.sort_index;i.sort_index||(n=(((e=Se(ns).sort((o,u)=>!(u!=null&&u.sort_index)||!(o!=null&&o.sort_index)?0:u.sort_index-o.sort_index)[1])==null?void 0:e.sort_index)??0)+1);const a=[{description:i.description,sort_index:n,permission_group_id:i.permission_group_id,created_by_id:(s=Se(Xe))==null?void 0:s.id,created_at:new Date().toISOString()}];await Ue.bulkCreate(a),(r=(t=ae==null?void 0:ae.targetPermission)==null?void 0:t.set)==null||r.call(t,null),Ie({type:"success",message:"Add permission successfully"})}catch{Ie({type:"error",message:"Update permission failed, please refresh browser and try again."})}},updatePermission:async i=>{var e,s,t;try{const r=[{description:i.description,sort_index:i.sort_index,uuid:i.uuid,permission_group_id:i.permission_group_id,updated_by_id:(e=Se(Xe))==null?void 0:e.id,updated_at:new Date().toISOString()}];await Ue.bulkUpdate(r,{onConflict:"uuid"}),(t=(s=ae==null?void 0:ae.targetPermission)==null?void 0:s.set)==null||t.call(s,null),Ie({type:"success",message:"Updated permission successfully."})}catch{Ie({type:"error",message:"Update permission failed, please refresh browser and try again."})}},deletePermission:async i=>{if(i)try{await Ue.bulkDelete([i]),Ie({type:"success",message:"Deleted permission successfully."})}catch{Ie({type:"error",message:"Delete permission failed, please refresh browser and try again."})}}},ae),yt=()=>ae===null?os():ae,ls=()=>{ae=null};function us(i){let e,s="No data";return{c(){e=M("p"),e.textContent=s},l(t){e=O(t,"P",{"data-svelte-h":!0}),Ve(e)!=="svelte-t5me1l"&&(e.textContent=s)},m(t,r){S(t,e,r)},p:we,i:we,o:we,d(t){t&&g(e)}}}function ds(i){let e,s;return e=new ut({props:{options:i[1],data:i[3],loading:i[4],$$slots:{header:[cs]},$$scope:{ctx:i}}}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,r){const n={};r&2&&(n.options=t[1]),r&8&&(n.data=t[3]),r&16&&(n.loading=t[4]),r&262145&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(c(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function fs(i){let e;return{c(){e=se("Add")},l(s){e=re(s,"Add")},m(s,t){S(s,e,t)},d(s){s&&g(e)}}}function cs(i){let e,s,t,r,n,a;return n=new ke({props:{size:"xs",color:"alternative",$$slots:{default:[fs]},$$scope:{ctx:i}}}),n.$on("click",i[9]),{c(){e=M("div"),s=M("p"),t=se(i[0]),r=B(),w(n.$$.fragment),this.h()},l(l){e=O(l,"DIV",{slot:!0,class:!0});var o=K(e);s=O(o,"P",{class:!0});var u=K(s);t=re(u,i[0]),u.forEach(g),r=z(o),v(n.$$.fragment,o),o.forEach(g),this.h()},h(){j(s,"class","dark:text-white text-2xl"),j(e,"slot","header"),j(e,"class","flex justify-between mb-0 items-center mx-md-5")},m(l,o){S(l,e,o),I(e,s),I(s,t),I(e,r),k(n,e,null),a=!0},p(l,o){(!a||o&1)&&Ae(t,l[0]);const u={};o&262144&&(u.$$scope={dirty:o,ctx:l}),n.$set(u)},i(l){a||(c(n.$$.fragment,l),a=!0)},o(l){p(n.$$.fragment,l),a=!1},d(l){l&&g(e),y(n)}}}function ps(i){let e,s,t,r;const n=[ds,us],a=[];function l(o,u){return o[1]&&o[2]&&o[2].length>0?0:1}return e=l(i),s=a[e]=n[e](i),{c(){s.c(),t=le()},l(o){s.l(o),t=le()},m(o,u){a[e].m(o,u),S(o,t,u),r=!0},p(o,[u]){let d=e;e=l(o),e===d?a[e].p(o,u):(ue(),p(a[d],1,1,()=>{a[d]=null}),de(),s=a[e],s?s.p(o,u):(s=a[e]=n[e](o),s.c()),c(s,1),s.m(t.parentNode,t))},i(o){r||(c(s),r=!0)},o(o){p(s),r=!1},d(o){o&&g(t),a[e].d(o)}}}function ms(i,e,s){let t,r,n,a,{title:l="Permissions"}=e,{group_id:o=1}=e;const{store:{permissions:u}}=ye;q(i,u,h=>s(2,r=h));const{openDrawer:d}=Ge(),{targetPermission:b,action:P}=yt(),{loading:D}=u;q(i,D,h=>s(4,a=h));const G={onRowClick:h=>{P.set("update"),d();const L={...h},ee={id:L.id,description:L.description,permission_group_id:L.group_id,sort_index:L.sort_index,uuid:L.uuid,created_by_id:L.created_by_id,created_at:L.created_at,updated_by_id:L.updated_by_id,updated_at:L.updated_at};b.set(ee)},columnDefs:[{label:"Description",dataProperty:"description",dataType:Te.String,viewAlignment:Ee.Left,width:100},{label:"Sort Index",dataProperty:"sort_index",dataType:Te.String,viewAlignment:Ee.Right}]},Z=dt(G),{store:{options:N,data:R},actions:{setRowData:J}}=Z;q(i,N,h=>s(1,t=h)),q(i,R,h=>s(3,n=h));const F=()=>{P.set("add"),b.set({description:"",sort_index:0,permission_group_id:o}),d()},C=u.subscribe(h=>{J(h.filter(L=>L.group_id===o))});return ot(()=>{C(),rs(),ls()}),i.$$set=h=>{"title"in h&&s(0,l=h.title),"group_id"in h&&s(10,o=h.group_id)},[l,t,r,n,a,u,D,N,R,F,o]}class _s extends me{constructor(e){super(),_e(this,e,ms,ps,pe,{title:0,group_id:10})}}function $s(i){let e,s,t;function r(a){i[6](a)}let n={label:i[1],name:i[2],items:i[3]};return i[0]!==void 0&&(n.value=i[0]),e=new Tt({props:n}),be.push(()=>ve(e,"value",r)),{c(){w(e.$$.fragment)},l(a){v(e.$$.fragment,a)},m(a,l){k(e,a,l),t=!0},p(a,[l]){const o={};l&2&&(o.label=a[1]),l&4&&(o.name=a[2]),l&8&&(o.items=a[3]),!s&&l&1&&(s=!0,o.value=a[0],he(()=>s=!1)),e.$set(o)},i(a){t||(c(e.$$.fragment,a),t=!0)},o(a){p(e.$$.fragment,a),t=!1},d(a){y(e,a)}}}function gs(i,e,s){let t,r,{label:n=""}=e,{name:a=""}=e,{value:l}=e;const{store:{permissionGroups:o}}=ye;q(i,o,d=>s(5,r=d));function u(d){l=d,s(0,l)}return i.$$set=d=>{"label"in d&&s(1,n=d.label),"name"in d&&s(2,a=d.name),"value"in d&&s(0,l=d.value)},i.$$.update=()=>{i.$$.dirty&32&&s(3,t=r.map(d=>({value:d.id+"",name:`${d.name}`})))},[l,n,a,t,o,r,u]}class bs extends me{constructor(e){super(),_e(this,e,gs,$s,pe,{label:1,name:2,value:0})}}function Ye(i){var $,_,A,Q,W,ce;let e,s,t,r,n,a,l,o,u,d,b,P,D,G,Z,N,R,J,F,C,h,L;function ee(m){i[15](m)}let E={type:"text",description:"permission-description",label:"Description",placeholder:"Description",disabled:i[3],isInvalid:(($=i[4])==null?void 0:$.description)!==void 0,helperMessage:(A=(_=i[4])==null?void 0:_.description)==null?void 0:A.message,novalidate:!0,required:!0};i[2].description!==void 0&&(E.value=i[2].description),t=new wt({props:E}),be.push(()=>ve(t,"value",ee)),t.$on("input",i[12]);function U(m){i[16](m)}let oe={description:"permission-sort-index",label:"Sort Index",disabled:i[3],isInvalid:((Q=i[4])==null?void 0:Q.sort_index)!==void 0,helperMessage:(ce=(W=i[4])==null?void 0:W.sort_index)==null?void 0:ce.message,novalidate:!0,required:!0};i[2].sort_index!==void 0&&(oe.value=i[2].sort_index),a=new lt({props:oe}),be.push(()=>ve(a,"value",U)),a.$on("input",i[12]);function $e(m){i[17](m)}let fe={name:"permission-group",label:"Permission Group"};i[2].group_id!==void 0&&(fe.value=i[2].group_id),u=new bs({props:fe}),be.push(()=>ve(u,"value",$e));let V=i[1]==="update"&&xe(i),f=i[1]!=="add"&&et(i);return R=new ke({props:{type:"button",size:"xs",class:"mr-2",color:"alternative",disabled:i[3],$$slots:{default:[ws]},$$scope:{ctx:i}}}),R.$on("click",i[11]),F=new ke({props:{type:"button",size:"xs",disabled:i[3],$$slots:{default:[ys]},$$scope:{ctx:i}}}),F.$on("click",i[13]),{c(){e=M("form"),s=M("div"),w(t.$$.fragment),n=B(),w(a.$$.fragment),o=B(),w(u.$$.fragment),b=B(),V&&V.c(),P=B(),D=M("div"),G=M("div"),f&&f.c(),Z=B(),N=M("div"),w(R.$$.fragment),J=B(),w(F.$$.fragment),this.h()},l(m){e=O(m,"FORM",{class:!0});var T=K(e);s=O(T,"DIV",{class:!0});var H=K(s);v(t.$$.fragment,H),n=z(H),v(a.$$.fragment,H),o=z(H),v(u.$$.fragment,H),b=z(H),V&&V.l(H),H.forEach(g),P=z(T),D=O(T,"DIV",{class:!0});var X=K(D);G=O(X,"DIV",{});var ge=K(G);f&&f.l(ge),ge.forEach(g),Z=z(X),N=O(X,"DIV",{});var ne=K(N);v(R.$$.fragment,ne),J=z(ne),v(F.$$.fragment,ne),ne.forEach(g),X.forEach(g),T.forEach(g),this.h()},h(){j(s,"class","space-y-6"),j(D,"class","flex justify-between"),e.noValidate=!0,j(e,"class","form mb-0 flex flex-col justify-between svelte-1dy7x2v")},m(m,T){S(m,e,T),I(e,s),k(t,s,null),I(s,n),k(a,s,null),I(s,o),k(u,s,null),I(s,b),V&&V.m(s,null),I(e,P),I(e,D),I(D,G),f&&f.m(G,null),I(D,Z),I(D,N),k(R,N,null),I(N,J),k(F,N,null),C=!0,h||(L=nt(e,"submit",it(i[14])),h=!0)},p(m,T){var Re,Fe,Le,Me,Oe,Be;const H={};T&8&&(H.disabled=m[3]),T&16&&(H.isInvalid=((Re=m[4])==null?void 0:Re.description)!==void 0),T&16&&(H.helperMessage=(Le=(Fe=m[4])==null?void 0:Fe.description)==null?void 0:Le.message),!r&&T&4&&(r=!0,H.value=m[2].description,he(()=>r=!1)),t.$set(H);const X={};T&8&&(X.disabled=m[3]),T&16&&(X.isInvalid=((Me=m[4])==null?void 0:Me.sort_index)!==void 0),T&16&&(X.helperMessage=(Be=(Oe=m[4])==null?void 0:Oe.sort_index)==null?void 0:Be.message),!l&&T&4&&(l=!0,X.value=m[2].sort_index,he(()=>l=!1)),a.$set(X);const ge={};!d&&T&4&&(d=!0,ge.value=m[2].group_id,he(()=>d=!1)),u.$set(ge),m[1]==="update"?V?(V.p(m,T),T&2&&c(V,1)):(V=xe(m),V.c(),c(V,1),V.m(s,null)):V&&(ue(),p(V,1,1,()=>{V=null}),de()),m[1]!=="add"?f?(f.p(m,T),T&2&&c(f,1)):(f=et(m),f.c(),c(f,1),f.m(G,null)):f&&(ue(),p(f,1,1,()=>{f=null}),de());const ne={};T&8&&(ne.disabled=m[3]),T&134217728&&(ne.$$scope={dirty:T,ctx:m}),R.$set(ne);const De={};T&8&&(De.disabled=m[3]),T&134217738&&(De.$$scope={dirty:T,ctx:m}),F.$set(De)},i(m){C||(c(t.$$.fragment,m),c(a.$$.fragment,m),c(u.$$.fragment,m),c(V),c(f),c(R.$$.fragment,m),c(F.$$.fragment,m),C=!0)},o(m){p(t.$$.fragment,m),p(a.$$.fragment,m),p(u.$$.fragment,m),p(V),p(f),p(R.$$.fragment,m),p(F.$$.fragment,m),C=!1},d(m){m&&g(e),y(t),y(a),y(u),V&&V.d(),f&&f.d(),y(R),y(F),h=!1,L()}}}function xe(i){var t,r,n,a;let e,s;return e=new vt({props:{created_at:(t=i[0])==null?void 0:t.created_at,created_by_id:(r=i[0])==null?void 0:r.created_by_id,updated_at:(n=i[0])==null?void 0:n.updated_at,updated_by_id:(a=i[0])==null?void 0:a.updated_by_id}}),{c(){w(e.$$.fragment)},l(l){v(e.$$.fragment,l)},m(l,o){k(e,l,o),s=!0},p(l,o){var d,b,P,D;const u={};o&1&&(u.created_at=(d=l[0])==null?void 0:d.created_at),o&1&&(u.created_by_id=(b=l[0])==null?void 0:b.created_by_id),o&1&&(u.updated_at=(P=l[0])==null?void 0:P.updated_at),o&1&&(u.updated_by_id=(D=l[0])==null?void 0:D.updated_by_id),e.$set(u)},i(l){s||(c(e.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),s=!1},d(l){y(e,l)}}}function et(i){let e,s;return e=new ke({props:{type:"button",size:"xs",color:"red",disabled:i[3],$$slots:{default:[hs]},$$scope:{ctx:i}}}),e.$on("click",i[18]),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,r){const n={};r&8&&(n.disabled=t[3]),r&134217728&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(c(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function hs(i){let e;return{c(){e=se("Delete")},l(s){e=re(s,"Delete")},m(s,t){S(s,e,t)},d(s){s&&g(e)}}}function ws(i){let e;return{c(){e=se("Reset")},l(s){e=re(s,"Reset")},m(s,t){S(s,e,t)},d(s){s&&g(e)}}}function vs(i){let e=i[1]==="add"?"Add":"Update",s;return{c(){s=se(e)},l(t){s=re(t,e)},m(t,r){S(t,s,r)},p(t,r){r&2&&e!==(e=t[1]==="add"?"Add":"Update")&&Ae(s,e)},d(t){t&&g(s)}}}function ks(i){let e;return{c(){e=se("...")},l(s){e=re(s,"...")},m(s,t){S(s,e,t)},p:we,d(s){s&&g(e)}}}function ys(i){let e;function s(n,a){return n[3]?ks:vs}let t=s(i),r=t(i);return{c(){r.c(),e=le()},l(n){r.l(n),e=le()},m(n,a){r.m(n,a),S(n,e,a)},p(n,a){t===(t=s(n))&&r?r.p(n,a):(r.d(1),r=t(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&g(e),r.d(n)}}}function Ds(i){let e,s,t=i[2]&&Ye(i);return{c(){t&&t.c(),e=le()},l(r){t&&t.l(r),e=le()},m(r,n){t&&t.m(r,n),S(r,e,n),s=!0},p(r,[n]){r[2]?t?(t.p(r,n),n&4&&c(t,1)):(t=Ye(r),t.c(),c(t,1),t.m(e.parentNode,e)):t&&(ue(),p(t,1,1,()=>{t=null}),de())},i(r){s||(c(t),s=!0)},o(r){p(t),s=!1},d(r){r&&g(e),t&&t.d(r)}}}function Ps(i,e,s){let t,r,n,a,l,o;const{loading:u,targetPermission:d,model:b,action:P,addPermission:D,updatePermission:G,deletePermission:Z}=yt();q(i,u,f=>s(3,l=f)),q(i,d,f=>s(0,t=f)),q(i,b,f=>s(2,n=f)),q(i,P,f=>s(1,r=f));const{closeDrawer:N}=Ge(),{store:{permissions:R}}=ye,{errors:J,submitted:F,validate:C,reset:h}=$t(gt({description:bt().required("Description is required").label("Description"),sort_index:ht().required().label("Sort Index")}));q(i,J,f=>s(4,o=f)),q(i,F,f=>s(19,a=f));const L=()=>{t&&b.set({description:t.description,sort_index:(t==null?void 0:t.sort_index)??0,group_id:`${t==null?void 0:t.permission_group_id}`??"0"}),F.set(!1),h()},ee=async()=>{if(!a)return;const{description:f,sort_index:$}=n;await C({description:f,sort_index:$})},E=async()=>{try{u.set(!0),F.set(!0);const{description:f,sort_index:$,group_id:_}=n;switch(await C({description:f,sort_index:$}),r){case"add":await D({...t,description:f,sort_index:$,permission_group_id:parseInt(_,10)});break;case"update":await G({...t,description:f,sort_index:$,permission_group_id:parseInt(_,10)});break;case"delete":t!=null&&t.id&&await Z(t.id);break;default:}await R.reload(),N()}catch(f){console.log("submit failed",f)}finally{u.set(!1)}};d.subscribe(f=>{f&&b.set({description:f==null?void 0:f.description,sort_index:(f==null?void 0:f.sort_index)??0,group_id:`${f==null?void 0:f.permission_group_id}`??"0"})});function U(f){at.call(this,i,f)}function oe(f){i.$$.not_equal(n.description,f)&&(n.description=f,b.set(n))}function $e(f){i.$$.not_equal(n.sort_index,f)&&(n.sort_index=f,b.set(n))}function fe(f){i.$$.not_equal(n.group_id,f)&&(n.group_id=f,b.set(n))}return[t,r,n,l,o,u,d,b,P,J,F,L,ee,E,U,oe,$e,fe,()=>{P.set("delete"),E()}]}class Is extends me{constructor(e){super(),_e(this,e,Ps,Ds,pe,{})}}function Ss(i){let e,s,t="Permission",r,n,a,l,o;return n=new pt({props:{class:"mb-4 dark:text-white"}}),n.$on("click",i[3]),l=new Is({}),{c(){e=M("div"),s=M("h5"),s.textContent=t,r=B(),w(n.$$.fragment),a=B(),w(l.$$.fragment),this.h()},l(u){e=O(u,"DIV",{class:!0});var d=K(e);s=O(d,"H5",{id:!0,class:!0,"data-svelte-h":!0}),Ve(s)!=="svelte-10at4k3"&&(s.textContent=t),r=z(d),v(n.$$.fragment,d),d.forEach(g),a=z(u),v(l.$$.fragment,u),this.h()},h(){j(s,"id","drawer-label"),j(s,"class","inline-flex items-center mb-6 text-base font-semibold text-gray-500 uppercase dark:text-gray-400"),j(e,"class","flex items-center")},m(u,d){S(u,e,d),I(e,s),I(e,r),k(n,e,null),S(u,a,d),k(l,u,d),o=!0},p:we,i(u){o||(c(n.$$.fragment,u),c(l.$$.fragment,u),o=!0)},o(u){p(n.$$.fragment,u),p(l.$$.fragment,u),o=!1},d(u){u&&(g(e),g(a)),y(n),y(l,u)}}}function Cs(i){let e,s,t;function r(a){i[4](a)}let n={transitionType:"fly",transitionParams:i[1],id:"permissions-drawer",placement:"right",class:"mt-0",$$slots:{default:[Ss]},$$scope:{ctx:i}};return i[0]!==void 0&&(n.hidden=i[0]),e=new _t({props:n}),be.push(()=>ve(e,"hidden",r)),{c(){w(e.$$.fragment)},l(a){v(e.$$.fragment,a)},m(a,l){k(e,a,l),t=!0},p(a,[l]){const o={};l&32&&(o.$$scope={dirty:l,ctx:a}),!s&&l&1&&(s=!0,o.hidden=a[0],he(()=>s=!1)),e.$set(o)},i(a){t||(c(e.$$.fragment,a),t=!0)},o(a){p(e.$$.fragment,a),t=!1},d(a){y(e,a)}}}function Ts(i,e,s){let t,r={x:320,duration:200,easing:mt};const{drawerClosed:n,closeDrawer:a}=Ge();q(i,n,o=>s(0,t=o));function l(o){t=o,n.set(t)}return[t,r,n,a,l]}class Es extends me{constructor(e){super(),_e(this,e,Ts,Cs,pe,{})}}function tt(i,e,s){const t=i.slice();return t[2]=e[s],t}function st(i){let e,s,t=je(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=rt(tt(i,t,a));const n=a=>p(r[a],1,1,()=>{r[a]=null});return{c(){e=M("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=O(a,"DIV",{class:!0});var l=K(e);for(let o=0;o<r.length;o+=1)r[o].l(l);l.forEach(g),this.h()},h(){j(e,"class","flex flex-col space-y-8")},m(a,l){S(a,e,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);s=!0},p(a,l){if(l&1){t=je(a[0]);let o;for(o=0;o<t.length;o+=1){const u=tt(a,t,o);r[o]?(r[o].p(u,l),c(r[o],1)):(r[o]=rt(u),r[o].c(),c(r[o],1),r[o].m(e,null))}for(ue(),o=t.length;o<r.length;o+=1)n(o);de()}},i(a){if(!s){for(let l=0;l<t.length;l+=1)c(r[l]);s=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)p(r[l]);s=!1},d(a){a&&g(e),Dt(r,a)}}}function rt(i){let e,s,t,r;return s=new _s({props:{title:i[2].name,group_id:i[2].id}}),{c(){e=M("div"),w(s.$$.fragment),t=B(),this.h()},l(n){e=O(n,"DIV",{class:!0});var a=K(e);v(s.$$.fragment,a),t=z(a),a.forEach(g),this.h()},h(){j(e,"class","flex flex-col space-y-3")},m(n,a){S(n,e,a),k(s,e,null),I(e,t),r=!0},p(n,a){const l={};a&1&&(l.title=n[2].name),a&1&&(l.group_id=n[2].id),s.$set(l)},i(n){r||(c(s.$$.fragment,n),r=!0)},o(n){p(s.$$.fragment,n),r=!1},d(n){n&&g(e),y(s)}}}function As(i){let e,s,t,r=i[0]&&i[0].length>0&&st(i);return s=new Es({}),{c(){r&&r.c(),e=B(),w(s.$$.fragment)},l(n){r&&r.l(n),e=z(n),v(s.$$.fragment,n)},m(n,a){r&&r.m(n,a),S(n,e,a),k(s,n,a),t=!0},p(n,[a]){n[0]&&n[0].length>0?r?(r.p(n,a),a&1&&c(r,1)):(r=st(n),r.c(),c(r,1),r.m(e.parentNode,e)):r&&(ue(),p(r,1,1,()=>{r=null}),de())},i(n){t||(c(r),c(s.$$.fragment,n),t=!0)},o(n){p(r),p(s.$$.fragment,n),t=!1},d(n){n&&g(e),r&&r.d(n),y(s,n)}}}function Ns(i,e,s){let t;const{store:{permissionGroups:r}}=ye;return q(i,r,n=>s(0,t=n)),[t,r]}class Us extends me{constructor(e){super(),_e(this,e,Ns,As,pe,{})}}function Vs(i){let e,s;return e=new Nt({props:{title:"Permissions"}}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p:we,i(t){s||(c(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function qs(i){let e,s;return e=new Us({}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},i(t){s||(c(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function Gs(i){let e,s;return e=new ts({}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},i(t){s||(c(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function Rs(i){let e,s,t,r;return e=new ze({props:{open:i[0].permissions.open,title:"Permissions",$$slots:{default:[qs]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new ze({props:{open:i[0].groups.open,title:"Groups",$$slots:{default:[Gs]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){w(e.$$.fragment),s=B(),w(t.$$.fragment)},l(n){v(e.$$.fragment,n),s=z(n),v(t.$$.fragment,n)},m(n,a){k(e,n,a),S(n,s,a),k(t,n,a),r=!0},p(n,a){const l={};a&1&&(l.open=n[0].permissions.open),a&64&&(l.$$scope={dirty:a,ctx:n}),e.$set(l);const o={};a&1&&(o.open=n[0].groups.open),a&64&&(o.$$scope={dirty:a,ctx:n}),t.$set(o)},i(n){r||(c(e.$$.fragment,n),c(t.$$.fragment,n),r=!0)},o(n){p(e.$$.fragment,n),p(t.$$.fragment,n),r=!1},d(n){n&&g(s),y(e,n),y(t,n)}}}function Fs(i){let e,s;return e=new St({props:{style:"underline",contentClass:"py-4 px-0 rounded-lg mt-0",$$slots:{default:[Rs]},$$scope:{ctx:i}}}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,r){const n={};r&65&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(c(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function Ls(i){let e,s;return e=new At({props:{title:"Permissions",$$slots:{body:[Fs],header:[Vs]},$$scope:{ctx:i}}}),{c(){w(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){k(e,t,r),s=!0},p(t,[r]){const n={};r&65&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(c(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function Ms(i,e,s){let t;q(i,It,u=>s(4,t=u));let r={permissions:{open:!1},groups:{open:!1}};const n=u=>{t.url.searchParams.set("tab",u),Et(`?${t.url.searchParams.toString()}`)},a=u=>{switch(u==null?void 0:u.toLowerCase()){case"permissions":s(0,r.permissions.open=!0,r),s(0,r.groups.open=!1,r);break;case"groups":s(0,r.permissions.open=!1,r),s(0,r.groups.open=!0,r);break;default:s(0,r.permissions.open=!0,r),s(0,r.groups.open=!1,r);break}};return Pt(()=>{a(t.url.searchParams.get("tab")??null)}),[r,n,()=>n("permissions"),()=>n("groups")]}class rr extends me{constructor(e){super(),_e(this,e,Ms,Ls,pe,{})}}export{rr as component};
