import{s as z,I as L,U as K,f as k,a as V,l as M,g as C,w as H,c as j,h as B,m as N,d as _,j as x,i as E,y as w,z as O,a0 as Q,L as W,p as X,S as Y,H as Z}from"../chunks/scheduler.5ee162ca.js";import{S as G,i as J,b as I,d as P,m as A,a as F,t as q,e as D,h as ee}from"../chunks/index.56c32700.js";import{w as te}from"../chunks/index.d5413678.js";import{B as T}from"../chunks/Button.b6f667b3.js";import{f as ae,c as se,a as ne,L as re,T as le}from"../chunks/TextField.8c39e89a.js";import{a as oe}from"../chunks/auth.state.d295d359.js";import{A as ie}from"../chunks/AuthSection.3e7849da.js";import{g as ue}from"../chunks/navigation.3f5c1dae.js";import{A as me}from"../chunks/client.3f1dd265.js";function fe(s){var p,b,m;let e,a,t,n;function c(l){s[10](l)}let h={type:"email",name:"email",label:"Username",placeholder:"Email",disabled:s[1],isInvalid:((p=s[2])==null?void 0:p.email)!==void 0,helperMessage:(m=(b=s[2])==null?void 0:b.email)==null?void 0:m.message,novalidate:!0,required:!0};return s[0].email!==void 0&&(h.value=s[0].email),a=new le({props:h}),X.push(()=>ee(a,"value",c)),a.$on("input",s[8]),{c(){e=k("div"),I(a.$$.fragment),this.h()},l(l){e=C(l,"DIV",{class:!0});var i=B(e);P(a.$$.fragment,i),i.forEach(_),this.h()},h(){x(e,"class","space-y-2")},m(l,i){E(l,e,i),A(a,e,null),n=!0},p(l,i){var d,g,$;const f={};i&2&&(f.disabled=l[1]),i&4&&(f.isInvalid=((d=l[2])==null?void 0:d.email)!==void 0),i&4&&(f.helperMessage=($=(g=l[2])==null?void 0:g.email)==null?void 0:$.message),!t&&i&1&&(t=!0,f.value=l[0].email,Y(()=>t=!1)),a.$set(f)},i(l){n||(F(a.$$.fragment,l),n=!0)},o(l){q(a.$$.fragment,l),n=!1},d(l){l&&_(e),D(a)}}}function ce(s){let e;return{c(){e=M("Reset")},l(a){e=N(a,"Reset")},m(a,t){E(a,e,t)},d(a){a&&_(e)}}}function de(s){let e;return{c(){e=M("Submit")},l(a){e=N(a,"Submit")},m(a,t){E(a,e,t)},d(a){a&&_(e)}}}function $e(s){let e,a="Forgot Password",t,n,c,h,p,b,m,l="Sign up",i,f,d,g,$,y,R,o;return c=new re({props:{class:"space-y-2",$$slots:{default:[fe]},$$scope:{ctx:s}}}),d=new T({props:{type:"button",class:"mr-3",color:"alternative",disabled:s[1],$$slots:{default:[ce]},$$scope:{ctx:s}}}),d.$on("click",s[7]),$=new T({props:{type:"button",$$slots:{default:[de]},$$scope:{ctx:s}}}),$.$on("click",s[9]),{c(){e=k("h1"),e.textContent=a,t=V(),n=k("form"),I(c.$$.fragment),h=V(),p=k("div"),b=M("Not registered? "),m=k("a"),m.textContent=l,i=V(),f=k("div"),I(d.$$.fragment),g=V(),I($.$$.fragment),this.h()},l(r){e=C(r,"H1",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-i2x120"&&(e.textContent=a),t=j(r),n=C(r,"FORM",{class:!0});var u=B(n);P(c.$$.fragment,u),h=j(u),p=C(u,"DIV",{class:!0});var S=B(p);b=N(S,"Not registered? "),m=C(S,"A",{href:!0,class:!0,"data-svelte-h":!0}),H(m)!=="svelte-xwhabj"&&(m.textContent=l),S.forEach(_),i=j(u),f=C(u,"DIV",{class:!0});var v=B(f);P(d.$$.fragment,v),g=j(v),P($.$$.fragment,v),v.forEach(_),u.forEach(_),this.h()},h(){x(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),x(m,"href","/auth/sign-up"),x(m,"class","text-primary-700 hover:underline dark:text-primary-500"),x(p,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),x(f,"class","flex justify-end"),x(n,"class","space-y-4 md:space-y-6"),n.noValidate=!0},m(r,u){E(r,e,u),E(r,t,u),E(r,n,u),A(c,n,null),w(n,h),w(n,p),w(p,b),w(p,m),w(n,i),w(n,f),A(d,f,null),w(f,g),A($,f,null),y=!0,R||(o=[O(m,"click",s[7]),O(n,"submit",Q(s[9]))],R=!0)},p(r,u){const S={};u&32775&&(S.$$scope={dirty:u,ctx:r}),c.$set(S);const v={};u&2&&(v.disabled=r[1]),u&32768&&(v.$$scope={dirty:u,ctx:r}),d.$set(v);const U={};u&32768&&(U.$$scope={dirty:u,ctx:r}),$.$set(U)},i(r){y||(F(c.$$.fragment,r),F(d.$$.fragment,r),F($.$$.fragment,r),y=!0)},o(r){q(c.$$.fragment,r),q(d.$$.fragment,r),q($.$$.fragment,r),y=!1},d(r){r&&(_(e),_(t),_(n)),D(c),D(d),D($),R=!1,W(o)}}}function pe(s){let e,a;return e=new ie({props:{$$slots:{default:[$e]},$$scope:{ctx:s}}}),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){A(e,t,n),a=!0},p(t,[n]){const c={};n&32775&&(c.$$scope={dirty:n,ctx:t}),e.$set(c)},i(t){a||(F(e.$$.fragment,t),a=!0)},o(t){q(e.$$.fragment,t),a=!1},d(t){D(e,t)}}}function ge(s,e,a){let t,n,c,h;const{actions:{triggerResetPassword:p},store:{loading:b}}=oe;L(s,b,o=>a(1,c=o));const m=te({email:""});L(s,m,o=>a(0,t=o));const{errors:l,submitted:i,validate:f,reset:d}=ae(se({email:ne().required("Email is required").email("Email is not valid")}));L(s,l,o=>a(2,h=o)),L(s,i,o=>a(11,n=o));const g=()=>{m.set({email:""}),i.set(!1),d()},$=async()=>{if(!n)return;const{email:o}=t;await f({email:o})},y=async()=>{try{i.set(!0);const{email:o}=t;await f({email:o});const r=await p(o,`${me.APP_BASE_URL}/auth/update-password`);r!=null&&r.success&&(g(),await ue("/auth/sign-in"))}catch(o){console.log("submit failed",o)}};K(g);function R(o){s.$$.not_equal(t.email,o)&&(t.email=o,m.set(t))}return[t,c,h,b,m,l,i,g,$,y,R]}class _e extends G{constructor(e){super(),J(this,e,ge,pe,z,{})}}function he(s){let e,a;return e=new _e({}),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){A(e,t,n),a=!0},p:Z,i(t){a||(F(e.$$.fragment,t),a=!0)},o(t){q(e.$$.fragment,t),a=!1},d(t){D(e,t)}}}class Ie extends G{constructor(e){super(),J(this,e,null,he,z,{})}}export{Ie as component};
