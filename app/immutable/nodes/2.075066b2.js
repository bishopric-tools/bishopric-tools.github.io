import{s as st,o as ut}from"../chunks/scheduler.f5d5ad8b.js";import{S as ft,i as ht,g as be,s as we,r as ge,x as ct,h as ke,f as P,c as Ee,j as lt,u as Te,k as ae,A as xe,a as Q,v as Se,d as Oe,t as De,w as Ye,m as Ge,n as Xe}from"../chunks/index.ae74f566.js";import{s as dt,B as Me,a as yt}from"../chunks/auth.state.8347c9d0.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.063c4f60.js";import{g as _e}from"../chunks/navigation.c1d3677a.js";const pt=!0,Sr=Object.freeze(Object.defineProperty({__proto__:null,prerender:pt},Symbol.toStringTag,{value:"Module"}));async function mt(r){try{const{data:e,error:t}=await dt.from("financial_transaction_schedules").insert(r).select();return t?(console.error(t),Promise.reject("Create failed")):(console.log("Create success",e),Promise.resolve())}catch(e){return console.error(e),Promise.reject("Create failed")}}var se=["MO","TU","WE","TH","FR","SA","SU"],D=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(se.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=se[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}(),T=function(r){return r!=null},A=function(r){return typeof r=="number"},Ue=function(r){return typeof r=="string"&&se.includes(r)},Y=Array.isArray,I=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t},w=function(r,e){var t=0,n=[];if(Y(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},vt=function(r){return Y(r)?r:[r]};function K(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=w(t,e/t.length)),t.slice(0,e)+String(n))}var bt=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},_=function(r,e){var t=r%e;return t*e<0?t+e:t},ie=function(r,e){return{div:Math.floor(r/e),mod:_(r,e)}},N=function(r){return!T(r)||r.length===0},x=function(r){return!N(r)},k=function(r,e){return x(r)&&r.indexOf(e)!==-1},$=function(r,e,t,n,a,i){return n===void 0&&(n=0),a===void 0&&(a=0),i===void 0&&(i=0),new Date(Date.UTC(r,e-1,t,n,a,i))},wt=[31,28,31,30,31,30,31,31,30,31,30,31],Je=1e3*60*60*24,Qe=9999,Ve=$(1970,1,1),gt=[6,0,1,2,3,4,5],X=function(r){return r%4===0&&r%100!==0||r%400===0},et=function(r){return r instanceof Date},G=function(r){return et(r)&&!isNaN(r.getTime())},Le=function(r){return r.getTimezoneOffset()*60*1e3},kt=function(r,e){var t=r.getTime()-Le(r),n=e.getTime()-Le(e),a=t-n;return Math.round(a/Je)},ue=function(r){return kt(r,Ve)},tt=function(r){return new Date(Ve.getTime()+r*Je)},Et=function(r){var e=r.getUTCMonth();return e===1&&X(r.getUTCFullYear())?29:wt[e]},F=function(r){return gt[r.getUTCDay()]},Ae=function(r,e){var t=$(r,e+1,1);return[F(t),Et(t)]},rt=function(r,e){return e=e||r,new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},fe=function(r){var e=new Date(r.getTime());return e},Ne=function(r){for(var e=[],t=0;t<r.length;t++)e.push(fe(r[t]));return e},J=function(r){r.sort(function(e,t){return e.getTime()-t.getTime()})},de=function(r,e){e===void 0&&(e=!0);var t=new Date(r);return[K(t.getUTCFullYear().toString(),4,"0"),K(t.getUTCMonth()+1,2,"0"),K(t.getUTCDate(),2,"0"),"T",K(t.getUTCHours(),2,"0"),K(t.getUTCMinutes(),2,"0"),K(t.getUTCSeconds(),2,"0"),e?"Z":""].join("")},ye=function(r){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,t=e.exec(r);if(!t)throw new Error("Invalid UNTIL value: ".concat(r));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},Ie=function(r,e){var t=r.toLocaleString("sv-SE",{timeZone:e});return t.replace(" ","T")+"Z"},Tt=function(r,e){var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(Ie(r,t)),a=new Date(Ie(r,e??"UTC")),i=a.getTime()-n.getTime();return new Date(r.getTime()-i)},q=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),he=function(r,e){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},he(r,e)};function pe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");he(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var M=function(){return M=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},M.apply(this,arguments)};function h(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}var Re=function(r){pe(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.iterator=a,i}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(q),V={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Ce=function(r,e){return r.indexOf(e)!==-1},xt=function(r){return r.toString()},St=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},C=function(){function r(e,t,n,a){if(t===void 0&&(t=xt),n===void 0&&(n=V),a===void 0&&(a=St),this.text=[],this.language=n||V,this.gettext=t,this.dateFormatter=a,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var i=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);i.sort(function(l,y){return l-y}),s.sort(function(l,y){return y-l}),this.bymonthday=i.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(T(this.origOptions.byweekday)){var u=Y(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],o=String(u);this.byweekday={allWeeks:u.filter(function(l){return!l.n}),someWeeks:u.filter(function(l){return!!l.n}),isWeekdays:o.indexOf("MO")!==-1&&o.indexOf("TU")!==-1&&o.indexOf("WE")!==-1&&o.indexOf("TH")!==-1&&o.indexOf("FR")!==-1&&o.indexOf("SA")===-1&&o.indexOf("SU")===-1,isEveryDay:o.indexOf("MO")!==-1&&o.indexOf("TU")!==-1&&o.indexOf("WE")!==-1&&o.indexOf("TH")!==-1&&o.indexOf("FR")!==-1&&o.indexOf("SA")!==-1&&o.indexOf("SU")!==-1};var f=function(l,y){return l.weekday-y.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(Ce(["dtstart","wkst","freq"],n))return!0;if(!Ce(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[p.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var a=Math.abs(e);switch(a){case 1:case 21:case 31:t=a+n("st");break;case 2:case 22:t=a+n("nd");break;case 3:case 23:t=a+n("rd");break;default:t=a+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=A(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,a){var i=this;a===void 0&&(a=","),Y(e)||(e=[e]);var s=function(o,f,l){for(var y="",c=0;c<o.length;c++)c!==0&&(c===o.length-1?y+=" "+l+" ":y+=f+" "),y+=o[c];return y};t=t||function(o){return o.toString()};var u=function(o){return t&&t.call(i,o)};return n?s(e.map(u),a,n):e.map(u).join(a+" ")},r}(),Ot=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var a in this.rules){n=this.rules[a];var i=n.exec(this.text);i&&(e===null||i[0].length>e[0].length)&&(e=i,t=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function nt(r,e){e===void 0&&(e=V);var t={},n=new Ot(e.tokens);if(!n.start(r))return null;return a(),t;function a(){n.expect("every");var c=n.acceptNumber();if(c&&(t.interval=parseInt(c[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=p.DAILY,n.nextSymbol()&&(s(),y());break;case"weekday(s)":t.freq=p.WEEKLY,t.byweekday=[p.MO,p.TU,p.WE,p.TH,p.FR],n.nextSymbol(),y();break;case"week(s)":t.freq=p.WEEKLY,n.nextSymbol()&&(i(),y());break;case"hour(s)":t.freq=p.HOURLY,n.nextSymbol()&&(i(),y());break;case"minute(s)":t.freq=p.MINUTELY,n.nextSymbol()&&(i(),y());break;case"month(s)":t.freq=p.MONTHLY,n.nextSymbol()&&(i(),y());break;case"year(s)":t.freq=p.YEARLY,n.nextSymbol()&&(i(),y());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=p.WEEKLY;var d=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[p[d]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(p[m]),n.nextSymbol()}l(),y();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=p.YEARLY,t.bymonth=[u()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var g=u();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(g),n.nextSymbol()}i(),y();break;default:throw new Error("Unknown symbol")}}function i(){var c=n.accept("on"),d=n.accept("the");if(c||d)do{var m=f(),g=o(),b=u();if(m)g?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(p[g].nth(m))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(m),n.accept("day(s)"));else if(g)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(p[g]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[p.MO,p.TU,p.WE,p.TH,p.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var E=n.acceptNumber();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(E[0],10)];n.accept("comma");){if(E=n.acceptNumber(),!E)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(E[0],10))}}else if(b)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(b);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var c=n.accept("at");if(c)do{var d=n.acceptNumber();if(!d)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(d[0],10)];n.accept("comma");){if(d=n.acceptNumber(),!d)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(d[0],10))}}while(n.accept("comma")||n.accept("at"))}function u(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function o(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var c=parseInt(n.value[1],10);if(c<-366||c>366)throw new Error("Nth out of range: "+c);return n.nextSymbol(),n.accept("last")?-c:c;default:return!1}}function l(){n.accept("on"),n.accept("the");var c=f();if(c)for(t.bymonthday=[c],n.nextSymbol();n.accept("comma");){if(c=f(),!c)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(c),n.nextSymbol()}}function y(){if(n.symbol==="until"){var c=Date.parse(n.text);if(!c)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(c)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var v;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(v||(v={}));function me(r){return r<v.HOURLY}var Dt=function(r,e){return e===void 0&&(e=V),new p(nt(r,e)||void 0)},B=["count","until","interval","byweekday","bymonthday","bymonth"];C.IMPLEMENTED=[];C.IMPLEMENTED[v.HOURLY]=B;C.IMPLEMENTED[v.MINUTELY]=B;C.IMPLEMENTED[v.DAILY]=["byhour"].concat(B);C.IMPLEMENTED[v.WEEKLY]=B;C.IMPLEMENTED[v.MONTHLY]=B;C.IMPLEMENTED[v.YEARLY]=["byweekno","byyearday"].concat(B);var Yt=function(r,e,t,n){return new C(r,e,t,n).toString()},Mt=C.isFullyConvertible,ee=function(){function r(e,t,n,a){this.hour=e,this.minute=t,this.second=n,this.millisecond=a||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}(),_t=function(r){pe(e,r);function e(t,n,a,i,s,u,o){var f=r.call(this,i,s,u,o)||this;return f.year=t,f.month=n,f.day=a,f}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return F(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),a=_(this.month,12);this.month=a,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,a){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var i=ie(this.hour,24),s=i.div,u=i.mod;if(s&&(this.hour=u,this.addDaily(s)),N(a)||k(a,this.hour))break}},e.prototype.addMinutes=function(t,n,a,i){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var s=ie(this.minute,60),u=s.div,o=s.mod;if(u&&(this.minute=o,this.addHours(u,!1,a)),(N(a)||k(a,this.hour))&&(N(i)||k(i,this.minute)))break}},e.prototype.addSeconds=function(t,n,a,i,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var u=ie(this.second,60),o=u.div,f=u.mod;if(o&&(this.second=f,this.addMinutes(o,!1,a,i)),(N(a)||k(a,this.hour))&&(N(i)||k(i,this.minute))&&(N(s)||k(s,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=Ae(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Qe))return;t=Ae(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var a=t.freq,i=t.interval,s=t.wkst,u=t.byhour,o=t.byminute,f=t.bysecond;switch(a){case v.YEARLY:return this.addYears(i);case v.MONTHLY:return this.addMonths(i);case v.WEEKLY:return this.addWeekly(i,s);case v.DAILY:return this.addDaily(i);case v.HOURLY:return this.addHours(i,n,u);case v.MINUTELY:return this.addMinutes(i,n,u,o);case v.SECONDLY:return this.addSeconds(i,n,u,o,f)}},e}(ee);function at(r){for(var e=[],t=Object.keys(r),n=0,a=t;n<a.length;n++){var i=a[n];k(or,i)||e.push(i),et(r[i])&&!G(r[i])&&e.push(i)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return M({},r)}function Ut(r){var e=M(M({},ve),at(r));if(T(e.byeaster)&&(e.freq=p.YEARLY),!(T(e.freq)&&p.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),T(e.wkst)?A(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=p.MO.weekday,T(e.bysetpos)){A(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||x(e.byweekno)||x(e.byyearday)||e.bymonthday||x(e.bymonthday)||T(e.byweekday)||T(e.byeaster)))switch(e.freq){case p.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case p.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case p.WEEKLY:e.byweekday=[F(e.dtstart)];break}if(T(e.bymonth)&&!Y(e.bymonth)&&(e.bymonth=[e.bymonth]),T(e.byyearday)&&!Y(e.byyearday)&&A(e.byyearday)&&(e.byyearday=[e.byyearday]),!T(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Y(e.bymonthday)){for(var a=[],i=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?a.push(n):n<0&&i.push(n)}e.bymonthday=a,e.bynmonthday=i}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(T(e.byweekno)&&!Y(e.byweekno)&&(e.byweekno=[e.byweekno]),!T(e.byweekday))e.bynweekday=null;else if(A(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Ue(e.byweekday))e.byweekday=[D.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof D)!e.byweekday.n||e.freq>p.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var s=[],u=[],t=0;t<e.byweekday.length;t++){var o=e.byweekday[t];if(A(o)){s.push(o);continue}else if(Ue(o)){s.push(D.fromStr(o).weekday);continue}!o.n||e.freq>p.MONTHLY?s.push(o.weekday):u.push([o.weekday,o.n])}e.byweekday=x(s)?s:null,e.bynweekday=x(u)?u:null}return T(e.byhour)?A(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<p.HOURLY?[e.dtstart.getUTCHours()]:null,T(e.byminute)?A(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<p.MINUTELY?[e.dtstart.getUTCMinutes()]:null,T(e.bysecond)?A(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<p.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Lt(r){var e=r.dtstart.getTime()%1e3;if(!me(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(a){r.bysecond.forEach(function(i){t.push(new ee(n,a,i,e))})})}),t}function ce(r){var e=r.split(`
`).map(At).filter(function(t){return t!==null});return M(M({},e[0]),e[1])}function te(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],a=t[2];return n&&(e.tzid=n),e.dtstart=ye(a),e}function At(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return We(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return We(r);case"DTSTART":return te(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function We(r){var e=r.replace(/^RRULE:/i,""),t=te(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(a){var i=a.split("="),s=i[0],u=i[1];switch(s.toUpperCase()){case"FREQ":t.freq=v[u.toUpperCase()];break;case"WKST":t.wkst=L[u.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var o=Nt(u),f=s.toLowerCase();t[f]=o;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=It(u);break;case"DTSTART":case"TZID":var l=te(r);t.tzid=l.tzid,t.dtstart=l.dtstart;break;case"UNTIL":t.until=ye(u);break;case"BYEASTER":t.byeaster=Number(u);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),t}function Nt(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(He)}return He(r)}function He(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function It(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return L[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var a=Number(n[1]),i=n[2],s=L[i].weekday;return new D(s,a)})}var re=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=de(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){return this.isUTC?this.date:Tt(this.date,this.tzid)},r}();function le(r){for(var e=[],t="",n=Object.keys(r),a=Object.keys(ve),i=0;i<n.length;i++)if(n[i]!=="tzid"&&k(a,n[i])){var s=n[i].toUpperCase(),u=r[n[i]],o="";if(!(!T(u)||Y(u)&&!u.length)){switch(s){case"FREQ":o=p.FREQUENCIES[r.freq];break;case"WKST":A(u)?o=new D(u).toString():o=u.toString();break;case"BYWEEKDAY":s="BYDAY",o=vt(u).map(function(d){return d instanceof D?d:Y(d)?new D(d[0],d[1]):new D(d)}).toString();break;case"DTSTART":t=Rt(u,r.tzid);break;case"UNTIL":o=de(u,!r.tzid);break;default:if(Y(u)){for(var f=[],l=0;l<u.length;l++)f[l]=String(u[l]);o=f.toString()}else o=String(u)}o&&e.push([s,o])}}var y=e.map(function(d){var m=d[0],g=d[1];return"".concat(m,"=").concat(g.toString())}).join(";"),c="";return y!==""&&(c="RRULE:".concat(y)),[t,c].filter(function(d){return!!d}).join(`
`)}function Rt(r,e){return r?"DTSTART"+new re(new Date(r),e).toString():""}function Ct(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var Wt=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?fe(t):Ne(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,a=t?Object.keys(t):[],i=function(l){for(var y=0;y<a.length;y++){var c=a[y];if(!Ct(t[c],l[c]))return!0}return!1},s=this[e];if(e==="all")n=this.all;else if(Y(s))for(var u=0;u<s.length;u++){var o=s[u];if(!(a.length&&i(o))){n=o._value;break}}if(!n&&this.all){for(var f=new q(e,t),u=0;u<this.all.length&&f.accept(this.all[u]);u++);n=f.getValue(),this._cacheAdd(e,n,t)}return Y(n)?Ne(n):n instanceof Date?fe(n):n},r}(),Ht=h(h(h(h(h(h(h(h(h(h(h(h(h([],w(1,31),!0),w(2,28),!0),w(3,31),!0),w(4,30),!0),w(5,31),!0),w(6,30),!0),w(7,31),!0),w(8,31),!0),w(9,30),!0),w(10,31),!0),w(11,30),!0),w(12,31),!0),w(1,7),!0),jt=h(h(h(h(h(h(h(h(h(h(h(h(h([],w(1,31),!0),w(2,29),!0),w(3,31),!0),w(4,30),!0),w(5,31),!0),w(6,30),!0),w(7,31),!0),w(8,31),!0),w(9,30),!0),w(10,31),!0),w(11,30),!0),w(12,31),!0),w(1,7),!0),Pt=I(1,29),$t=I(1,30),W=I(1,31),S=I(1,32),zt=h(h(h(h(h(h(h(h(h(h(h(h(h([],S,!0),$t,!0),S,!0),W,!0),S,!0),W,!0),S,!0),S,!0),W,!0),S,!0),W,!0),S,!0),S.slice(0,7),!0),Kt=h(h(h(h(h(h(h(h(h(h(h(h(h([],S,!0),Pt,!0),S,!0),W,!0),S,!0),W,!0),S,!0),S,!0),W,!0),S,!0),W,!0),S,!0),S.slice(0,7),!0),qt=I(-28,0),Ft=I(-29,0),H=I(-30,0),O=I(-31,0),Bt=h(h(h(h(h(h(h(h(h(h(h(h(h([],O,!0),Ft,!0),O,!0),H,!0),O,!0),H,!0),O,!0),O,!0),H,!0),O,!0),H,!0),O,!0),O.slice(0,7),!0),Zt=h(h(h(h(h(h(h(h(h(h(h(h(h([],O,!0),qt,!0),O,!0),H,!0),O,!0),H,!0),O,!0),O,!0),H,!0),O,!0),H,!0),O,!0),O.slice(0,7),!0),Gt=[0,31,60,91,121,152,182,213,244,274,305,335,366],Xt=[0,31,59,90,120,151,181,212,243,273,304,334,365],je=function(){for(var r=[],e=0;e<55;e++)r=r.concat(I(7));return r}();function Jt(r,e){var t=$(r,1,1),n=X(r)?366:365,a=X(r+1)?366:365,i=ue(t),s=F(t),u=M(M({yearlen:n,nextyearlen:a,yearordinal:i,yearweekday:s},Qt(r)),{wnomask:null});if(N(e.byweekno))return u;u.wnomask=w(0,n+7);var o,f,l=o=_(7-s+e.wkst,7);l>=4?(l=0,f=u.yearlen+_(s-e.wkst,7)):f=n-l;for(var y=Math.floor(f/7),c=_(f,7),d=Math.floor(y+c/4),m=0;m<e.byweekno.length;m++){var g=e.byweekno[m];if(g<0&&(g+=d+1),g>0&&g<=d){var b=void 0;g>1?(b=l+(g-1)*7,l!==o&&(b-=7-o)):b=l;for(var E=0;E<7&&(u.wnomask[b]=1,b++,u.wdaymask[b]!==e.wkst);E++);}}if(k(e.byweekno,1)){var b=l+d*7;if(l!==o&&(b-=7-o),b<n)for(var m=0;m<7&&(u.wnomask[b]=1,b+=1,u.wdaymask[b]!==e.wkst);m++);}if(l){var U=void 0;if(k(e.byweekno,-1))U=-1;else{var z=F($(r-1,1,1)),Z=_(7-z.valueOf()+e.wkst,7),ne=X(r-1)?366:365,j=void 0;Z>=4?(Z=0,j=ne+_(z-e.wkst,7)):j=n-l,U=Math.floor(52+_(j,7)/4)}if(k(e.byweekno,U))for(var b=0;b<l;b++)u.wnomask[b]=1}return u}function Qt(r){var e=X(r)?366:365,t=$(r,1,1),n=F(t);return e===365?{mmask:Ht,mdaymask:Kt,nmdaymask:Zt,wdaymask:je.slice(n),mrange:Xt}:{mmask:jt,mdaymask:zt,nmdaymask:Bt,wdaymask:je.slice(n),mrange:Gt}}function Vt(r,e,t,n,a,i){var s={lastyear:r,lastmonth:e,nwdaymask:[]},u=[];if(i.freq===p.YEARLY)if(N(i.bymonth))u=[[0,t]];else for(var o=0;o<i.bymonth.length;o++)e=i.bymonth[o],u.push(n.slice(e-1,e+1));else i.freq===p.MONTHLY&&(u=[n.slice(e-1,e+1)]);if(N(u))return s;s.nwdaymask=w(0,t);for(var o=0;o<u.length;o++)for(var f=u[o],l=f[0],y=f[1]-1,c=0;c<i.bynweekday.length;c++){var d=void 0,m=i.bynweekday[c],g=m[0],b=m[1];b<0?(d=y+(b+1)*7,d-=_(a[d]-g,7)):(d=l+(b-1)*7,d+=_(7-a[d]+g,7)),l<=d&&d<=y&&(s.nwdaymask[d]=1)}return s}function er(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),a=r%100,i=Math.floor(n/4),s=n%4,u=Math.floor((n+8)/25),o=Math.floor((n-u+1)/3),f=Math.floor(19*t+n-i-o+15)%30,l=Math.floor(a/4),y=a%4,c=Math.floor(32+2*s+2*l-f-y)%7,d=Math.floor((t+11*f+22*c)/451),m=Math.floor((f+c-7*d+114)/31),g=(f+c-7*d+114)%31+1,b=Date.UTC(r,m-1,g+e),E=Date.UTC(r,0,1);return[Math.ceil((b-E)/(1e3*60*60*24))]}var tr=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Jt(e,n)),x(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var a=this.yearinfo,i=a.yearlen,s=a.mrange,u=a.wdaymask;this.monthinfo=Vt(e,t,i,s,u,n)}T(n.byeaster)&&(this.eastermask=er(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[I(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],a=this.mrange[t],i=w(null,this.yearlen),s=n;s<a;s++)i[s]=s;return[i,n,a]},r.prototype.wdayset=function(e,t,n){for(var a=w(null,this.yearlen+7),i=ue($(e,t,n))-this.yearordinal,s=i,u=0;u<7&&(a[i]=i,++i,this.wdaymask[i]!==this.options.wkst);u++);return[a,s,i]},r.prototype.ddayset=function(e,t,n){var a=w(null,this.yearlen),i=ue($(e,t,n))-this.yearordinal;return a[i]=i,[a,i,i+1]},r.prototype.htimeset=function(e,t,n,a){var i=this,s=[];return this.options.byminute.forEach(function(u){s=s.concat(i.mtimeset(e,u,n,a))}),J(s),s},r.prototype.mtimeset=function(e,t,n,a){var i=this.options.bysecond.map(function(s){return new ee(e,t,s,a)});return J(i),i},r.prototype.stimeset=function(e,t,n,a){return[new ee(e,t,n,a)]},r.prototype.getdayset=function(e){switch(e){case v.YEARLY:return this.ydayset.bind(this);case v.MONTHLY:return this.mdayset.bind(this);case v.WEEKLY:return this.wdayset.bind(this);case v.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case v.HOURLY:return this.htimeset.bind(this);case v.MINUTELY:return this.mtimeset.bind(this);case v.SECONDLY:return this.stimeset.bind(this)}},r}();function rr(r,e,t,n,a,i){for(var s=[],u=0;u<r.length;u++){var o=void 0,f=void 0,l=r[u];l<0?(o=Math.floor(l/e.length),f=_(l,e.length)):(o=Math.floor((l-1)/e.length),f=_(l-1,e.length));for(var y=[],c=t;c<n;c++){var d=i[c];T(d)&&y.push(d)}var m=void 0;o<0?m=y.slice(o)[0]:m=y[o];var g=e[f],b=tt(a.yearordinal+m),E=rt(b,g);k(s,E)||s.push(E)}return J(s),s}function it(r,e){var t=e.dtstart,n=e.freq,a=e.interval,i=e.until,s=e.bysetpos,u=e.count;if(u===0||a===0)return R(r);var o=_t.fromDate(t),f=new tr(e);f.rebuild(o.year,o.month);for(var l=ir(f,o,e);;){var y=f.getdayset(n)(o.year,o.month,o.day),c=y[0],d=y[1],m=y[2],g=ar(c,d,m,f,e);if(x(s))for(var b=rr(s,l,d,m,f,c),E=0;E<b.length;E++){var U=b[E];if(i&&U>i)return R(r);if(U>=t){var z=Pe(U,e);if(!r.accept(z)||u&&(--u,!u))return R(r)}}else for(var E=d;E<m;E++){var Z=c[E];if(T(Z))for(var ne=tt(f.yearordinal+Z),j=0;j<l.length;j++){var ot=l[j],U=rt(ne,ot);if(i&&U>i)return R(r);if(U>=t){var z=Pe(U,e);if(!r.accept(z)||u&&(--u,!u))return R(r)}}}if(e.interval===0||(o.add(e,g),o.year>Qe))return R(r);me(n)||(l=f.gettimeset(n)(o.hour,o.minute,o.second,0)),f.rebuild(o.year,o.month)}}function nr(r,e,t){var n=t.bymonth,a=t.byweekno,i=t.byweekday,s=t.byeaster,u=t.bymonthday,o=t.bynmonthday,f=t.byyearday;return x(n)&&!k(n,r.mmask[e])||x(a)&&!r.wnomask[e]||x(i)&&!k(i,r.wdaymask[e])||x(r.nwdaymask)&&!r.nwdaymask[e]||s!==null&&!k(r.eastermask,e)||(x(u)||x(o))&&!k(u,r.mdaymask[e])&&!k(o,r.nmdaymask[e])||x(f)&&(e<r.yearlen&&!k(f,e+1)&&!k(f,-r.yearlen+e)||e>=r.yearlen&&!k(f,e+1-r.yearlen)&&!k(f,-r.nextyearlen+e-r.yearlen))}function Pe(r,e){return new re(r,e.tzid).rezonedDate()}function R(r){return r.getValue()}function ar(r,e,t,n,a){for(var i=!1,s=e;s<t;s++){var u=r[s];i=nr(n,u,a),i&&(r[u]=null)}return i}function ir(r,e,t){var n=t.freq,a=t.byhour,i=t.byminute,s=t.bysecond;return me(n)?Lt(t):n>=p.HOURLY&&x(a)&&!k(a,e.hour)||n>=p.MINUTELY&&x(i)&&!k(i,e.minute)||n>=p.SECONDLY&&x(s)&&!k(s,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var L={MO:new D(0),TU:new D(1),WE:new D(2),TH:new D(3),FR:new D(4),SA:new D(5),SU:new D(6)},ve={freq:v.YEARLY,dtstart:null,interval:1,wkst:L.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},or=Object.keys(ve),p=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new Wt,this.origOptions=at(e);var n=Ut(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return nt(e,t)},r.fromText=function(e,t){return Dt(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return it(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new Re("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new q("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,a){if(n===void 0&&(n=!1),!G(e)||!G(t))throw new Error("Invalid date passed in to RRule.between");var i={before:t,after:e,inc:n};if(a)return this._iter(new Re("between",i,a));var s=this._cacheGet("between",i);return s===!1&&(s=this._iter(new q("between",i)),this._cacheAdd("between",s,i)),s},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!G(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},a=this._cacheGet("before",n);return a===!1&&(a=this._iter(new q("before",n)),this._cacheAdd("before",a,n)),a},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!G(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},a=this._cacheGet("after",n);return a===!1&&(a=this._iter(new q("after",n)),this._cacheAdd("after",a,n)),a},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return le(this.origOptions)},r.prototype.toText=function(e,t,n){return Yt(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Mt(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=v.YEARLY,r.MONTHLY=v.MONTHLY,r.WEEKLY=v.WEEKLY,r.DAILY=v.DAILY,r.HOURLY=v.HOURLY,r.MINUTELY=v.MINUTELY,r.SECONDLY=v.SECONDLY,r.MO=L.MO,r.TU=L.TU,r.WE=L.WE,r.TH=L.TH,r.FR=L.FR,r.SA=L.SA,r.SU=L.SU,r.parseString=ce,r.optionsToString=le,r}();function sr(r,e,t,n,a,i){var s={},u=r.accept;function o(c,d){t.forEach(function(m){m.between(c,d,!0).forEach(function(g){s[Number(g)]=!0})})}a.forEach(function(c){var d=new re(c,i).rezonedDate();s[Number(d)]=!0}),r.accept=function(c){var d=Number(c);return isNaN(d)?u.call(this,c):!s[d]&&(o(new Date(d-1),new Date(d+1)),!s[d])?(s[d]=!0,u.call(this,c)):!0},r.method==="between"&&(o(r.args.after,r.args.before),r.accept=function(c){var d=Number(c);return s[d]?!0:(s[d]=!0,u.call(this,c))});for(var f=0;f<n.length;f++){var l=new re(n[f],i).rezonedDate();if(!r.accept(new Date(l.getTime())))break}e.forEach(function(c){it(r,c.options)});var y=r._result;switch(J(y),r.method){case"all":case"between":return y;case"before":return y.length&&y[y.length-1]||null;case"after":default:return y.length&&y[0]||null}}var $e={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function ur(r,e){var t=[],n=[],a=[],i=[],s=te(r),u=s.dtstart,o=s.tzid,f=dr(r,e.unfold);return f.forEach(function(l){var y;if(l){var c=lr(l),d=c.name,m=c.parms,g=c.value;switch(d.toUpperCase()){case"RRULE":if(m.length)throw new Error("unsupported RRULE parm: ".concat(m.join(",")));t.push(ce(l));break;case"RDATE":var b=(y=/RDATE(?:;TZID=([^:=]+))?/i.exec(l))!==null&&y!==void 0?y:[],E=b[1];E&&!o&&(o=E),n=n.concat(Ke(g,m));break;case"EXRULE":if(m.length)throw new Error("unsupported EXRULE parm: ".concat(m.join(",")));a.push(ce(g));break;case"EXDATE":i=i.concat(Ke(g,m));break;case"DTSTART":break;default:throw new Error("unsupported property: "+d)}}}),{dtstart:u,tzid:o,rrulevals:t,rdatevals:n,exrulevals:a,exdatevals:i}}function fr(r,e){var t=ur(r,e),n=t.rrulevals,a=t.rdatevals,i=t.exrulevals,s=t.exdatevals,u=t.dtstart,o=t.tzid,f=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||a.length||i.length||s.length){var l=new pr(f);return l.dtstart(u),l.tzid(o||void 0),n.forEach(function(c){l.rrule(new p(oe(c,u,o),f))}),a.forEach(function(c){l.rdate(c)}),i.forEach(function(c){l.exrule(new p(oe(c,u,o),f))}),s.forEach(function(c){l.exdate(c)}),e.compatible&&e.dtstart&&l.rdate(u),l}var y=n[0]||{};return new p(oe(y,y.dtstart||e.dtstart||u,y.tzid||e.tzid||o),f)}function ze(r,e){return e===void 0&&(e={}),fr(r,hr(e))}function oe(r,e,t){return M(M({},r),{dtstart:e,tzid:t})}function hr(r){var e=[],t=Object.keys(r),n=Object.keys($e);if(t.forEach(function(a){k(n,a)||e.push(a)}),e.length)throw new Error("Invalid options: "+e.join(", "));return M(M({},$e),r)}function cr(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=bt(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function lr(r){var e=cr(r),t=e.name,n=e.value,a=t.split(";");if(!a)throw new Error("empty property name");return{name:a[0].toUpperCase(),parms:a.slice(1),value:n}}function dr(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var a=t[n]=t[n].replace(/\s+$/g,"");a?n>0&&a[0]===" "?(t[n-1]+=a.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function yr(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Ke(r,e){return yr(e),r.split(",").map(function(t){return ye(t)})}function qe(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var a=e._rrule[n].origOptions[r];if(a)return a}}}var pr=function(r){pe(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=qe.apply(n,["dtstart"]),n.tzid=qe.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return sr(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){Fe(t,this._rrule)},e.prototype.exrule=function(t){Fe(t,this._exrule)},e.prototype.rdate=function(t){Be(t,this._rdate)},e.prototype.exdate=function(t){Be(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ze(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ze(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(le({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(a){return a.replace(/^RRULE:/,"EXRULE:")}).filter(function(a){return!/^DTSTART/.test(a)}))}),this._rdate.length&&t.push(Ze("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(Ze("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(p);function Fe(r,e){if(!(r instanceof p))throw new TypeError(String(r)+" is not RRule instance");k(e.map(String),String(r))||e.push(r)}function Be(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");k(e.map(Number),Number(r))||(e.push(r),J(e))}function Ze(r,e,t){var n=!t||t.toUpperCase()==="UTC",a=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),i=e.map(function(s){return de(s.valueOf(),n)}).join(",");return"".concat(a).concat(i)}function mr(r){let e;return{c(){e=Ge("Sign Out")},l(t){e=Xe(t,"Sign Out")},m(t,n){Q(t,e,n)},d(t){t&&P(e)}}}function vr(r){let e;return{c(){e=Ge("Create")},l(t){e=Xe(t,"Create")},m(t,n){Q(t,e,n)},d(t){t&&P(e)}}}function br(r){let e,t,n,a,i,s,u;return a=new Me({props:{$$slots:{default:[mr]},$$scope:{ctx:r}}}),a.$on("click",r[0]),s=new Me({props:{$$slots:{default:[vr]},$$scope:{ctx:r}}}),s.$on("click",r[1]),{c(){e=be("meta"),t=we(),n=be("div"),ge(a.$$.fragment),i=we(),ge(s.$$.fragment),this.h()},l(o){const f=ct("svelte-iah7er",document.head);e=ke(f,"META",{name:!0,content:!0}),f.forEach(P),t=Ee(o),n=ke(o,"DIV",{class:!0});var l=lt(n);Te(a.$$.fragment,l),i=Ee(l),Te(s.$$.fragment,l),l.forEach(P),this.h()},h(){document.title="Home",ae(e,"name","description"),ae(e,"content","Home description here"),ae(n,"class","text-column")},m(o,f){xe(document.head,e),Q(o,t,f),Q(o,n,f),Se(a,n,null),xe(n,i),Se(s,n,null),u=!0},p(o,[f]){const l={};f&16&&(l.$$scope={dirty:f,ctx:o}),a.$set(l);const y={};f&16&&(y.$$scope={dirty:f,ctx:o}),s.$set(y)},i(o){u||(Oe(a.$$.fragment,o),Oe(s.$$.fragment,o),u=!0)},o(o){De(a.$$.fragment,o),De(s.$$.fragment,o),u=!1},d(o){o&&(P(t),P(n)),P(e),Ye(a),Ye(s)}}}function wr(r){const{actions:{signOut:e,isAuthenticated:t}}=yt,n=async()=>{await e(),await _e("/auth/sign-in")};return ut(async()=>{await t()||await _e("/auth/sign-in")}),[n,async()=>{const i=[],s=new Date().toISOString();i.push({name:"grocery",type:"expense",repeats:JSON.stringify({freq:v.WEEKLY,dtstart:s,interval:1,count:5}),amount:200,active:!0,updated_at:s,created_at:s}),await mt(i)}]}class Or extends ft{constructor(e){super(),ht(this,e,wr,br,st,{})}}export{Or as component,Sr as universal};
