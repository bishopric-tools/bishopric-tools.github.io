import{N as Ce,s as ke,M as X,o as qe,O as Me,p as _e,f as k,a as N,l as K,g as I,w as Y,c as F,h as z,d as p,m as L,j as $,i as T,y as m,z as Z,P as Pe,Q as $e,J as Te,e as he,I as Ve}from"../chunks/scheduler.4ff403ce.js";import{S as Ie,i as Se,b as j,d as B,m as O,a as U,t as G,e as H,f as ve}from"../chunks/index.e99c29cb.js";import{g as we,B as Ae,a as De}from"../chunks/navigation.16604d7a.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.063c4f60.js";import{T as Ne}from"../chunks/Toggle.568b4b21.js";import{c as Fe,a as be,A as ze,T as ye}from"../chunks/TextField.21ca9009.js";import{w as ee}from"../chunks/singletons.2db2962d.js";const je=()=>{const s=Fe({email:be().required("Email is required").email("Email is not valid"),password:be().required("Password is required")}),e=ee({email:"",password:""}),a=ee({}),n=ee([]);return{store:{schema:s,model:e,errors:a,touched:n},actions:{reset:()=>{e.set({email:"",password:""})},destroy:()=>{console.log("destroy called")},validate:async(S,E)=>{a.set({});try{console.log("validate",S,E);const f=await s.validate({email:S,password:E},{abortEarly:!1});return console.log("success",f),Promise.resolve()}catch(f){throw console.log("failed",f),a.update(d=>(f.inner.forEach(h=>{d||(d={}),d[h.path]={path:h.path,message:h.message}}),d)),console.log("### errors",Ce(a)),Error("Validation failed")}}}}},Be=je();function Oe(s){let e;return{c(){e=K("Show password")},l(a){e=L(a,"Show password")},m(a,n){T(a,e,n)},d(a){a&&p(e)}}}function Ue(s){let e;return{c(){e=K("Sign In")},l(a){e=L(a,"Sign In")},m(a,n){T(a,e,n)},d(a){a&&p(e)}}}function Ge(s){let e;return{c(){e=K("...")},l(a){e=L(a,"...")},m(a,n){T(a,e,n)},d(a){a&&p(e)}}}function He(s){let e;function a(l,u){return l[3]?Ge:Ue}let n=a(s),t=n(s);return{c(){t.c(),e=he()},l(l){t.l(l),e=he()},m(l,u){t.m(l,u),T(l,e,u)},p(l,u){n!==(n=a(l))&&(t.d(1),t=n(l),t&&(t.c(),t.m(e.parentNode,e)))},d(l){l&&p(e),t.d(l)}}}function Je(s){var re,oe,le,ie,de,ue;let e,a="Sign In",n,t,l,u,S,E,f,d,q,h,v,c,M,x,_,Q="Forgot your password?",J,w,i,g,P,b,te="Sign Up",R,W,se;function Ee(r){s[11](r)}let ae={type:"email",name:"email",label:"Username",placeholder:"Email",disabled:s[3],isInvalid:((re=s[4])==null?void 0:re.email)!==void 0,helperMessage:(le=(oe=s[4])==null?void 0:oe.email)==null?void 0:le.message,novalidate:!0,required:!0};s[2].email!==void 0&&(ae.value=s[2].email),u=new ye({props:ae}),_e.push(()=>ve(u,"value",Ee)),u.$on("input",s[9]);function xe(r){s[12](r)}let ne={type:s[1],name:"password",label:"Password",placeholder:"Password",disabled:s[3],isInvalid:((ie=s[4])==null?void 0:ie.password)!==void 0,helperMessage:(ue=(de=s[4])==null?void 0:de.password)==null?void 0:ue.message,novalidate:!0,required:!0};return s[2].password!==void 0&&(ne.value=s[2].password),d=new ye({props:ne}),_e.push(()=>ve(d,"value",xe)),d.$on("input",s[9]),c=new Ne({props:{checked:s[0],size:"small",$$slots:{default:[Oe]},$$scope:{ctx:s}}}),c.$on("click",s[13]),w=new Ae({props:{type:"submit",class:"w-full",disabled:s[3],$$slots:{default:[He]},$$scope:{ctx:s}}}),{c(){e=k("h1"),e.textContent=a,n=N(),t=k("form"),l=k("div"),j(u.$$.fragment),E=N(),f=k("div"),j(d.$$.fragment),h=N(),v=k("div"),j(c.$$.fragment),M=N(),x=k("div"),_=k("a"),_.textContent=Q,J=N(),j(w.$$.fragment),i=N(),g=k("div"),P=K(`Not registered?
			`),b=k("a"),b.textContent=te,this.h()},l(r){e=I(r,"H1",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1apvbs4"&&(e.textContent=a),n=F(r),t=I(r,"FORM",{class:!0});var o=z(t);l=I(o,"DIV",{class:!0});var C=z(l);B(u.$$.fragment,C),C.forEach(p),E=F(o),f=I(o,"DIV",{class:!0});var y=z(f);B(d.$$.fragment,y),y.forEach(p),h=F(o),v=I(o,"DIV",{class:!0});var V=z(v);B(c.$$.fragment,V),V.forEach(p),M=F(o),x=I(o,"DIV",{class:!0});var A=z(x);_=I(A,"A",{href:!0,class:!0,"data-svelte-h":!0}),Y(_)!=="svelte-un9lag"&&(_.textContent=Q),A.forEach(p),J=F(o),B(w.$$.fragment,o),i=F(o),g=I(o,"DIV",{class:!0});var D=z(g);P=L(D,`Not registered?
			`),b=I(D,"A",{href:!0,class:!0,"data-svelte-h":!0}),Y(b)!=="svelte-j96nbz"&&(b.textContent=te),D.forEach(p),o.forEach(p),this.h()},h(){$(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),$(l,"class","space-y-2"),$(f,"class","space-y-2"),$(v,"class","flex items-start"),$(_,"href","/auth/forgot-password"),$(_,"class","ml-auto text-sm text-primary-700 hover:underline dark:text-primary-500"),$(x,"class","flex items-start"),$(b,"href","/auth/sign-up"),$(b,"class","text-primary-700 hover:underline dark:text-primary-500"),$(g,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),$(t,"class","space-y-4 md:space-y-6"),t.noValidate=!0},m(r,o){T(r,e,o),T(r,n,o),T(r,t,o),m(t,l),O(u,l,null),m(t,E),m(t,f),O(d,f,null),m(t,h),m(t,v),O(c,v,null),m(t,M),m(t,x),m(x,_),m(t,J),O(w,t,null),m(t,i),m(t,g),m(g,P),m(g,b),R=!0,W||(se=[Z(_,"click",s[8]),Z(b,"click",s[8]),Z(t,"submit",Pe(s[10]))],W=!0)},p(r,o){var D,ce,fe,me,pe,ge;const C={};o&8&&(C.disabled=r[3]),o&16&&(C.isInvalid=((D=r[4])==null?void 0:D.email)!==void 0),o&16&&(C.helperMessage=(fe=(ce=r[4])==null?void 0:ce.email)==null?void 0:fe.message),!S&&o&4&&(S=!0,C.value=r[2].email,$e(()=>S=!1)),u.$set(C);const y={};o&2&&(y.type=r[1]),o&8&&(y.disabled=r[3]),o&16&&(y.isInvalid=((me=r[4])==null?void 0:me.password)!==void 0),o&16&&(y.helperMessage=(ge=(pe=r[4])==null?void 0:pe.password)==null?void 0:ge.message),!q&&o&4&&(q=!0,y.value=r[2].password,$e(()=>q=!1)),d.$set(y);const V={};o&1&&(V.checked=r[0]),o&262144&&(V.$$scope={dirty:o,ctx:r}),c.$set(V);const A={};o&8&&(A.disabled=r[3]),o&262152&&(A.$$scope={dirty:o,ctx:r}),w.$set(A)},i(r){R||(U(u.$$.fragment,r),U(d.$$.fragment,r),U(c.$$.fragment,r),U(w.$$.fragment,r),R=!0)},o(r){G(u.$$.fragment,r),G(d.$$.fragment,r),G(c.$$.fragment,r),G(w.$$.fragment,r),R=!1},d(r){r&&(p(e),p(n),p(t)),H(u),H(d),H(c),H(w),W=!1,Te(se)}}}function Qe(s){let e,a;return e=new ze({props:{$$slots:{default:[Je]},$$scope:{ctx:s}}}),{c(){j(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,t){O(e,n,t),a=!0},p(n,[t]){const l={};t&262175&&(l.$$scope={dirty:t,ctx:n}),e.$set(l)},i(n){a||(U(e.$$.fragment,n),a=!0)},o(n){G(e.$$.fragment,n),a=!1},d(n){H(e,n)}}}function Re(s,e,a){let n,t,l,u;const{actions:{isAuthenticated:S,signIn:E},store:{loading:f}}=De;X(s,f,i=>a(3,l=i));const{store:{model:d,errors:q},actions:{validate:h}}=Be;X(s,d,i=>a(2,t=i)),X(s,q,i=>a(4,u=i));let v=!1,c=!1;const M=()=>{d.set({email:"",password:""}),v=!1,a(0,c=!1)},x=async()=>{if(!v)return;const{email:i,password:g}=t;await h(i,g)},_=async()=>{try{v=!0;const{email:i,password:g}=t;await h(i,g);const P=await E(i,g);P!=null&&P.success&&(await we("/"),M())}catch(i){console.log("submit failed",i)}};qe(async()=>{await S()&&await we("/")}),Me(M);function Q(i){s.$$.not_equal(t.email,i)&&(t.email=i,d.set(t))}function J(i){s.$$.not_equal(t.password,i)&&(t.password=i,d.set(t))}const w=()=>{a(0,c=!c)};return s.$$.update=()=>{s.$$.dirty&1&&a(1,n=c?"text":"password")},[c,n,t,l,u,f,d,q,M,x,_,Q,J,w]}class Ke extends Ie{constructor(e){super(),Se(this,e,Re,Qe,ke,{})}}function Le(s){let e,a;return e=new Ke({}),{c(){j(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,t){O(e,n,t),a=!0},p:Ve,i(n){a||(U(e.$$.fragment,n),a=!0)},o(n){G(e.$$.fragment,n),a=!1},d(n){H(e,n)}}}class at extends Ie{constructor(e){super(),Se(this,e,null,Le,ke,{})}}export{at as component};
