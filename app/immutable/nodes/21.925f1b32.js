import{s as Ie,I as J,o as Te,U as De,p as $e,f as S,a as D,g as M,w as Z,c as E,h as W,d as m,j as q,i as T,y as $,z as Ee,W as Ve,S as ge,l as K,m as Q,e as _e,H as Ce}from"../chunks/scheduler.eb33ae00.js";import{S as ye,i as Se,b as V,d as C,m as H,a as x,t as F,e as P,h as he}from"../chunks/index.3134e3af.js";import{w as He}from"../chunks/index.70276595.js";import{B as ve}from"../chunks/Button.b81df063.js";import{T as xe}from"../chunks/Toggle.8cd8eb62.js";import{f as Fe,c as Pe,a as we,T as be}from"../chunks/TextField.7d592578.js";import{a as Le}from"../chunks/auth.state.f6f5c1c1.js";import{A as Ae}from"../chunks/AuthSection.2cc119f2.js";import{g as ke}from"../chunks/navigation.27311ab1.js";function Re(a){let e;return{c(){e=K("Show password")},l(t){e=Q(t,"Show password")},m(t,n){T(t,e,n)},d(t){t&&m(e)}}}function Ue(a){let e;return{c(){e=K("Reset")},l(t){e=Q(t,"Reset")},m(t,n){T(t,e,n)},d(t){t&&m(e)}}}function je(a){let e;return{c(){e=K("Sign In")},l(t){e=Q(t,"Sign In")},m(t,n){T(t,e,n)},d(t){t&&m(e)}}}function ze(a){let e;return{c(){e=K("...")},l(t){e=Q(t,"...")},m(t,n){T(t,e,n)},d(t){t&&m(e)}}}function Be(a){let e;function t(l,d){return l[3]?ze:je}let n=t(a),s=n(a);return{c(){s.c(),e=_e()},l(l){s.l(l),e=_e()},m(l,d){s.m(l,d),T(l,e,d)},p(l,d){n!==(n=t(l))&&(s.d(1),s=n(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){l&&m(e),s.d(l)}}}function Ne(a){var ae,ne,re,ie,le,oe;let e,t="Sign In",n,s,l,d,L,z,k,f,w,A,g,c,B,u,R='<a href="/auth/forgot-password" class="ml-auto text-sm text-primary-700 hover:underline dark:text-primary-500">Forgot your password?</a>',N,h,_,O,v,o,p,U=`Not registered?
			<a href="/auth/sign-up" class="text-primary-700 hover:underline dark:text-primary-500">Sign Up</a>`,G,X,ee;function Me(r){a[12](r)}let te={type:"email",name:"email",label:"Username",placeholder:"Email",disabled:a[3],isInvalid:((ae=a[4])==null?void 0:ae.email)!==void 0,helperMessage:(re=(ne=a[4])==null?void 0:ne.email)==null?void 0:re.message,novalidate:!0,required:!0};a[2].email!==void 0&&(te.value=a[2].email),d=new be({props:te}),$e.push(()=>he(d,"value",Me)),d.$on("input",a[10]);function qe(r){a[13](r)}let se={type:a[1],name:"password",label:"Password",placeholder:"Password",disabled:a[3],isInvalid:((ie=a[4])==null?void 0:ie.password)!==void 0,helperMessage:(oe=(le=a[4])==null?void 0:le.password)==null?void 0:oe.message,novalidate:!0,required:!0};return a[2].password!==void 0&&(se.value=a[2].password),f=new be({props:se}),$e.push(()=>he(f,"value",qe)),f.$on("input",a[10]),c=new xe({props:{checked:a[0],size:"small",$$slots:{default:[Re]},$$scope:{ctx:a}}}),c.$on("click",a[14]),_=new ve({props:{type:"button",class:"mr-3",color:"alternative",disabled:a[3],$$slots:{default:[Ue]},$$scope:{ctx:a}}}),_.$on("click",a[9]),v=new ve({props:{type:"submit",class:"",disabled:a[3],$$slots:{default:[Be]},$$scope:{ctx:a}}}),{c(){e=S("h1"),e.textContent=t,n=D(),s=S("form"),l=S("div"),V(d.$$.fragment),z=D(),k=S("div"),V(f.$$.fragment),A=D(),g=S("div"),V(c.$$.fragment),B=D(),u=S("div"),u.innerHTML=R,N=D(),h=S("div"),V(_.$$.fragment),O=D(),V(v.$$.fragment),o=D(),p=S("div"),p.innerHTML=U,this.h()},l(r){e=M(r,"H1",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1apvbs4"&&(e.textContent=t),n=E(r),s=M(r,"FORM",{class:!0});var i=W(s);l=M(i,"DIV",{class:!0});var I=W(l);C(d.$$.fragment,I),I.forEach(m),z=E(i),k=M(i,"DIV",{class:!0});var b=W(k);C(f.$$.fragment,b),b.forEach(m),A=E(i),g=M(i,"DIV",{class:!0});var j=W(g);C(c.$$.fragment,j),j.forEach(m),B=E(i),u=M(i,"DIV",{class:!0,"data-svelte-h":!0}),Z(u)!=="svelte-1runv78"&&(u.innerHTML=R),N=E(i),h=M(i,"DIV",{class:!0});var y=W(h);C(_.$$.fragment,y),O=E(y),C(v.$$.fragment,y),y.forEach(m),o=E(i),p=M(i,"DIV",{class:!0,"data-svelte-h":!0}),Z(p)!=="svelte-28iiwy"&&(p.innerHTML=U),i.forEach(m),this.h()},h(){q(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),q(l,"class","space-y-2"),q(k,"class","space-y-2"),q(g,"class","flex items-start"),q(u,"class","flex items-start"),q(h,"class","flex justify-end"),q(p,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),q(s,"class","space-y-4 md:space-y-6"),s.noValidate=!0},m(r,i){T(r,e,i),T(r,n,i),T(r,s,i),$(s,l),H(d,l,null),$(s,z),$(s,k),H(f,k,null),$(s,A),$(s,g),H(c,g,null),$(s,B),$(s,u),$(s,N),$(s,h),H(_,h,null),$(h,O),H(v,h,null),$(s,o),$(s,p),G=!0,X||(ee=Ee(s,"submit",Ve(a[11])),X=!0)},p(r,i){var de,fe,ue,me,ce,pe;const I={};i&8&&(I.disabled=r[3]),i&16&&(I.isInvalid=((de=r[4])==null?void 0:de.email)!==void 0),i&16&&(I.helperMessage=(ue=(fe=r[4])==null?void 0:fe.email)==null?void 0:ue.message),!L&&i&4&&(L=!0,I.value=r[2].email,ge(()=>L=!1)),d.$set(I);const b={};i&2&&(b.type=r[1]),i&8&&(b.disabled=r[3]),i&16&&(b.isInvalid=((me=r[4])==null?void 0:me.password)!==void 0),i&16&&(b.helperMessage=(pe=(ce=r[4])==null?void 0:ce.password)==null?void 0:pe.message),!w&&i&4&&(w=!0,b.value=r[2].password,ge(()=>w=!1)),f.$set(b);const j={};i&1&&(j.checked=r[0]),i&1048576&&(j.$$scope={dirty:i,ctx:r}),c.$set(j);const y={};i&8&&(y.disabled=r[3]),i&1048576&&(y.$$scope={dirty:i,ctx:r}),_.$set(y);const Y={};i&8&&(Y.disabled=r[3]),i&1048584&&(Y.$$scope={dirty:i,ctx:r}),v.$set(Y)},i(r){G||(x(d.$$.fragment,r),x(f.$$.fragment,r),x(c.$$.fragment,r),x(_.$$.fragment,r),x(v.$$.fragment,r),G=!0)},o(r){F(d.$$.fragment,r),F(f.$$.fragment,r),F(c.$$.fragment,r),F(_.$$.fragment,r),F(v.$$.fragment,r),G=!1},d(r){r&&(m(e),m(n),m(s)),P(d),P(f),P(c),P(_),P(v),X=!1,ee()}}}function Oe(a){let e,t;return e=new Ae({props:{$$slots:{default:[Ne]},$$scope:{ctx:a}}}),{c(){V(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,s){H(e,n,s),t=!0},p(n,[s]){const l={};s&1048607&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(x(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){P(e,n)}}}function We(a,e,t){let n,s,l,d,L;const{actions:{isAuthenticated:z,signIn:k},store:{loading:f}}=Le;J(a,f,o=>t(3,d=o));const w=He({email:"",password:""});J(a,w,o=>t(2,s=o));const{errors:A,submitted:g,validate:c,reset:B}=Fe(Pe({email:we().required("Email is required").email("Email is not valid"),password:we().required("Password is required")}));J(a,A,o=>t(4,L=o)),J(a,g,o=>t(15,l=o));let u=!1;const R=()=>{w.set({email:"",password:""}),g.set(!1),t(0,u=!1),B()},N=async()=>{if(!l)return;const{email:o,password:p}=s;await c({email:o,password:p})},h=async()=>{try{g.set(!0);const{email:o,password:p}=s;await c({email:o,password:p});const U=await k(o,p);U!=null&&U.success&&(await ke("/"),R())}catch(o){console.log("submit failed",o)}};Te(async()=>{await z()&&await ke("/")}),De(R);function _(o){a.$$.not_equal(s.email,o)&&(s.email=o,w.set(s))}function O(o){a.$$.not_equal(s.password,o)&&(s.password=o,w.set(s))}const v=()=>{t(0,u=!u)};return a.$$.update=()=>{a.$$.dirty&1&&t(1,n=u?"text":"password")},[u,n,s,d,L,f,w,A,g,R,N,h,_,O,v]}class Ge extends ye{constructor(e){super(),Se(this,e,We,Oe,Ie,{})}}function Je(a){let e,t;return e=new Ge({}),{c(){V(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,s){H(e,n,s),t=!0},p:Ce,i(n){t||(x(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){P(e,n)}}}class nt extends ye{constructor(e){super(),Se(this,e,null,Je,Ie,{})}}export{nt as component};
