import{s as _e,z as Y,p as fe,f as S,a as H,g as C,C as pe,c as A,h as N,d as m,j as M,i as B,x as g,E as Pe,a0 as ye,M as ce,l as G,m as J,y as Ie}from"../chunks/scheduler.b53f554c.js";import{S as he,i as ve,b as q,d as E,m as T,a as V,t as D,e as R,f as me}from"../chunks/index.8dc6213e.js";import{w as Se}from"../chunks/index.adf7635c.js";import{B as $e}from"../chunks/Button.faff8da5.js";import{T as Ce}from"../chunks/Toggle.8aaef795.js";import{f as Me,c as qe,a as ge,e as Ee,T as we}from"../chunks/TextField.422033c6.js";import{a as Te,g as Ve}from"../chunks/navigation.188256ca.js";import{A as De}from"../chunks/AuthSection.882d502f.js";function Re(s){let e;return{c(){e=G("Show password")},l(a){e=J(a,"Show password")},m(a,n){B(a,e,n)},d(a){a&&m(e)}}}function ze(s){let e;return{c(){e=G("Reset")},l(a){e=J(a,"Reset")},m(a,n){B(a,e,n)},d(a){a&&m(e)}}}function Fe(s){let e;return{c(){e=G("Submit")},l(a){e=J(a,"Submit")},m(a,n){B(a,e,n)},d(a){a&&m(e)}}}function je(s){var X,Z,ee,se,te,ae;let e,a="Reset Password",n,r,u,i,L,z,f,d,F,y,w,p,_,h,U='Not registered? <a href="/auth/sign-up" class="text-primary-700 hover:underline dark:text-primary-500">Create account</a>',O,$,c,x,l,k,I,K;function be(t){s[11](t)}let Q={type:s[1],name:"password1",label:"Password",placeholder:"Password",disabled:s[3],isInvalid:((X=s[4])==null?void 0:X.password1)!==void 0,helperMessage:(ee=(Z=s[4])==null?void 0:Z.password1)==null?void 0:ee.message,novalidate:!0,required:!0};s[2].password1!==void 0&&(Q.value=s[2].password1),i=new we({props:Q}),fe.push(()=>me(i,"value",be)),i.$on("input",s[9]);function ke(t){s[12](t)}let W={type:s[1],name:"password2",label:"Re-type your password",placeholder:"Password",disabled:s[3],isInvalid:((se=s[4])==null?void 0:se.password2)!==void 0,helperMessage:(ae=(te=s[4])==null?void 0:te.password2)==null?void 0:ae.message,novalidate:!0,required:!0};return s[2].password2!==void 0&&(W.value=s[2].password2),d=new we({props:W}),fe.push(()=>me(d,"value",ke)),d.$on("input",s[9]),p=new Ce({props:{checked:s[0],size:"small",$$slots:{default:[Re]},$$scope:{ctx:s}}}),p.$on("click",s[13]),c=new $e({props:{type:"button",class:"mr-3",color:"alternative",disabled:s[3],$$slots:{default:[ze]},$$scope:{ctx:s}}}),c.$on("click",s[8]),l=new $e({props:{type:"button",$$slots:{default:[Fe]},$$scope:{ctx:s}}}),l.$on("click",s[10]),{c(){e=S("h1"),e.textContent=a,n=H(),r=S("form"),u=S("div"),q(i.$$.fragment),z=H(),f=S("div"),q(d.$$.fragment),y=H(),w=S("div"),q(p.$$.fragment),_=H(),h=S("div"),h.innerHTML=U,O=H(),$=S("div"),q(c.$$.fragment),x=H(),q(l.$$.fragment),this.h()},l(t){e=C(t,"H1",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-rj19s"&&(e.textContent=a),n=A(t),r=C(t,"FORM",{class:!0});var o=N(r);u=C(o,"DIV",{class:!0});var v=N(u);E(i.$$.fragment,v),v.forEach(m),z=A(o),f=C(o,"DIV",{class:!0});var b=N(f);E(d.$$.fragment,b),b.forEach(m),y=A(o),w=C(o,"DIV",{class:!0});var j=N(w);E(p.$$.fragment,j),j.forEach(m),_=A(o),h=C(o,"DIV",{class:!0,"data-svelte-h":!0}),pe(h)!=="svelte-1rrzm7r"&&(h.innerHTML=U),O=A(o),$=C(o,"DIV",{class:!0});var P=N($);E(c.$$.fragment,P),x=A(P),E(l.$$.fragment,P),P.forEach(m),o.forEach(m),this.h()},h(){M(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),M(u,"class","space-y-2"),M(f,"class","space-y-2"),M(w,"class","flex items-start"),M(h,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),M($,"class","flex justify-end"),M(r,"class","space-y-4 md:space-y-6"),r.noValidate=!0},m(t,o){B(t,e,o),B(t,n,o),B(t,r,o),g(r,u),T(i,u,null),g(r,z),g(r,f),T(d,f,null),g(r,y),g(r,w),T(p,w,null),g(r,_),g(r,h),g(r,O),g(r,$),T(c,$,null),g($,x),T(l,$,null),k=!0,I||(K=Pe(r,"submit",ye(s[10])),I=!0)},p(t,o){var ne,oe,le,ie,de,ue;const v={};o&2&&(v.type=t[1]),o&8&&(v.disabled=t[3]),o&16&&(v.isInvalid=((ne=t[4])==null?void 0:ne.password1)!==void 0),o&16&&(v.helperMessage=(le=(oe=t[4])==null?void 0:oe.password1)==null?void 0:le.message),!L&&o&4&&(L=!0,v.value=t[2].password1,ce(()=>L=!1)),i.$set(v);const b={};o&2&&(b.type=t[1]),o&8&&(b.disabled=t[3]),o&16&&(b.isInvalid=((ie=t[4])==null?void 0:ie.password2)!==void 0),o&16&&(b.helperMessage=(ue=(de=t[4])==null?void 0:de.password2)==null?void 0:ue.message),!F&&o&4&&(F=!0,b.value=t[2].password2,ce(()=>F=!1)),d.$set(b);const j={};o&1&&(j.checked=t[0]),o&524288&&(j.$$scope={dirty:o,ctx:t}),p.$set(j);const P={};o&8&&(P.disabled=t[3]),o&524288&&(P.$$scope={dirty:o,ctx:t}),c.$set(P);const re={};o&524288&&(re.$$scope={dirty:o,ctx:t}),l.$set(re)},i(t){k||(V(i.$$.fragment,t),V(d.$$.fragment,t),V(p.$$.fragment,t),V(c.$$.fragment,t),V(l.$$.fragment,t),k=!0)},o(t){D(i.$$.fragment,t),D(d.$$.fragment,t),D(p.$$.fragment,t),D(c.$$.fragment,t),D(l.$$.fragment,t),k=!1},d(t){t&&(m(e),m(n),m(r)),R(i),R(d),R(p),R(c),R(l),I=!1,K()}}}function He(s){let e,a;return e=new De({props:{$$slots:{default:[je]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),a=!0},p(n,[r]){const u={};r&524319&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){a||(V(e.$$.fragment,n),a=!0)},o(n){D(e.$$.fragment,n),a=!1},d(n){R(e,n)}}}function Ae(s,e,a){let n,r,u,i;const{actions:{resetPassword:L},store:{loading:z}}=Te;Y(s,z,l=>a(3,u=l));const f=Se({password1:"",password2:""});Y(s,f,l=>a(2,r=l));const d=l=>`Your password must have at least 1 ${l} character`,{errors:F,submitted:y,validate:w,reset:p}=Me(qe({password1:ge().required("Please enter a password").min(8,"Password must have at least 8 characters").matches(/[0-9]/,d("digit")).matches(/[a-z]/,d("lowercase")),password2:ge().required("Please re-type your password").oneOf([Ee("password1")],"Passwords does not match")}));Y(s,F,l=>a(4,i=l));let _=!1;const h=()=>{f.set({password1:"",password2:""}),y.set(!1),a(0,_=!1),p()},U=async()=>{if(!y)return;const{password1:l,password2:k}=r;await w({password1:l,password2:k})},O=async()=>{try{y.set(!0);const{password1:l,password2:k}=r;await w({password1:l,password2:k});const I=await L(r.password1);I!=null&&I.success&&await Ve("/auth/sign-in")}catch(l){console.log("submit failed",l)}};function $(l){s.$$.not_equal(r.password1,l)&&(r.password1=l,f.set(r))}function c(l){s.$$.not_equal(r.password2,l)&&(r.password2=l,f.set(r))}const x=()=>{a(0,_=!_)};return s.$$.update=()=>{s.$$.dirty&1&&a(1,n=_?"text":"password")},[_,n,r,u,i,z,f,F,h,U,O,$,c,x]}class Be extends he{constructor(e){super(),ve(this,e,Ae,He,_e,{})}}function Le(s){let e,a;return e=new Be({}),{c(){q(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,r){T(e,n,r),a=!0},p:Ie,i(n){a||(V(e.$$.fragment,n),a=!0)},o(n){D(e.$$.fragment,n),a=!1},d(n){R(e,n)}}}class Qe extends he{constructor(e){super(),ve(this,e,null,Le,_e,{})}}export{Qe as component};
