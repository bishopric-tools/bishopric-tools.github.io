import{N as Ke,s as Be,M as ie,O as Re,p as Z,f as E,a as G,l as re,g as S,w as ze,c as H,h as O,d as v,m as oe,j as N,i as X,y as p,z as We,Q as x,I as Xe}from"../chunks/scheduler.4ff403ce.js";import{S as Le,i as Ge,b as F,d as U,m as j,a as z,t as B,e as L,f as ee}from"../chunks/index.e99c29cb.js";import{B as Ye,a as Ze,g as xe}from"../chunks/navigation.16604d7a.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.063c4f60.js";import{T as et}from"../chunks/Toggle.568b4b21.js";import{c as tt,a as te,A as at,T as ae}from"../chunks/TextField.21ca9009.js";import{w as le}from"../chunks/singletons.2db2962d.js";const st=()=>{const e=tt({email:te().required("Email is required").email("Email is not valid"),password:te().required("Password is required"),firstName:te().required("First name is required"),lastName:te().required("Last name is required")}),s=le({email:"",password:"",firstName:"",lastName:""}),i=le({}),l=le([]);return{store:{schema:e,model:s,errors:i,touched:l},actions:{reset:()=>{s.set({email:"",password:"",firstName:"",lastName:""})},destroy:()=>{console.log("destroy called")},validate:async(k,I,d,u)=>{i.set({});try{console.log("validate",k,I);const h=await e.validate({email:k,password:I,firstName:d,lastName:u},{abortEarly:!1});return console.log("success",h),Promise.resolve()}catch(h){throw console.log("failed",h),i.update(w=>(h.inner.forEach(o=>{w||(w={}),w[o.path]={path:o.path,message:o.message}}),w)),console.log("### errors",Ke(i)),Error("Validation failed")}}}}},nt=st();function it(e){let s;return{c(){s=re("Show password")},l(i){s=oe(i,"Show password")},m(i,l){X(i,s,l)},d(i){i&&v(s)}}}function lt(e){let s;return{c(){s=re("Sign up")},l(i){s=oe(i,"Sign up")},m(i,l){X(i,s,l)},d(i){i&&v(s)}}}function rt(e){var ge,$e,_e,ve,he,we,be,Ne,Ie,qe,ye,Ee;let s,i="Sign Up",l,a,c,f,k,I,d,u,h,w,g,o,K,M,$,R,W,D,_,r,V,m,C,b,se,q,de="Sign In",Y,ne,fe;function He(t){e[11](t)}let ue={type:"email",name:"email",label:"Username",placeholder:"Email",disabled:e[3],isInvalid:((ge=e[4])==null?void 0:ge.email)!==void 0,helperMessage:(_e=($e=e[4])==null?void 0:$e.email)==null?void 0:_e.message,novalidate:!0,required:!0};e[2].email!==void 0&&(ue.value=e[2].email),f=new ae({props:ue}),Z.push(()=>ee(f,"value",He)),f.$on("input",e[9]);function Oe(t){e[12](t)}let me={type:e[1],name:"password",label:"Password",placeholder:"Password",disabled:e[3],isInvalid:((ve=e[4])==null?void 0:ve.password)!==void 0,helperMessage:(we=(he=e[4])==null?void 0:he.password)==null?void 0:we.message,novalidate:!0,required:!0};e[2].password!==void 0&&(me.value=e[2].password),u=new ae({props:me}),Z.push(()=>ee(u,"value",Oe)),o=new et({props:{checked:e[0],size:"small",$$slots:{default:[it]},$$scope:{ctx:e}}}),o.$on("click",e[13]);function Qe(t){e[14](t)}let pe={type:"text",name:"first-name",label:"First name",placeholder:"",disabled:e[3],isInvalid:((be=e[4])==null?void 0:be.firstName)!==void 0,helperMessage:(Ie=(Ne=e[4])==null?void 0:Ne.firstName)==null?void 0:Ie.message,novalidate:!0,required:!0};e[2].firstName!==void 0&&(pe.value=e[2].firstName),$=new ae({props:pe}),Z.push(()=>ee($,"value",Qe)),$.$on("input",e[9]);function Je(t){e[15](t)}let ce={type:"text",name:"last-name",label:"Last name",placeholder:"",disabled:e[3],isInvalid:((qe=e[4])==null?void 0:qe.lastName)!==void 0,helperMessage:(Ee=(ye=e[4])==null?void 0:ye.lastName)==null?void 0:Ee.message,novalidate:!0,required:!0};return e[2].lastName!==void 0&&(ce.value=e[2].lastName),_=new ae({props:ce}),Z.push(()=>ee(_,"value",Je)),_.$on("input",e[9]),m=new Ye({props:{type:"button",class:"w-full",$$slots:{default:[lt]},$$scope:{ctx:e}}}),m.$on("click",e[10]),{c(){s=E("h1"),s.textContent=i,l=G(),a=E("div"),c=E("div"),F(f.$$.fragment),I=G(),d=E("div"),F(u.$$.fragment),w=G(),g=E("div"),F(o.$$.fragment),K=G(),M=E("div"),F($.$$.fragment),W=G(),D=E("div"),F(_.$$.fragment),V=G(),F(m.$$.fragment),C=G(),b=E("div"),se=re("Already registered? "),q=E("a"),q.textContent=de,this.h()},l(t){s=S(t,"H1",{class:!0,"data-svelte-h":!0}),ze(s)!=="svelte-uy5m8m"&&(s.textContent=i),l=H(t),a=S(t,"DIV",{class:!0});var n=O(a);c=S(n,"DIV",{class:!0});var P=O(c);U(f.$$.fragment,P),P.forEach(v),I=H(n),d=S(n,"DIV",{class:!0});var y=O(d);U(u.$$.fragment,y),y.forEach(v),w=H(n),g=S(n,"DIV",{class:!0});var Q=O(g);U(o.$$.fragment,Q),Q.forEach(v),K=H(n),M=S(n,"DIV",{class:!0});var T=O(M);U($.$$.fragment,T),T.forEach(v),W=H(n),D=S(n,"DIV",{class:!0});var A=O(D);U(_.$$.fragment,A),A.forEach(v),V=H(n),U(m.$$.fragment,n),C=H(n),b=S(n,"DIV",{class:!0});var J=O(b);se=oe(J,"Already registered? "),q=S(J,"A",{href:!0,class:!0,"data-svelte-h":!0}),ze(q)!=="svelte-j3f5p7"&&(q.textContent=de),J.forEach(v),n.forEach(v),this.h()},h(){N(s,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),N(c,"class","space-y-2"),N(d,"class","space-y-2"),N(g,"class","flex items-start"),N(M,"class","space-y-2"),N(D,"class","space-y-2"),N(q,"href","/auth/sign-in"),N(q,"class","text-primary-700 hover:underline dark:text-primary-500"),N(b,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),N(a,"class","space-y-4 md:space-y-6")},m(t,n){X(t,s,n),X(t,l,n),X(t,a,n),p(a,c),j(f,c,null),p(a,I),p(a,d),j(u,d,null),p(a,w),p(a,g),j(o,g,null),p(a,K),p(a,M),j($,M,null),p(a,W),p(a,D),j(_,D,null),p(a,V),j(m,a,null),p(a,C),p(a,b),p(b,se),p(b,q),Y=!0,ne||(fe=We(q,"click",e[8]),ne=!0)},p(t,n){var Se,ke,Me,De,Ve,Ce,Pe,Te,Ae,Fe,Ue,je;const P={};n&8&&(P.disabled=t[3]),n&16&&(P.isInvalid=((Se=t[4])==null?void 0:Se.email)!==void 0),n&16&&(P.helperMessage=(Me=(ke=t[4])==null?void 0:ke.email)==null?void 0:Me.message),!k&&n&4&&(k=!0,P.value=t[2].email,x(()=>k=!1)),f.$set(P);const y={};n&2&&(y.type=t[1]),n&8&&(y.disabled=t[3]),n&16&&(y.isInvalid=((De=t[4])==null?void 0:De.password)!==void 0),n&16&&(y.helperMessage=(Ce=(Ve=t[4])==null?void 0:Ve.password)==null?void 0:Ce.message),!h&&n&4&&(h=!0,y.value=t[2].password,x(()=>h=!1)),u.$set(y);const Q={};n&1&&(Q.checked=t[0]),n&524288&&(Q.$$scope={dirty:n,ctx:t}),o.$set(Q);const T={};n&8&&(T.disabled=t[3]),n&16&&(T.isInvalid=((Pe=t[4])==null?void 0:Pe.firstName)!==void 0),n&16&&(T.helperMessage=(Ae=(Te=t[4])==null?void 0:Te.firstName)==null?void 0:Ae.message),!R&&n&4&&(R=!0,T.value=t[2].firstName,x(()=>R=!1)),$.$set(T);const A={};n&8&&(A.disabled=t[3]),n&16&&(A.isInvalid=((Fe=t[4])==null?void 0:Fe.lastName)!==void 0),n&16&&(A.helperMessage=(je=(Ue=t[4])==null?void 0:Ue.lastName)==null?void 0:je.message),!r&&n&4&&(r=!0,A.value=t[2].lastName,x(()=>r=!1)),_.$set(A);const J={};n&524288&&(J.$$scope={dirty:n,ctx:t}),m.$set(J)},i(t){Y||(z(f.$$.fragment,t),z(u.$$.fragment,t),z(o.$$.fragment,t),z($.$$.fragment,t),z(_.$$.fragment,t),z(m.$$.fragment,t),Y=!0)},o(t){B(f.$$.fragment,t),B(u.$$.fragment,t),B(o.$$.fragment,t),B($.$$.fragment,t),B(_.$$.fragment,t),B(m.$$.fragment,t),Y=!1},d(t){t&&(v(s),v(l),v(a)),L(f),L(u),L(o),L($),L(_),L(m),ne=!1,fe()}}}function ot(e){let s,i;return s=new at({props:{$$slots:{default:[rt]},$$scope:{ctx:e}}}),{c(){F(s.$$.fragment)},l(l){U(s.$$.fragment,l)},m(l,a){j(s,l,a),i=!0},p(l,[a]){const c={};a&524319&&(c.$$scope={dirty:a,ctx:l}),s.$set(c)},i(l){i||(z(s.$$.fragment,l),i=!0)},o(l){B(s.$$.fragment,l),i=!1},d(l){L(s,l)}}}function dt(e,s,i){let l,a,c,f;const{actions:{signUp:k},store:{loading:I}}=Ze;ie(e,I,r=>i(3,c=r));const{store:{model:d,errors:u},actions:{validate:h}}=nt;ie(e,d,r=>i(2,a=r)),ie(e,u,r=>i(4,f=r));let w=!1,g=!1;const o=()=>{d.set({email:"",password:"",firstName:"",lastName:""})},K=async()=>{if(!w)return;const{email:r,password:V,firstName:m,lastName:C}=a;await h(r,V,m,C)},M=async()=>{try{w=!0;const{email:r,password:V,firstName:m,lastName:C}=a;await h(r,V,m,C);const b=await k(r,V,m,C);b!=null&&b.success&&(await xe("/"),o())}catch(r){console.log("submit failed",r)}};Re(o);function $(r){e.$$.not_equal(a.email,r)&&(a.email=r,d.set(a))}function R(r){e.$$.not_equal(a.password,r)&&(a.password=r,d.set(a))}const W=()=>{i(0,g=!g)};function D(r){e.$$.not_equal(a.firstName,r)&&(a.firstName=r,d.set(a))}function _(r){e.$$.not_equal(a.lastName,r)&&(a.lastName=r,d.set(a))}return e.$$.update=()=>{e.$$.dirty&1&&i(1,l=g?"text":"password")},[g,l,a,c,f,I,d,u,o,K,M,$,R,W,D,_]}class ft extends Le{constructor(s){super(),Ge(this,s,dt,ot,Be,{})}}function ut(e){let s,i;return s=new ft({}),{c(){F(s.$$.fragment)},l(l){U(s.$$.fragment,l)},m(l,a){j(s,l,a),i=!0},p:Xe,i(l){i||(z(s.$$.fragment,l),i=!0)},o(l){B(s.$$.fragment,l),i=!1},d(l){L(s,l)}}}class ht extends Le{constructor(s){super(),Ge(this,s,null,ut,Be,{})}}export{ht as component};
