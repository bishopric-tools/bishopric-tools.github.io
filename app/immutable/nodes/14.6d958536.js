import{s as M,p as J,S as Q,l as Z,m as ee,i as b,n as be,d as m,e as B,I as C,f as P,a as A,g as L,h as G,c as q,j as E,y as N,z as ge,W as he,w as le,H as V,U as ke}from"../chunks/scheduler.eb33ae00.js";import{S as O,i as j,h as X,b as k,d as v,m as w,a as _,t as $,e as D,g as me,c as pe}from"../chunks/index.3134e3af.js";import{u as ve,r as _e,D as se,a as re,b as we,c as De}from"../chunks/types.a79c38c9.js";import{w as x}from"../chunks/index.70276595.js";import{C as Ce,c as Ue}from"../chunks/CloseButton.842d62f7.js";import{D as ye}from"../chunks/Drawer.0a33e861.js";import{B as ue}from"../chunks/Button.b81df063.js";import{f as Se,c as Te,a as Ie,b as Ne,T as Pe}from"../chunks/TextField.7d592578.js";import{C as Ae}from"../chunks/Checkbox.a2cad40c.js";let h=null;const Le=()=>(h={drawerClosed:x(!0),focusedUser:x(null),closeDrawer:()=>{var s,e;h&&((e=(s=h==null?void 0:h.drawerClosed)==null?void 0:s.set)==null||e.call(s,!0))},openDrawer:()=>{var s,e;h&&((e=(s=h==null?void 0:h.drawerClosed)==null?void 0:s.set)==null||e.call(s,!1))}},h),ie=()=>h||Le(),qe={name:"",is_active:!1};let Y=null;const Ee=()=>(Y={loading:x(!1),model:x(qe),targetUser:x(null),updateUser:async s=>{try{await ve.bulkUpdate([s])}catch(e){console.log("submit failed",e)}}},Y),$e=()=>Y===null?Ee():Y;function Fe(s){let e;return{c(){e=Z(s[1])},l(a){e=ee(a,s[1])},m(a,t){b(a,e,t)},p(a,t){t&2&&be(e,a[1])},d(a){a&&m(e)}}}function Be(s){let e,a,t;function l(n){s[2](n)}let r={$$slots:{default:[Fe]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.checked=s[0]),e=new Ae({props:r}),J.push(()=>X(e,"checked",l)),{c(){k(e.$$.fragment)},l(n){v(e.$$.fragment,n)},m(n,o){w(e,n,o),t=!0},p(n,[o]){const c={};o&10&&(c.$$scope={dirty:o,ctx:n}),!a&&o&1&&(a=!0,c.checked=n[0],Q(()=>a=!1)),e.$set(c)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Re(s,e,a){let{label:t=""}=e,{checked:l=!1}=e;function r(n){l=n,a(0,l)}return s.$$set=n=>{"label"in n&&a(1,t=n.label),"checked"in n&&a(0,l=n.checked)},[l,t,r]}class Ve extends O{constructor(e){super(),j(this,e,Re,Be,M,{label:1,checked:0})}}function de(s){var z,K,W;let e,a,t,l,r,n,o,c,f,u,I,g,U,y,S;function F(i){s[11](i)}let p={type:"text",name:"name",label:"Name",placeholder:"Name",disabled:s[1],isInvalid:((z=s[2])==null?void 0:z.name)!==void 0,helperMessage:(W=(K=s[2])==null?void 0:K.name)==null?void 0:W.message,novalidate:!0,required:!0};s[0].name!==void 0&&(p.value=s[0].name),t=new Pe({props:p}),J.push(()=>X(t,"value",F)),t.$on("input",s[9]);function te(i){s[12](i)}let H={label:"Is Active"};return s[0].is_active!==void 0&&(H.checked=s[0].is_active),o=new Ve({props:H}),J.push(()=>X(o,"checked",te)),u=new ue({props:{type:"button",class:"mr-3",color:"alternative",disabled:s[1],$$slots:{default:[xe]},$$scope:{ctx:s}}}),u.$on("click",s[8]),g=new ue({props:{type:"submit",class:"",disabled:s[1],$$slots:{default:[je]},$$scope:{ctx:s}}}),{c(){e=P("form"),a=P("div"),k(t.$$.fragment),r=A(),n=P("div"),k(o.$$.fragment),f=A(),k(u.$$.fragment),I=A(),k(g.$$.fragment),this.h()},l(i){e=L(i,"FORM",{class:!0});var d=G(e);a=L(d,"DIV",{class:!0});var T=G(a);v(t.$$.fragment,T),T.forEach(m),r=q(d),n=L(d,"DIV",{class:!0});var R=G(n);v(o.$$.fragment,R),R.forEach(m),f=q(d),v(u.$$.fragment,d),I=q(d),v(g.$$.fragment,d),d.forEach(m),this.h()},h(){E(a,"class","mb-6"),E(n,"class","mb-6"),e.noValidate=!0,E(e,"class","mb-6")},m(i,d){b(i,e,d),N(e,a),w(t,a,null),N(e,r),N(e,n),w(o,n,null),N(e,f),w(u,e,null),N(e,I),w(g,e,null),U=!0,y||(S=ge(e,"submit",he(s[10])),y=!0)},p(i,d){var oe,ce,fe;const T={};d&2&&(T.disabled=i[1]),d&4&&(T.isInvalid=((oe=i[2])==null?void 0:oe.name)!==void 0),d&4&&(T.helperMessage=(fe=(ce=i[2])==null?void 0:ce.name)==null?void 0:fe.message),!l&&d&1&&(l=!0,T.value=i[0].name,Q(()=>l=!1)),t.$set(T);const R={};!c&&d&1&&(c=!0,R.checked=i[0].is_active,Q(()=>c=!1)),o.$set(R);const ae={};d&2&&(ae.disabled=i[1]),d&1048576&&(ae.$$scope={dirty:d,ctx:i}),u.$set(ae);const ne={};d&2&&(ne.disabled=i[1]),d&1048578&&(ne.$$scope={dirty:d,ctx:i}),g.$set(ne)},i(i){U||(_(t.$$.fragment,i),_(o.$$.fragment,i),_(u.$$.fragment,i),_(g.$$.fragment,i),U=!0)},o(i){$(t.$$.fragment,i),$(o.$$.fragment,i),$(u.$$.fragment,i),$(g.$$.fragment,i),U=!1},d(i){i&&m(e),D(t),D(o),D(u),D(g),y=!1,S()}}}function xe(s){let e;return{c(){e=Z("Reset")},l(a){e=ee(a,"Reset")},m(a,t){b(a,e,t)},d(a){a&&m(e)}}}function Me(s){let e;return{c(){e=Z("Update")},l(a){e=ee(a,"Update")},m(a,t){b(a,e,t)},d(a){a&&m(e)}}}function Oe(s){let e;return{c(){e=Z("...")},l(a){e=ee(a,"...")},m(a,t){b(a,e,t)},d(a){a&&m(e)}}}function je(s){let e;function a(r,n){return r[1]?Oe:Me}let t=a(s),l=t(s);return{c(){l.c(),e=B()},l(r){l.l(r),e=B()},m(r,n){l.m(r,n),b(r,e,n)},p(r,n){t!==(t=a(r))&&(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&m(e),l.d(r)}}}function He(s){let e,a,t=s[0]&&de(s);return{c(){t&&t.c(),e=B()},l(l){t&&t.l(l),e=B()},m(l,r){t&&t.m(l,r),b(l,e,r),a=!0},p(l,[r]){l[0]?t?(t.p(l,r),r&1&&_(t,1)):(t=de(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(me(),$(t,1,1,()=>{t=null}),pe())},i(l){a||(_(t),a=!0)},o(l){$(t),a=!1},d(l){l&&m(e),t&&t.d(l)}}}function ze(s,e,a){let t,l,r,n,o;const{loading:c,targetUser:f,model:u,updateUser:I}=$e();C(s,c,i=>a(1,n=i)),C(s,f,i=>a(13,t=i)),C(s,u,i=>a(0,l=i));const{closeDrawer:g}=ie(),{store:{users:U}}=_e,{errors:y,submitted:S,validate:F,reset:p}=Se(Te({name:Ie().required("Name is required").label("Name"),is_active:Ne()}));C(s,y,i=>a(2,o=i)),C(s,S,i=>a(14,r=i));const te=()=>{t&&u.set({name:t.name,is_active:t.is_active}),S.set(!1),p()},H=async()=>{if(!r)return;const{name:i}=l;await F({name:i})},z=async()=>{try{c.set(!0),S.set(!0);const{name:i,is_active:d}=l;await F({name:i}),await I({...t,name:i,is_active:d}),await U.reload(),g()}catch(i){console.log("submit failed",i)}finally{c.set(!1)}};f.subscribe(i=>{i&&u.set({name:i.name,is_active:i.is_active})});function K(i){s.$$.not_equal(l.name,i)&&(l.name=i,u.set(l))}function W(i){s.$$.not_equal(l.is_active,i)&&(l.is_active=i,u.set(l))}return[l,n,o,c,f,u,y,S,te,H,z,K,W]}class Ke extends O{constructor(e){super(),j(this,e,ze,He,M,{})}}function We(s){let e,a,t="User",l,r,n,o,c;return r=new Ce({props:{class:"mb-4 dark:text-white"}}),r.$on("click",s[3]),o=new Ke({}),{c(){e=P("div"),a=P("h5"),a.textContent=t,l=A(),k(r.$$.fragment),n=A(),k(o.$$.fragment),this.h()},l(f){e=L(f,"DIV",{class:!0});var u=G(e);a=L(u,"H5",{id:!0,class:!0,"data-svelte-h":!0}),le(a)!=="svelte-tpi0tj"&&(a.textContent=t),l=q(u),v(r.$$.fragment,u),u.forEach(m),n=q(f),v(o.$$.fragment,f),this.h()},h(){E(a,"id","drawer-label"),E(a,"class","inline-flex items-center mb-6 text-base font-semibold text-gray-500 uppercase dark:text-gray-400"),E(e,"class","flex items-center")},m(f,u){b(f,e,u),N(e,a),N(e,l),w(r,e,null),b(f,n,u),w(o,f,u),c=!0},p:V,i(f){c||(_(r.$$.fragment,f),_(o.$$.fragment,f),c=!0)},o(f){$(r.$$.fragment,f),$(o.$$.fragment,f),c=!1},d(f){f&&(m(e),m(n)),D(r),D(o,f)}}}function Ge(s){let e,a,t;function l(n){s[4](n)}let r={transitionType:"fly",transitionParams:s[1],id:"sidebar4",placement:"right",$$slots:{default:[We]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.hidden=s[0]),e=new ye({props:r}),J.push(()=>X(e,"hidden",l)),{c(){k(e.$$.fragment)},l(n){v(e.$$.fragment,n)},m(n,o){w(e,n,o),t=!0},p(n,[o]){const c={};o&32&&(c.$$scope={dirty:o,ctx:n}),!a&&o&1&&(a=!0,c.hidden=n[0],Q(()=>a=!1)),e.$set(c)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Je(s,e,a){let t,l={x:320,duration:200,easing:Ue};const{drawerClosed:r,closeDrawer:n}=ie();C(s,r,c=>a(0,t=c));function o(c){t=c,r.set(t)}return[t,l,r,n,o]}class Qe extends O{constructor(e){super(),j(this,e,Je,Ge,M,{})}}function Xe(s){let e,a="No data";return{c(){e=P("p"),e.textContent=a},l(t){e=L(t,"P",{"data-svelte-h":!0}),le(e)!=="svelte-t5me1l"&&(e.textContent=a)},m(t,l){b(t,e,l)},p:V,i:V,o:V,d(t){t&&m(e)}}}function Ye(s){let e,a,t,l;return e=new we({props:{options:s[0],data:s[2],loading:s[3]}}),t=new Qe({}),{c(){k(e.$$.fragment),a=A(),k(t.$$.fragment)},l(r){v(e.$$.fragment,r),a=q(r),v(t.$$.fragment,r)},m(r,n){w(e,r,n),b(r,a,n),w(t,r,n),l=!0},p(r,n){const o={};n&1&&(o.options=r[0]),n&4&&(o.data=r[2]),n&8&&(o.loading=r[3]),e.$set(o)},i(r){l||(_(e.$$.fragment,r),_(t.$$.fragment,r),l=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),l=!1},d(r){r&&m(a),D(e,r),D(t,r)}}}function Ze(s){let e,a,t,l;const r=[Ye,Xe],n=[];function o(c,f){return c[0]&&c[1]&&c[1].length>0?0:1}return e=o(s),a=n[e]=r[e](s),{c(){a.c(),t=B()},l(c){a.l(c),t=B()},m(c,f){n[e].m(c,f),b(c,t,f),l=!0},p(c,[f]){let u=e;e=o(c),e===u?n[e].p(c,f):(me(),$(n[u],1,1,()=>{n[u]=null}),pe(),a=n[e],a?a.p(c,f):(a=n[e]=r[e](c),a.c()),_(a,1),a.m(t.parentNode,t))},i(c){l||(_(a),l=!0)},o(c){$(a),l=!1},d(c){c&&m(t),n[e].d(c)}}}function et(s,e,a){let t,l,r,n;const{store:{users:o}}=_e;C(s,o,p=>a(1,l=p));const{openDrawer:c}=ie(),{targetUser:f}=$e(),{loading:u}=o;C(s,u,p=>a(3,n=p));const I={sortable:!0,onRowClick:p=>{c(),f.set(p)},columnDefs:[{label:"Name",dataProperty:"name",dataType:se.String,viewAlignment:re.Left},{label:"Email",dataProperty:"email",dataType:se.String,viewAlignment:re.Left},{label:"Active",dataProperty:"is_active",dataType:se.String,viewAlignment:re.Left}]},g=De(I),{store:{options:U,data:y},actions:{setRowData:S}}=g;C(s,U,p=>a(0,t=p)),C(s,y,p=>a(2,r=p));const F=o.subscribe(p=>{S(p)});return ke(()=>{F()}),[t,l,r,n,o,u,U,y]}class tt extends O{constructor(e){super(),j(this,e,et,Ze,M,{})}}function at(s){let e,a="Users",t,l,r;return l=new tt({}),{c(){e=P("p"),e.textContent=a,t=A(),k(l.$$.fragment),this.h()},l(n){e=L(n,"P",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-7pkvs7"&&(e.textContent=a),t=q(n),v(l.$$.fragment,n),this.h()},h(){E(e,"class","text-base dark:text-white")},m(n,o){b(n,e,o),b(n,t,o),w(l,n,o),r=!0},p:V,i(n){r||(_(l.$$.fragment,n),r=!0)},o(n){$(l.$$.fragment,n),r=!1},d(n){n&&(m(e),m(t)),D(l,n)}}}class dt extends O{constructor(e){super(),j(this,e,null,at,M,{})}}export{dt as component};
