import{s as he,O as x,p as fe,f as S,a as H,g as q,w as pe,c as O,h as Y,d as m,j as C,i as A,y as g,z as Ie,Y as Pe,U as ce,l as G,m as J,I as ye}from"../chunks/scheduler.93423757.js";import{S as _e,i as ve,b as M,d as T,m as V,a as D,t as E,e as R,h as me}from"../chunks/index.a6fd619a.js";import{w as Se}from"../chunks/index.91f33279.js";import{B as $e}from"../chunks/Button.d0d3e2f3.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.f4b5b0f4.js";import{T as qe}from"../chunks/Toggle.bd13874c.js";import{A as Ce,f as Me,c as Te,a as ge,b as Ve,T as we}from"../chunks/fo-dator.fb039d2d.js";import{a as De,g as Ee}from"../chunks/navigation.fece5654.js";function Re(s){let e;return{c(){e=G("Show password")},l(a){e=J(a,"Show password")},m(a,n){A(a,e,n)},d(a){a&&m(e)}}}function ze(s){let e;return{c(){e=G("Reset")},l(a){e=J(a,"Reset")},m(a,n){A(a,e,n)},d(a){a&&m(e)}}}function Fe(s){let e;return{c(){e=G("Submit")},l(a){e=J(a,"Submit")},m(a,n){A(a,e,n)},d(a){a&&m(e)}}}function je(s){var X,Z,ee,se,te,ae;let e,a="Reset Password",n,r,u,i,B,z,f,d,F,P,w,p,h,_,N='Not registered? <a href="/auth/sign-up" class="text-primary-700 hover:underline dark:text-primary-500">Create account</a>',L,$,c,U,l,k,y,K;function be(t){s[11](t)}let Q={type:s[1],name:"password1",label:"Password",placeholder:"Password",disabled:s[3],isInvalid:((X=s[4])==null?void 0:X.password1)!==void 0,helperMessage:(ee=(Z=s[4])==null?void 0:Z.password1)==null?void 0:ee.message,novalidate:!0,required:!0};s[2].password1!==void 0&&(Q.value=s[2].password1),i=new we({props:Q}),fe.push(()=>me(i,"value",be)),i.$on("input",s[9]);function ke(t){s[12](t)}let W={type:s[1],name:"password2",label:"Re-type your password",placeholder:"Password",disabled:s[3],isInvalid:((se=s[4])==null?void 0:se.password2)!==void 0,helperMessage:(ae=(te=s[4])==null?void 0:te.password2)==null?void 0:ae.message,novalidate:!0,required:!0};return s[2].password2!==void 0&&(W.value=s[2].password2),d=new we({props:W}),fe.push(()=>me(d,"value",ke)),d.$on("input",s[9]),p=new qe({props:{checked:s[0],size:"small",$$slots:{default:[Re]},$$scope:{ctx:s}}}),p.$on("click",s[13]),c=new $e({props:{type:"button",class:"mr-3",color:"alternative",disabled:s[3],$$slots:{default:[ze]},$$scope:{ctx:s}}}),c.$on("click",s[8]),l=new $e({props:{type:"button",$$slots:{default:[Fe]},$$scope:{ctx:s}}}),l.$on("click",s[10]),{c(){e=S("h1"),e.textContent=a,n=H(),r=S("form"),u=S("div"),M(i.$$.fragment),z=H(),f=S("div"),M(d.$$.fragment),P=H(),w=S("div"),M(p.$$.fragment),h=H(),_=S("div"),_.innerHTML=N,L=H(),$=S("div"),M(c.$$.fragment),U=H(),M(l.$$.fragment),this.h()},l(t){e=q(t,"H1",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-rj19s"&&(e.textContent=a),n=O(t),r=q(t,"FORM",{class:!0});var o=Y(r);u=q(o,"DIV",{class:!0});var v=Y(u);T(i.$$.fragment,v),v.forEach(m),z=O(o),f=q(o,"DIV",{class:!0});var b=Y(f);T(d.$$.fragment,b),b.forEach(m),P=O(o),w=q(o,"DIV",{class:!0});var j=Y(w);T(p.$$.fragment,j),j.forEach(m),h=O(o),_=q(o,"DIV",{class:!0,"data-svelte-h":!0}),pe(_)!=="svelte-1rrzm7r"&&(_.innerHTML=N),L=O(o),$=q(o,"DIV",{class:!0});var I=Y($);T(c.$$.fragment,I),U=O(I),T(l.$$.fragment,I),I.forEach(m),o.forEach(m),this.h()},h(){C(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),C(u,"class","space-y-2"),C(f,"class","space-y-2"),C(w,"class","flex items-start"),C(_,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),C($,"class","flex justify-end"),C(r,"class","space-y-4 md:space-y-6"),r.noValidate=!0},m(t,o){A(t,e,o),A(t,n,o),A(t,r,o),g(r,u),V(i,u,null),g(r,z),g(r,f),V(d,f,null),g(r,P),g(r,w),V(p,w,null),g(r,h),g(r,_),g(r,L),g(r,$),V(c,$,null),g($,U),V(l,$,null),k=!0,y||(K=Ie(r,"submit",Pe(s[10])),y=!0)},p(t,o){var ne,oe,le,ie,de,ue;const v={};o&2&&(v.type=t[1]),o&8&&(v.disabled=t[3]),o&16&&(v.isInvalid=((ne=t[4])==null?void 0:ne.password1)!==void 0),o&16&&(v.helperMessage=(le=(oe=t[4])==null?void 0:oe.password1)==null?void 0:le.message),!B&&o&4&&(B=!0,v.value=t[2].password1,ce(()=>B=!1)),i.$set(v);const b={};o&2&&(b.type=t[1]),o&8&&(b.disabled=t[3]),o&16&&(b.isInvalid=((ie=t[4])==null?void 0:ie.password2)!==void 0),o&16&&(b.helperMessage=(ue=(de=t[4])==null?void 0:de.password2)==null?void 0:ue.message),!F&&o&4&&(F=!0,b.value=t[2].password2,ce(()=>F=!1)),d.$set(b);const j={};o&1&&(j.checked=t[0]),o&524288&&(j.$$scope={dirty:o,ctx:t}),p.$set(j);const I={};o&8&&(I.disabled=t[3]),o&524288&&(I.$$scope={dirty:o,ctx:t}),c.$set(I);const re={};o&524288&&(re.$$scope={dirty:o,ctx:t}),l.$set(re)},i(t){k||(D(i.$$.fragment,t),D(d.$$.fragment,t),D(p.$$.fragment,t),D(c.$$.fragment,t),D(l.$$.fragment,t),k=!0)},o(t){E(i.$$.fragment,t),E(d.$$.fragment,t),E(p.$$.fragment,t),E(c.$$.fragment,t),E(l.$$.fragment,t),k=!1},d(t){t&&(m(e),m(n),m(r)),R(i),R(d),R(p),R(c),R(l),y=!1,K()}}}function He(s){let e,a;return e=new Ce({props:{$$slots:{default:[je]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment)},l(n){T(e.$$.fragment,n)},m(n,r){V(e,n,r),a=!0},p(n,[r]){const u={};r&524319&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){E(e.$$.fragment,n),a=!1},d(n){R(e,n)}}}function Oe(s,e,a){let n,r,u,i;const{actions:{resetPassword:B},store:{loading:z}}=De;x(s,z,l=>a(3,u=l));const f=Se({password1:"",password2:""});x(s,f,l=>a(2,r=l));const d=l=>`Your password must have at least 1 ${l} character`,{errors:F,submitted:P,validate:w,reset:p}=Me(Te({password1:ge().required("Please enter a password").min(8,"Password must have at least 8 characters").matches(/[0-9]/,d("digit")).matches(/[a-z]/,d("lowercase")),password2:ge().required("Please re-type your password").oneOf([Ve("password1")],"Passwords does not match")}));x(s,F,l=>a(4,i=l));let h=!1;const _=()=>{f.set({password1:"",password2:""}),P.set(!1),a(0,h=!1),p()},N=async()=>{if(!P)return;const{password1:l,password2:k}=r;await w({password1:l,password2:k})},L=async()=>{try{P.set(!0);const{password1:l,password2:k}=r;await w({password1:l,password2:k});const y=await B(r.password1);y!=null&&y.success&&await Ee("/auth/sign-in")}catch(l){console.log("submit failed",l)}};function $(l){s.$$.not_equal(r.password1,l)&&(r.password1=l,f.set(r))}function c(l){s.$$.not_equal(r.password2,l)&&(r.password2=l,f.set(r))}const U=()=>{a(0,h=!h)};return s.$$.update=()=>{s.$$.dirty&1&&a(1,n=h?"text":"password")},[h,n,r,u,i,z,f,F,_,N,L,$,c,U]}class Ae extends _e{constructor(e){super(),ve(this,e,Oe,He,he,{})}}function Be(s){let e,a;return e=new Ae({}),{c(){M(e.$$.fragment)},l(n){T(e.$$.fragment,n)},m(n,r){V(e,n,r),a=!0},p:ye,i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){E(e.$$.fragment,n),a=!1},d(n){R(e,n)}}}class Qe extends _e{constructor(e){super(),ve(this,e,null,Be,he,{})}}export{Qe as component};
