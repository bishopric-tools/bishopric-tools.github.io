import{s as we,z as O,a1 as ye,p as pe,f as q,a as B,l as Q,g as C,C as ce,c as R,h as H,d as c,m as W,j as I,i as G,x as p,E as Ee,M as ge,y as qe}from"../chunks/scheduler.b53f554c.js";import{S as be,i as ke,b as D,d as x,m as V,a as A,t as M,e as P,f as $e}from"../chunks/index.8dc6213e.js";import{w as Ce}from"../chunks/index.adf7635c.js";import{B as _e}from"../chunks/Button.faff8da5.js";import{T as De}from"../chunks/Toggle.8aaef795.js";import{f as xe,c as Ve,a as he,T as ve}from"../chunks/TextField.422033c6.js";import{a as Ae,g as Me}from"../chunks/navigation.d75be752.js";import{A as Pe}from"../chunks/AuthSection.a931e8e4.js";function Te(t){let e;return{c(){e=Q("Show password")},l(a){e=W(a,"Show password")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function Ue(t){let e;return{c(){e=Q("Reset")},l(a){e=W(a,"Reset")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function je(t){let e;return{c(){e=Q("Sign up")},l(a){e=W(a,"Sign up")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function Fe(t){var te,se,ae,ne,re,le;let e,a="Sign Up",n,r,f,u,T,J,h,o,U,S,v,g,w,m,$,K,_,L,b,i,d,j="Sign In",N,X,Y;function Ie(s){t[12](s)}let Z={type:"email",name:"email",label:"Username",placeholder:"Email",disabled:t[3],isInvalid:((te=t[4])==null?void 0:te.email)!==void 0,helperMessage:(ae=(se=t[4])==null?void 0:se.email)==null?void 0:ae.message,novalidate:!0,required:!0};t[2].email!==void 0&&(Z.value=t[2].email),u=new ve({props:Z}),pe.push(()=>$e(u,"value",Ie)),u.$on("input",t[10]);function Se(s){t[13](s)}let ee={type:t[1],name:"password",label:"Password",placeholder:"Password",disabled:t[3],isInvalid:((ne=t[4])==null?void 0:ne.password)!==void 0,helperMessage:(le=(re=t[4])==null?void 0:re.password)==null?void 0:le.message,novalidate:!0,required:!0};return t[2].password!==void 0&&(ee.value=t[2].password),o=new ve({props:ee}),pe.push(()=>$e(o,"value",Se)),g=new De({props:{checked:t[0],size:"small",$$slots:{default:[Te]},$$scope:{ctx:t}}}),g.$on("click",t[14]),$=new _e({props:{type:"button",class:"mr-3",color:"alternative",disabled:t[3],$$slots:{default:[Ue]},$$scope:{ctx:t}}}),$.$on("click",t[9]),_=new _e({props:{type:"button",$$slots:{default:[je]},$$scope:{ctx:t}}}),_.$on("click",t[11]),{c(){e=q("h1"),e.textContent=a,n=B(),r=q("div"),f=q("div"),D(u.$$.fragment),J=B(),h=q("div"),D(o.$$.fragment),S=B(),v=q("div"),D(g.$$.fragment),w=B(),m=q("div"),D($.$$.fragment),K=B(),D(_.$$.fragment),L=B(),b=q("div"),i=Q("Already registered? "),d=q("a"),d.textContent=j,this.h()},l(s){e=C(s,"H1",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-uy5m8m"&&(e.textContent=a),n=R(s),r=C(s,"DIV",{class:!0});var l=H(r);f=C(l,"DIV",{class:!0});var y=H(f);x(u.$$.fragment,y),y.forEach(c),J=R(l),h=C(l,"DIV",{class:!0});var k=H(h);x(o.$$.fragment,k),k.forEach(c),S=R(l),v=C(l,"DIV",{class:!0});var F=H(v);x(g.$$.fragment,F),F.forEach(c),w=R(l),m=C(l,"DIV",{class:!0});var E=H(m);x($.$$.fragment,E),K=R(E),x(_.$$.fragment,E),E.forEach(c),L=R(l),b=C(l,"DIV",{class:!0});var z=H(b);i=W(z,"Already registered? "),d=C(z,"A",{href:!0,class:!0,"data-svelte-h":!0}),ce(d)!=="svelte-j3f5p7"&&(d.textContent=j),z.forEach(c),l.forEach(c),this.h()},h(){I(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),I(f,"class","space-y-2"),I(h,"class","space-y-2"),I(v,"class","flex items-start"),I(m,"class","flex justify-end"),I(d,"href","/auth/sign-in"),I(d,"class","text-primary-700 hover:underline dark:text-primary-500"),I(b,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),I(r,"class","space-y-4 md:space-y-6")},m(s,l){G(s,e,l),G(s,n,l),G(s,r,l),p(r,f),V(u,f,null),p(r,J),p(r,h),V(o,h,null),p(r,S),p(r,v),V(g,v,null),p(r,w),p(r,m),V($,m,null),p(m,K),V(_,m,null),p(r,L),p(r,b),p(b,i),p(b,d),N=!0,X||(Y=Ee(d,"click",t[9]),X=!0)},p(s,l){var ie,oe,de,ue,fe,me;const y={};l&8&&(y.disabled=s[3]),l&16&&(y.isInvalid=((ie=s[4])==null?void 0:ie.email)!==void 0),l&16&&(y.helperMessage=(de=(oe=s[4])==null?void 0:oe.email)==null?void 0:de.message),!T&&l&4&&(T=!0,y.value=s[2].email,ge(()=>T=!1)),u.$set(y);const k={};l&2&&(k.type=s[1]),l&8&&(k.disabled=s[3]),l&16&&(k.isInvalid=((ue=s[4])==null?void 0:ue.password)!==void 0),l&16&&(k.helperMessage=(me=(fe=s[4])==null?void 0:fe.password)==null?void 0:me.message),!U&&l&4&&(U=!0,k.value=s[2].password,ge(()=>U=!1)),o.$set(k);const F={};l&1&&(F.checked=s[0]),l&524288&&(F.$$scope={dirty:l,ctx:s}),g.$set(F);const E={};l&8&&(E.disabled=s[3]),l&524288&&(E.$$scope={dirty:l,ctx:s}),$.$set(E);const z={};l&524288&&(z.$$scope={dirty:l,ctx:s}),_.$set(z)},i(s){N||(A(u.$$.fragment,s),A(o.$$.fragment,s),A(g.$$.fragment,s),A($.$$.fragment,s),A(_.$$.fragment,s),N=!0)},o(s){M(u.$$.fragment,s),M(o.$$.fragment,s),M(g.$$.fragment,s),M($.$$.fragment,s),M(_.$$.fragment,s),N=!1},d(s){s&&(c(e),c(n),c(r)),P(u),P(o),P(g),P($),P(_),X=!1,Y()}}}function ze(t){let e,a;return e=new Pe({props:{$$slots:{default:[Fe]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,r){V(e,n,r),a=!0},p(n,[r]){const f={};r&524319&&(f.$$scope={dirty:r,ctx:n}),e.$set(f)},i(n){a||(A(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){P(e,n)}}}function Be(t,e,a){let n,r,f,u,T;const{actions:{signUp:J},store:{loading:h}}=Ae;O(t,h,i=>a(3,u=i));const o=Ce({email:"",password:""});O(t,o,i=>a(2,r=i));const{errors:U,submitted:S,validate:v,reset:g}=xe(Ve({email:he().required("Email is required").email("Email is not valid"),password:he().required("Password is required")}));O(t,U,i=>a(4,T=i)),O(t,S,i=>a(15,f=i));let w=!1;const m=()=>{o.set({email:"",password:""}),S.set(!1),a(0,w=!1),g()},$=async()=>{if(!f)return;const{email:i,password:d}=r;await v({email:i,password:d})},K=async()=>{try{S.set(!0);const{email:i,password:d}=r;await v({email:i,password:d});const j=await J(i,d);j!=null&&j.success&&(await Me("/auth/sign-in"),m())}catch(i){console.log("submit failed",i)}};ye(m);function _(i){t.$$.not_equal(r.email,i)&&(r.email=i,o.set(r))}function L(i){t.$$.not_equal(r.password,i)&&(r.password=i,o.set(r))}const b=()=>{a(0,w=!w)};return t.$$.update=()=>{t.$$.dirty&1&&a(1,n=w?"text":"password")},[w,n,r,u,T,h,o,U,S,m,$,K,_,L,b]}class Re extends be{constructor(e){super(),ke(this,e,Be,ze,we,{})}}function He(t){let e,a;return e=new Re({}),{c(){D(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,r){V(e,n,r),a=!0},p:qe,i(n){a||(A(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){P(e,n)}}}class Xe extends be{constructor(e){super(),ke(this,e,null,He,we,{})}}export{Xe as component};
