import{s as we,I as O,U as ye,p as pe,f as E,a as B,l as Q,g as D,w as ce,c as H,h as R,d as c,m as W,j as k,i as G,y as p,z as qe,S as ge,H as Ee}from"../chunks/scheduler.e91d0d47.js";import{S as be,i as Ie,b as C,d as V,m as x,a as A,t as P,e as T,h as $e}from"../chunks/index.7198988d.js";import{w as De}from"../chunks/index.d0c06b92.js";import{B as _e}from"../chunks/Button.ebceed54.js";import{T as Ce}from"../chunks/Toggle.3a3dfec7.js";import{f as Ve,c as xe,a as he,T as ve}from"../chunks/TextField.1e282ea7.js";import{a as Ae}from"../chunks/auth.state.3a7674b6.js";import{A as Pe}from"../chunks/AuthSection.70a6c573.js";import{g as Te}from"../chunks/navigation.b89c1eb0.js";function Ue(t){let e;return{c(){e=Q("Show password")},l(a){e=W(a,"Show password")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function Me(t){let e;return{c(){e=Q("Reset")},l(a){e=W(a,"Reset")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function je(t){let e;return{c(){e=Q("Sign up")},l(a){e=W(a,"Sign up")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function Fe(t){var te,se,ae,ne,re,ie;let e,a="Sign Up",n,r,f,u,U,J,h,o,M,S,v,g,w,m,$,K,_,L,b,l,d,j="Sign In",N,X,Y;function ke(s){t[12](s)}let Z={type:"email",name:"email",label:"Username",placeholder:"Email",disabled:t[3],isInvalid:((te=t[4])==null?void 0:te.email)!==void 0,helperMessage:(ae=(se=t[4])==null?void 0:se.email)==null?void 0:ae.message,novalidate:!0,required:!0};t[2].email!==void 0&&(Z.value=t[2].email),u=new ve({props:Z}),pe.push(()=>$e(u,"value",ke)),u.$on("input",t[10]);function Se(s){t[13](s)}let ee={type:t[1],name:"password",label:"Password",placeholder:"Password",disabled:t[3],isInvalid:((ne=t[4])==null?void 0:ne.password)!==void 0,helperMessage:(ie=(re=t[4])==null?void 0:re.password)==null?void 0:ie.message,novalidate:!0,required:!0};return t[2].password!==void 0&&(ee.value=t[2].password),o=new ve({props:ee}),pe.push(()=>$e(o,"value",Se)),g=new Ce({props:{checked:t[0],size:"small",$$slots:{default:[Ue]},$$scope:{ctx:t}}}),g.$on("click",t[14]),$=new _e({props:{type:"button",class:"mr-3",color:"alternative",disabled:t[3],$$slots:{default:[Me]},$$scope:{ctx:t}}}),$.$on("click",t[9]),_=new _e({props:{type:"button",$$slots:{default:[je]},$$scope:{ctx:t}}}),_.$on("click",t[11]),{c(){e=E("h1"),e.textContent=a,n=B(),r=E("div"),f=E("div"),C(u.$$.fragment),J=B(),h=E("div"),C(o.$$.fragment),S=B(),v=E("div"),C(g.$$.fragment),w=B(),m=E("div"),C($.$$.fragment),K=B(),C(_.$$.fragment),L=B(),b=E("div"),l=Q("Already registered? "),d=E("a"),d.textContent=j,this.h()},l(s){e=D(s,"H1",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-uy5m8m"&&(e.textContent=a),n=H(s),r=D(s,"DIV",{class:!0});var i=R(r);f=D(i,"DIV",{class:!0});var y=R(f);V(u.$$.fragment,y),y.forEach(c),J=H(i),h=D(i,"DIV",{class:!0});var I=R(h);V(o.$$.fragment,I),I.forEach(c),S=H(i),v=D(i,"DIV",{class:!0});var F=R(v);V(g.$$.fragment,F),F.forEach(c),w=H(i),m=D(i,"DIV",{class:!0});var q=R(m);V($.$$.fragment,q),K=H(q),V(_.$$.fragment,q),q.forEach(c),L=H(i),b=D(i,"DIV",{class:!0});var z=R(b);l=W(z,"Already registered? "),d=D(z,"A",{href:!0,class:!0,"data-svelte-h":!0}),ce(d)!=="svelte-j3f5p7"&&(d.textContent=j),z.forEach(c),i.forEach(c),this.h()},h(){k(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),k(f,"class","space-y-2"),k(h,"class","space-y-2"),k(v,"class","flex items-start"),k(m,"class","flex justify-end"),k(d,"href","/auth/sign-in"),k(d,"class","text-primary-700 hover:underline dark:text-primary-500"),k(b,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),k(r,"class","space-y-4 md:space-y-6")},m(s,i){G(s,e,i),G(s,n,i),G(s,r,i),p(r,f),x(u,f,null),p(r,J),p(r,h),x(o,h,null),p(r,S),p(r,v),x(g,v,null),p(r,w),p(r,m),x($,m,null),p(m,K),x(_,m,null),p(r,L),p(r,b),p(b,l),p(b,d),N=!0,X||(Y=qe(d,"click",t[9]),X=!0)},p(s,i){var le,oe,de,ue,fe,me;const y={};i&8&&(y.disabled=s[3]),i&16&&(y.isInvalid=((le=s[4])==null?void 0:le.email)!==void 0),i&16&&(y.helperMessage=(de=(oe=s[4])==null?void 0:oe.email)==null?void 0:de.message),!U&&i&4&&(U=!0,y.value=s[2].email,ge(()=>U=!1)),u.$set(y);const I={};i&2&&(I.type=s[1]),i&8&&(I.disabled=s[3]),i&16&&(I.isInvalid=((ue=s[4])==null?void 0:ue.password)!==void 0),i&16&&(I.helperMessage=(me=(fe=s[4])==null?void 0:fe.password)==null?void 0:me.message),!M&&i&4&&(M=!0,I.value=s[2].password,ge(()=>M=!1)),o.$set(I);const F={};i&1&&(F.checked=s[0]),i&524288&&(F.$$scope={dirty:i,ctx:s}),g.$set(F);const q={};i&8&&(q.disabled=s[3]),i&524288&&(q.$$scope={dirty:i,ctx:s}),$.$set(q);const z={};i&524288&&(z.$$scope={dirty:i,ctx:s}),_.$set(z)},i(s){N||(A(u.$$.fragment,s),A(o.$$.fragment,s),A(g.$$.fragment,s),A($.$$.fragment,s),A(_.$$.fragment,s),N=!0)},o(s){P(u.$$.fragment,s),P(o.$$.fragment,s),P(g.$$.fragment,s),P($.$$.fragment,s),P(_.$$.fragment,s),N=!1},d(s){s&&(c(e),c(n),c(r)),T(u),T(o),T(g),T($),T(_),X=!1,Y()}}}function ze(t){let e,a;return e=new Pe({props:{$$slots:{default:[Fe]},$$scope:{ctx:t}}}),{c(){C(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,r){x(e,n,r),a=!0},p(n,[r]){const f={};r&524319&&(f.$$scope={dirty:r,ctx:n}),e.$set(f)},i(n){a||(A(e.$$.fragment,n),a=!0)},o(n){P(e.$$.fragment,n),a=!1},d(n){T(e,n)}}}function Be(t,e,a){let n,r,f,u,U;const{actions:{signUp:J},store:{loading:h}}=Ae;O(t,h,l=>a(3,u=l));const o=De({email:"",password:""});O(t,o,l=>a(2,r=l));const{errors:M,submitted:S,validate:v,reset:g}=Ve(xe({email:he().required("Email is required").email("Email is not valid"),password:he().required("Password is required")}));O(t,M,l=>a(4,U=l)),O(t,S,l=>a(15,f=l));let w=!1;const m=()=>{o.set({email:"",password:""}),S.set(!1),a(0,w=!1),g()},$=async()=>{if(!f)return;const{email:l,password:d}=r;await v({email:l,password:d})},K=async()=>{try{S.set(!0);const{email:l,password:d}=r;await v({email:l,password:d});const j=await J(l,d);j!=null&&j.success&&(await Te("/auth/sign-in"),m())}catch(l){console.log("submit failed",l)}};ye(m);function _(l){t.$$.not_equal(r.email,l)&&(r.email=l,o.set(r))}function L(l){t.$$.not_equal(r.password,l)&&(r.password=l,o.set(r))}const b=()=>{a(0,w=!w)};return t.$$.update=()=>{t.$$.dirty&1&&a(1,n=w?"text":"password")},[w,n,r,u,U,h,o,M,S,m,$,K,_,L,b]}class He extends be{constructor(e){super(),Ie(this,e,Be,ze,we,{})}}function Re(t){let e,a;return e=new He({}),{c(){C(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,r){x(e,n,r),a=!0},p:Ee,i(n){a||(A(e.$$.fragment,n),a=!0)},o(n){P(e.$$.fragment,n),a=!1},d(n){T(e,n)}}}class Ye extends be{constructor(e){super(),Ie(this,e,null,Re,we,{})}}export{Ye as component};
