import{s as re,u as Z,f as E,e as $,g as N,h as W,d as g,x as Ae,X as Rt,i as M,y as k,a0 as tt,a1 as Ee,z as Ie,H as ge,Y as kt,S as At,D as me,E as De,l as V,m as L,a2 as qe,n as ne,r as Dt,A as Mt,B as St,C as Ct,P as ue,a3 as Wt,a4 as Ce,I as J,$ as Ft,w as Xe,a as U,c as X,j as q,p as _e,M as be,a5 as Ot}from"../chunks/scheduler.0c4f444e.js";import{S as le,i as ie,a as v,g as ve,t as D,c as ye,b as O,d as z,m as j,e as x,f as pe}from"../chunks/index.cdf70788.js";import{e as We,a as je,r as Me}from"../chunks/rbac.state.a865e07f.js";import{B as Fe}from"../chunks/Button.d7c0948f.js";import{D as zt,a as jt,b as xt,c as Vt}from"../chunks/DataTable.ec134cc4.js";import{w as ke}from"../chunks/index.01fef012.js";import{a as Lt}from"../chunks/auth.state.0719401e.js";import{n as qt}from"../chunks/toaster.state.4cc4550a.js";import{C as Ut,c as Xt}from"../chunks/CloseButton.93fa59b1.js";import{D as Yt}from"../chunks/Drawer.f3287a61.js";import{L as Pt,I as Bt,f as Ht,c as Gt,a as Jt,b as Qt,T as Kt}from"../chunks/TextField.bbd11679.js";import{g as Oe,t as Tt,b as It}from"../chunks/tw-merge.222c61b5.js";import{A as at}from"../chunks/Avatar.81120419.js";function nt(a,e,t){const n=a.slice();return n[0]=e[t].value,n[17]=e[t].name,n}function rt(a){let e,t;return{c(){e=E("option"),t=V(a[2]),this.h()},l(n){e=N(n,"OPTION",{});var r=W(e);t=L(r,a[2]),r.forEach(g),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="",qe(e,e.__value)},m(n,r){M(n,e,r),k(e,t)},p(n,r){r&4&&ne(t,n[2])},d(n){n&&g(e)}}}function lt(a){let e;const t=a[10].default,n=Dt(t,a,a[9],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,l){n&&n.m(r,l),e=!0},p(r,l){n&&n.p&&(!e||l&512)&&Mt(n,t,r,r[9],e?Ct(t,r[9],l,null):St(r[9]),null)},i(r){e||(v(n,r),e=!0)},o(r){D(n,r),e=!1},d(r){n&&n.d(r)}}}function it(a){let e,t=a[17]+"",n,r;return{c(){e=E("option"),n=V(t),this.h()},l(l){e=N(l,"OPTION",{});var i=W(e);n=L(i,t),i.forEach(g),this.h()},h(){e.__value=r=a[0],qe(e,e.__value)},m(l,i){M(l,e,i),k(e,n)},p(l,i){i&2&&t!==(t=l[17]+"")&&ne(n,t),i&2&&r!==(r=l[0])&&(e.__value=r,qe(e,e.__value))},d(l){l&&g(e)}}}function Zt(a){let e,t,n,r,l=a[2]&&rt(a),i=We(a[1]),o=[];for(let f=0;f<i.length;f+=1)o[f]=it(nt(a,i,f));let s=null;i.length||(s=lt(a));let d=[a[4],{class:a[3]}],u={};for(let f=0;f<d.length;f+=1)u=Z(u,d[f]);return{c(){e=E("select"),l&&l.c(),t=$();for(let f=0;f<o.length;f+=1)o[f].c();s&&s.c(),this.h()},l(f){e=N(f,"SELECT",{class:!0});var m=W(e);l&&l.l(m),t=$();for(let c=0;c<o.length;c+=1)o[c].l(m);s&&s.l(m),m.forEach(g),this.h()},h(){Ae(e,u),a[0]===void 0&&Rt(()=>a[14].call(e))},m(f,m){M(f,e,m),l&&l.m(e,null),k(e,t);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);s&&s.m(e,null),"value"in u&&(u.multiple?tt:Ee)(e,u.value),e.autofocus&&e.focus(),Ee(e,a[0],!0),n||(r=[Ie(e,"change",a[14]),Ie(e,"change",a[11]),Ie(e,"contextmenu",a[12]),Ie(e,"input",a[13])],n=!0)},p(f,[m]){if(f[2]?l?l.p(f,m):(l=rt(f),l.c(),l.m(e,t)):l&&(l.d(1),l=null),m&514){i=We(f[1]);let c;for(c=0;c<i.length;c+=1){const b=nt(f,i,c);o[c]?o[c].p(b,m):(o[c]=it(b),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length,!i.length&&s?s.p(f,m):i.length?s&&(ve(),D(s,1,1,()=>{s=null}),ye()):(s=lt(f),s.c(),v(s,1),s.m(e,null))}Ae(e,u=Oe(d,[m&16&&f[4],{class:f[3]}])),m&24&&"value"in u&&(u.multiple?tt:Ee)(e,u.value),m&3&&Ee(e,f[0])},i:ge,o:ge,d(f){f&&g(e),l&&l.d(),kt(o,f),s&&s.d(),n=!1,At(r)}}}const $t="block w-full";function ea(a,e,t){const n=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let r=me(e,n),{$$slots:l={},$$scope:i}=e,{items:o=[]}=e,{value:s=void 0}=e,{placeholder:d="Choose option ..."}=e,{underline:u=!1}=e,{size:f="md"}=e,{defaultClass:m="text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"}=e,{underlineClass:c="text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const b={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let T;function I(y){ue.call(this,a,y)}function C(y){ue.call(this,a,y)}function p(y){ue.call(this,a,y)}function S(){s=Wt(this),t(0,s),t(1,o)}return a.$$set=y=>{t(16,e=Z(Z({},e),De(y))),t(4,r=me(e,n)),"items"in y&&t(1,o=y.items),"value"in y&&t(0,s=y.value),"placeholder"in y&&t(2,d=y.placeholder),"underline"in y&&t(5,u=y.underline),"size"in y&&t(6,f=y.size),"defaultClass"in y&&t(7,m=y.defaultClass),"underlineClass"in y&&t(8,c=y.underlineClass),"$$scope"in y&&t(9,i=y.$$scope)},a.$$.update=()=>{t(3,T=Tt($t,u?c:m,b[f],u&&"!px-0",e.class))},e=De(e),[s,o,d,T,r,u,f,m,c,i,l,I,C,p,S]}class ta extends le{constructor(e){super(),ie(this,e,ea,Zt,re,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}function aa(a){let e,t;const n=a[15].default,r=Dt(n,a,a[14],null);let l=[a[1],{class:a[0]}],i={};for(let o=0;o<l.length;o+=1)i=Z(i,l[o]);return{c(){e=E("p"),r&&r.c(),this.h()},l(o){e=N(o,"P",{class:!0});var s=W(e);r&&r.l(s),s.forEach(g),this.h()},h(){Ae(e,i)},m(o,s){M(o,e,s),r&&r.m(e,null),t=!0},p(o,[s]){r&&r.p&&(!t||s&16384)&&Mt(r,n,o,o[14],t?Ct(n,o[14],s,null):St(o[14]),null),Ae(e,i=Oe(l,[s&2&&o[1],{class:o[0]}]))},i(o){t||(v(r,o),t=!0)},o(o){D(r,o),t=!1},d(o){o&&g(e),r&&r.d(o)}}}function na(a,e,t){const n=["color","height","align","justify","italic","firstupper","upperClass","opacity","whitespace","size","space","weight"];let r=me(e,n),{$$slots:l={},$$scope:i}=e,{color:o="text-gray-900 dark:text-white"}=e,{height:s="normal"}=e,{align:d="left"}=e,{justify:u=!1}=e,{italic:f=!1}=e,{firstupper:m=!1}=e,{upperClass:c="first-line:uppercase first-line:tracking-widest first-letter:text-7xl first-letter:font-bold first-letter:text-gray-900 dark:first-letter:text-gray-100 first-letter:mr-3 first-letter:float-left"}=e,{opacity:b=void 0}=e,{whitespace:T="normal"}=e,{size:I="base"}=e,{space:C=void 0}=e,{weight:p="normal"}=e;const S={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl","9xl":"text-9xl"},y={thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},R={tighter:"tracking-tighter",tight:"tracking-tight",normal:"tracking-normal",wide:"tracking-wide",wider:"tracking-wider",widest:"tracking-widest"},F={normal:"leading-normal",relaxed:"leading-relaxed",loose:"leading-loose"},K={left:"text-left",center:"text-center",right:"text-right"},Y={normal:"whitespace-normal",nowrap:"whitespace-nowrap",pre:"whitespace-pre",preline:"whitespace-pre-line",prewrap:"whitespace-pre-wrap"};let de=o.split(" ").map(_=>_.trim()).map(_=>_+"/"+String(b)).join(" "),fe=Tt(I&&S[I],b&&de||o&&o,s&&F[s],p&&y[p],C&&R[C],d&&K[d],u&&"text-justify",f&&"italic",m&&c,T&&Y[T],e.class);return a.$$set=_=>{t(23,e=Z(Z({},e),De(_))),t(1,r=me(e,n)),"color"in _&&t(2,o=_.color),"height"in _&&t(3,s=_.height),"align"in _&&t(4,d=_.align),"justify"in _&&t(5,u=_.justify),"italic"in _&&t(6,f=_.italic),"firstupper"in _&&t(7,m=_.firstupper),"upperClass"in _&&t(8,c=_.upperClass),"opacity"in _&&t(9,b=_.opacity),"whitespace"in _&&t(10,T=_.whitespace),"size"in _&&t(11,I=_.size),"space"in _&&t(12,C=_.space),"weight"in _&&t(13,p=_.weight),"$$scope"in _&&t(14,i=_.$$scope)},e=De(e),[fe,r,o,s,d,u,f,m,c,b,T,I,C,p,i,l]}class st extends le{constructor(e){super(),ie(this,e,na,aa,re,{color:2,height:3,align:4,justify:5,italic:6,firstupper:7,upperClass:8,opacity:9,whitespace:10,size:11,space:12,weight:13})}}let Q=null;const ra=()=>(Q={drawerClosed:ke(!0),focusedUser:ke(null),closeDrawer:()=>{var a,e;Q&&((e=(a=Q==null?void 0:Q.drawerClosed)==null?void 0:a.set)==null||e.call(a,!0))},openDrawer:()=>{var a,e;Q&&((e=(a=Q==null?void 0:Q.drawerClosed)==null?void 0:a.set)==null||e.call(a,!1))}},Q),la=()=>{Q=null},Ye=()=>Q||ra(),{store:{currentUser:xe,currentSession:ia}}=Lt,{store:{roles:sa}}=Me,{action:{toastify:we}}=qt,oa={name:"",sort_index:0,role_group_id:0},ua={name:"",sort_index:0,group_id:"0"};let ae=null;const fa=()=>(ae={loading:ke(!1),model:ke(ua),action:ke("view"),targetRole:ke(oa),addRole:async a=>{var e,t,n,r;try{let l=a.sort_index;a.sort_index||(l=(((e=Ce(sa).sort((s,d)=>!(d!=null&&d.sort_index)||!(s!=null&&s.sort_index)?0:d.sort_index-s.sort_index)[1])==null?void 0:e.sort_index)??0)+1);const i=[{name:a.name,sort_index:l,role_group_id:a.role_group_id,created_by_id:(t=Ce(xe))==null?void 0:t.id,created_at:new Date().toISOString()}];await je.bulkCreate(i),(r=(n=ae==null?void 0:ae.targetRole)==null?void 0:n.set)==null||r.call(n,null),we({type:"success",message:"Updated role successfully"})}catch{we({type:"error",message:"Update role failed, please refresh browser and try again."})}},updateRole:async a=>{var e,t,n;try{console.log("### update role",Ce(xe),Ce(ia));const r=[{name:a.name,sort_index:a.sort_index,uuid:a.uuid,role_group_id:a.role_group_id,updated_by_id:(e=Ce(xe))==null?void 0:e.id,updated_at:new Date().toISOString()}];await je.bulkUpdate(r,{onConflict:"uuid"}),(n=(t=ae==null?void 0:ae.targetRole)==null?void 0:t.set)==null||n.call(t,null),we({type:"success",message:"Updated role successfully."})}catch{we({type:"error",message:"Update role failed, please refresh browser and try again."})}},deleteRole:async a=>{if(a)try{await je.bulkDelete([a]),we({type:"success",message:"Deleted role successfully."})}catch{we({type:"error",message:"Delete role failed, please refresh browser and try again."})}}},ae),Et=()=>ae===null?fa():ae,da=()=>{ae=null};function ca(a){let e,t="No data";return{c(){e=E("p"),e.textContent=t},l(n){e=N(n,"P",{"data-svelte-h":!0}),Xe(e)!=="svelte-t5me1l"&&(e.textContent=t)},m(n,r){M(n,e,r)},p:ge,i:ge,o:ge,d(n){n&&g(e)}}}function ma(a){let e,t;return e=new xt({props:{options:a[1],data:a[3],loading:a[4],$$slots:{header:[ga]},$$scope:{ctx:a}}}),{c(){O(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,r){j(e,n,r),t=!0},p(n,r){const l={};r&2&&(l.options=n[1]),r&8&&(l.data=n[3]),r&16&&(l.loading=n[4]),r&262145&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function ha(a){let e;return{c(){e=V("Add")},l(t){e=L(t,"Add")},m(t,n){M(t,e,n)},d(t){t&&g(e)}}}function ga(a){let e,t,n,r,l,i;return l=new Fe({props:{size:"xs",color:"alternative",$$slots:{default:[ha]},$$scope:{ctx:a}}}),l.$on("click",a[9]),{c(){e=E("div"),t=E("p"),n=V(a[0]),r=U(),O(l.$$.fragment),this.h()},l(o){e=N(o,"DIV",{slot:!0,class:!0});var s=W(e);t=N(s,"P",{class:!0});var d=W(t);n=L(d,a[0]),d.forEach(g),r=X(s),z(l.$$.fragment,s),s.forEach(g),this.h()},h(){q(t,"class","text-base dark:text-white"),q(e,"slot","header"),q(e,"class","flex justify-between mb-2 items-center mx-md-5")},m(o,s){M(o,e,s),k(e,t),k(t,n),k(e,r),j(l,e,null),i=!0},p(o,s){(!i||s&1)&&ne(n,o[0]);const d={};s&262144&&(d.$$scope={dirty:s,ctx:o}),l.$set(d)},i(o){i||(v(l.$$.fragment,o),i=!0)},o(o){D(l.$$.fragment,o),i=!1},d(o){o&&g(e),x(l)}}}function _a(a){let e,t,n,r;const l=[ma,ca],i=[];function o(s,d){return s[1]&&s[2]&&s[2].length>0?0:1}return e=o(a),t=i[e]=l[e](a),{c(){t.c(),n=$()},l(s){t.l(s),n=$()},m(s,d){i[e].m(s,d),M(s,n,d),r=!0},p(s,[d]){let u=e;e=o(s),e===u?i[e].p(s,d):(ve(),D(i[u],1,1,()=>{i[u]=null}),ye(),t=i[e],t?t.p(s,d):(t=i[e]=l[e](s),t.c()),v(t,1),t.m(n.parentNode,n))},i(s){r||(v(t),r=!0)},o(s){D(t),r=!1},d(s){s&&g(n),i[e].d(s)}}}function ba(a,e,t){let n,r,l,i,{title:o="Roles"}=e,{group_id:s=1}=e;const{store:{roles:d}}=Me;J(a,d,R=>t(2,r=R));const{openDrawer:u}=Ye(),{targetRole:f,action:m}=Et(),{loading:c}=d;J(a,c,R=>t(4,i=R));const b={onRowClick:R=>{m.set("update"),u();const F={...R},K={id:F.id,name:F.name,role_group_id:F.group_id,sort_index:F.sort_index,uuid:F.uuid,created_by_id:F.created_by_id,created_at:F.created_at,updated_by_id:F.updated_by_id,updated_at:F.updated_at};f.set(K)},columnDefs:[{label:"Name",dataProperty:"name",dataType:zt.String,viewAlignment:jt.Left,width:100}]},T=Vt(b),{store:{options:I,data:C},actions:{setRowData:p}}=T;J(a,I,R=>t(1,n=R)),J(a,C,R=>t(3,l=R));const S=()=>{m.set("add"),f.set({name:"",sort_index:0,role_group_id:s}),u()},y=d.subscribe(R=>{p(R.filter(F=>F.group_id===s))});return Ft(()=>{y(),la(),da()}),a.$$set=R=>{"title"in R&&t(0,o=R.title),"group_id"in R&&t(10,s=R.group_id)},[o,n,r,l,i,d,c,I,C,S,s]}class pa extends le{constructor(e){super(),ie(this,e,ba,_a,re,{title:0,group_id:10})}}function ot(a){let e,t;return{c(){e=E("small"),t=V(a[1])},l(n){e=N(n,"SMALL",{});var r=W(e);t=L(r,a[1]),r.forEach(g)},m(n,r){M(n,e,r),k(e,t)},p(n,r){r&2&&ne(t,n[1])},d(n){n&&g(e)}}}function va(a){let e,t=a[1]&&ot(a);return{c(){t&&t.c(),e=$()},l(n){t&&t.l(n),e=$()},m(n,r){t&&t.m(n,r),M(n,e,r)},p(n,r){n[1]?t?t.p(n,r):(t=ot(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&g(e),t&&t.d(n)}}}function ut(a){let e,t;return{c(){e=E("div"),t=V(a[4]),this.h()},l(n){e=N(n,"DIV",{class:!0});var r=W(e);t=L(r,a[4]),r.forEach(g),this.h()},h(){q(e,"class",wa)},m(n,r){M(n,e,r),k(e,t)},p(n,r){r&16&&ne(t,n[4])},d(n){n&&g(e)}}}function ya(a){let e,t,n,r,l,i,o;t=new Pt({props:{for:a[2],class:a[3]?`${a[5]} block mb-2`:"block mb-2",$$slots:{default:[va]},$$scope:{ctx:a}}});const s=[a[6],{type:"number"},{class:a[3]?dt:ft}];function d(m){a[7](m)}let u={};for(let m=0;m<s.length;m+=1)u=Z(u,s[m]);a[0]!==void 0&&(u.value=a[0]),r=new Bt({props:u}),_e.push(()=>pe(r,"value",d)),r.$on("click",a[8]),r.$on("blur",a[9]),r.$on("focus",a[10]),r.$on("input",a[11]),r.$on("keydown",a[12]),r.$on("keyup",a[13]);let f=a[4]&&ut(a);return{c(){e=E("div"),O(t.$$.fragment),n=U(),O(r.$$.fragment),i=U(),f&&f.c()},l(m){e=N(m,"DIV",{});var c=W(e);z(t.$$.fragment,c),n=X(c),z(r.$$.fragment,c),i=X(c),f&&f.l(c),c.forEach(g)},m(m,c){M(m,e,c),j(t,e,null),k(e,n),j(r,e,null),k(e,i),f&&f.m(e,null),o=!0},p(m,[c]){const b={};c&4&&(b.for=m[2]),c&8&&(b.class=m[3]?`${m[5]} block mb-2`:"block mb-2"),c&16386&&(b.$$scope={dirty:c,ctx:m}),t.$set(b);const T=c&72?Oe(s,[c&64&&It(m[6]),s[1],c&8&&{class:m[3]?dt:ft}]):{};!l&&c&1&&(l=!0,T.value=m[0],be(()=>l=!1)),r.$set(T),m[4]?f?f.p(m,c):(f=ut(m),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(m){o||(v(t.$$.fragment,m),v(r.$$.fragment,m),o=!0)},o(m){D(t.$$.fragment,m),D(r.$$.fragment,m),o=!1},d(m){m&&g(e),x(t),x(r),f&&f.d()}}}const ft="block w-full disabled:cursor-not-allowed disabled:opacity-50 p-2.5 focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 border-gray-300 dark:border-gray-600 text-sm rounded-lg",dt="block w-full disabled:cursor-not-allowed disabled:opacity-50 p-2.5 focus:ring-red-500 focus:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500 bg-red-50 text-red-900 placeholder-red-700 dark:text-red-500 dark:placeholder-red-500 dark:bg-gray-700 border-red-500 dark:border-red-400 text-sm rounded-lg",wa="text-xs font-normal text-red-700 dark:text-red-500";function ka(a,e,t){const n=["label","name","value","isInvalid","helperMessage"];let r=me(e,n),{label:l=""}=e,{name:i=""}=e,{value:o}=e,{isInvalid:s=!1}=e,{helperMessage:d}=e;const u="text-sm font-medium text-red-700 dark:text-red-500";function f(p){o=p,t(0,o)}function m(p){ue.call(this,a,p)}function c(p){ue.call(this,a,p)}function b(p){ue.call(this,a,p)}function T(p){ue.call(this,a,p)}function I(p){ue.call(this,a,p)}function C(p){ue.call(this,a,p)}return a.$$set=p=>{e=Z(Z({},e),De(p)),t(6,r=me(e,n)),"label"in p&&t(1,l=p.label),"name"in p&&t(2,i=p.name),"value"in p&&t(0,o=p.value),"isInvalid"in p&&t(3,s=p.isInvalid),"helperMessage"in p&&t(4,d=p.helperMessage)},[o,l,i,s,d,u,r,f,m,c,b,T,I,C]}class Da extends le{constructor(e){super(),ie(this,e,ka,ya,re,{label:1,name:2,value:0,isInvalid:3,helperMessage:4})}}function ct(a){let e,t;return{c(){e=E("small"),t=V(a[1])},l(n){e=N(n,"SMALL",{});var r=W(e);t=L(r,a[1]),r.forEach(g)},m(n,r){M(n,e,r),k(e,t)},p(n,r){r&2&&ne(t,n[1])},d(n){n&&g(e)}}}function Ma(a){let e,t=a[1]&&ct(a);return{c(){t&&t.c(),e=$()},l(n){t&&t.l(n),e=$()},m(n,r){t&&t.m(n,r),M(n,e,r)},p(n,r){n[1]?t?t.p(n,r):(t=ct(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&g(e),t&&t.d(n)}}}function Sa(a){let e,t,n,r,l,i;t=new Pt({props:{for:a[2],class:"block mb-2",$$slots:{default:[Ma]},$$scope:{ctx:a}}});const o=[a[4],{items:a[3]}];function s(u){a[5](u)}let d={};for(let u=0;u<o.length;u+=1)d=Z(d,o[u]);return a[0]!==void 0&&(d.value=a[0]),r=new ta({props:d}),_e.push(()=>pe(r,"value",s)),{c(){e=E("div"),O(t.$$.fragment),n=U(),O(r.$$.fragment)},l(u){e=N(u,"DIV",{});var f=W(e);z(t.$$.fragment,f),n=X(f),z(r.$$.fragment,f),f.forEach(g)},m(u,f){M(u,e,f),j(t,e,null),k(e,n),j(r,e,null),i=!0},p(u,[f]){const m={};f&4&&(m.for=u[2]),f&66&&(m.$$scope={dirty:f,ctx:u}),t.$set(m);const c=f&24?Oe(o,[f&16&&It(u[4]),f&8&&{items:u[3]}]):{};!l&&f&1&&(l=!0,c.value=u[0],be(()=>l=!1)),r.$set(c)},i(u){i||(v(t.$$.fragment,u),v(r.$$.fragment,u),i=!0)},o(u){D(t.$$.fragment,u),D(r.$$.fragment,u),i=!1},d(u){u&&g(e),x(t),x(r)}}}function Ca(a,e,t){const n=["label","name","value","items"];let r=me(e,n),{label:l=""}=e,{name:i=""}=e,{value:o}=e,{items:s}=e;function d(u){o=u,t(0,o)}return a.$$set=u=>{e=Z(Z({},e),De(u)),t(4,r=me(e,n)),"label"in u&&t(1,l=u.label),"name"in u&&t(2,i=u.name),"value"in u&&t(0,o=u.value),"items"in u&&t(3,s=u.items)},[o,l,i,s,r,d]}class Pa extends le{constructor(e){super(),ie(this,e,Ca,Sa,re,{label:1,name:2,value:0,items:3})}}function Ta(a){let e,t,n;function r(i){a[6](i)}let l={label:a[1],name:a[2],items:a[3]};return a[0]!==void 0&&(l.value=a[0]),e=new Pa({props:l}),_e.push(()=>pe(e,"value",r)),{c(){O(e.$$.fragment)},l(i){z(e.$$.fragment,i)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const s={};o&2&&(s.label=i[1]),o&4&&(s.name=i[2]),o&8&&(s.items=i[3]),!t&&o&1&&(t=!0,s.value=i[0],be(()=>t=!1)),e.$set(s)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){D(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Ia(a,e,t){let n,r,{label:l=""}=e,{name:i=""}=e,{value:o}=e;const{store:{roleGroups:s}}=Me;J(a,s,u=>t(5,r=u));function d(u){o=u,t(0,o)}return a.$$set=u=>{"label"in u&&t(1,l=u.label),"name"in u&&t(2,i=u.name),"value"in u&&t(0,o=u.value)},a.$$.update=()=>{a.$$.dirty&32&&t(3,n=r.map(u=>({value:u.id+"",name:`${u.name}`})))},[o,l,i,n,s,r,d]}class Ea extends le{constructor(e){super(),ie(this,e,Ia,Ta,re,{label:1,name:2,value:0})}}function Ue(a){"@babel/helpers - typeof";return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(a)}function se(a,e){if(e.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+e.length+" present")}function H(a){se(1,arguments);var e=Object.prototype.toString.call(a);return a instanceof Date||Ue(a)==="object"&&e==="[object Date]"?new Date(a.getTime()):typeof a=="number"||e==="[object Number]"?new Date(a):((typeof a=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var Na={};function Ra(){return Na}function mt(a){var e=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return e.setUTCFullYear(a.getFullYear()),a.getTime()-e.getTime()}function Re(a,e){se(2,arguments);var t=H(a),n=H(e),r=t.getTime()-n.getTime();return r<0?-1:r>0?1:r}function Aa(a,e){se(2,arguments);var t=H(a),n=H(e),r=t.getFullYear()-n.getFullYear(),l=t.getMonth()-n.getMonth();return r*12+l}function Wa(a,e){return se(2,arguments),H(a).getTime()-H(e).getTime()}var ht={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},Fa="trunc";function Oa(a){return a?ht[a]:ht[Fa]}function za(a){se(1,arguments);var e=H(a);return e.setHours(23,59,59,999),e}function ja(a){se(1,arguments);var e=H(a),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function xa(a){se(1,arguments);var e=H(a);return za(e).getTime()===ja(e).getTime()}function Va(a,e){se(2,arguments);var t=H(a),n=H(e),r=Re(t,n),l=Math.abs(Aa(t,n)),i;if(l<1)i=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-r*l);var o=Re(t,n)===-r;xa(H(a))&&l===1&&Re(a,n)===1&&(o=!1),i=r*(l-Number(o))}return i===0?0:i}function La(a,e,t){se(2,arguments);var n=Wa(a,e)/1e3;return Oa(t==null?void 0:t.roundingMethod)(n)}var qa={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ua=function(e,t,n){var r,l=qa[e];return typeof l=="string"?r=l:t===1?r=l.one:r=l.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};const Xa=Ua;function Ve(a){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):a.defaultWidth,n=a.formats[t]||a.formats[a.defaultWidth];return n}}var Ya={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ba={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ha={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ga={date:Ve({formats:Ya,defaultWidth:"full"}),time:Ve({formats:Ba,defaultWidth:"full"}),dateTime:Ve({formats:Ha,defaultWidth:"full"})};const Ja=Ga;var Qa={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ka=function(e,t,n,r){return Qa[e]};const Za=Ka;function Pe(a){return function(e,t){var n=t!=null&&t.context?String(t.context):"standalone",r;if(n==="formatting"&&a.formattingValues){var l=a.defaultFormattingWidth||a.defaultWidth,i=t!=null&&t.width?String(t.width):l;r=a.formattingValues[i]||a.formattingValues[l]}else{var o=a.defaultWidth,s=t!=null&&t.width?String(t.width):a.defaultWidth;r=a.values[s]||a.values[o]}var d=a.argumentCallback?a.argumentCallback(e):e;return r[d]}}var $a={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},en={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},an={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ln=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},sn={ordinalNumber:ln,era:Pe({values:$a,defaultWidth:"wide"}),quarter:Pe({values:en,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Pe({values:tn,defaultWidth:"wide"}),day:Pe({values:an,defaultWidth:"wide"}),dayPeriod:Pe({values:nn,defaultWidth:"wide",formattingValues:rn,defaultFormattingWidth:"wide"})};const on=sn;function Te(a){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.width,r=n&&a.matchPatterns[n]||a.matchPatterns[a.defaultMatchWidth],l=e.match(r);if(!l)return null;var i=l[0],o=n&&a.parsePatterns[n]||a.parsePatterns[a.defaultParseWidth],s=Array.isArray(o)?fn(o,function(f){return f.test(i)}):un(o,function(f){return f.test(i)}),d;d=a.valueCallback?a.valueCallback(s):s,d=t.valueCallback?t.valueCallback(d):d;var u=e.slice(i.length);return{value:d,rest:u}}}function un(a,e){for(var t in a)if(a.hasOwnProperty(t)&&e(a[t]))return t}function fn(a,e){for(var t=0;t<a.length;t++)if(e(a[t]))return t}function dn(a){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(a.matchPattern);if(!n)return null;var r=n[0],l=e.match(a.parsePattern);if(!l)return null;var i=a.valueCallback?a.valueCallback(l[0]):l[0];i=t.valueCallback?t.valueCallback(i):i;var o=e.slice(r.length);return{value:i,rest:o}}}var cn=/^(\d+)(th|st|nd|rd)?/i,mn=/\d+/i,hn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gn={any:[/^b/i,/^(a|c)/i]},_n={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bn={any:[/1/i,/2/i,/3/i,/4/i]},pn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},kn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Mn={ordinalNumber:dn({matchPattern:cn,parsePattern:mn,valueCallback:function(e){return parseInt(e,10)}}),era:Te({matchPatterns:hn,defaultMatchWidth:"wide",parsePatterns:gn,defaultParseWidth:"any"}),quarter:Te({matchPatterns:_n,defaultMatchWidth:"wide",parsePatterns:bn,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Te({matchPatterns:pn,defaultMatchWidth:"wide",parsePatterns:vn,defaultParseWidth:"any"}),day:Te({matchPatterns:yn,defaultMatchWidth:"wide",parsePatterns:wn,defaultParseWidth:"any"}),dayPeriod:Te({matchPatterns:kn,defaultMatchWidth:"any",parsePatterns:Dn,defaultParseWidth:"any"})};const Sn=Mn;var Cn={code:"en-US",formatDistance:Xa,formatLong:Ja,formatRelative:Za,localize:on,match:Sn,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Pn=Cn;function Nt(a,e){if(a==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a}function Tn(a){return Nt({},a)}var gt=1440,In=2520,Le=43200,En=86400;function Nn(a,e,t){var n,r;se(2,arguments);var l=Ra(),i=(n=(r=t==null?void 0:t.locale)!==null&&r!==void 0?r:l.locale)!==null&&n!==void 0?n:Pn;if(!i.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=Re(a,e);if(isNaN(o))throw new RangeError("Invalid time value");var s=Nt(Tn(t),{addSuffix:!!(t!=null&&t.addSuffix),comparison:o}),d,u;o>0?(d=H(e),u=H(a)):(d=H(a),u=H(e));var f=La(u,d),m=(mt(u)-mt(d))/1e3,c=Math.round((f-m)/60),b;if(c<2)return t!=null&&t.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,s):f<10?i.formatDistance("lessThanXSeconds",10,s):f<20?i.formatDistance("lessThanXSeconds",20,s):f<40?i.formatDistance("halfAMinute",0,s):f<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):c===0?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",c,s);if(c<45)return i.formatDistance("xMinutes",c,s);if(c<90)return i.formatDistance("aboutXHours",1,s);if(c<gt){var T=Math.round(c/60);return i.formatDistance("aboutXHours",T,s)}else{if(c<In)return i.formatDistance("xDays",1,s);if(c<Le){var I=Math.round(c/gt);return i.formatDistance("xDays",I,s)}else if(c<En)return b=Math.round(c/Le),i.formatDistance("aboutXMonths",b,s)}if(b=Va(u,d),b<12){var C=Math.round(c/Le);return i.formatDistance("xMonths",C,s)}else{var p=b%12,S=Math.floor(b/12);return p<3?i.formatDistance("aboutXYears",S,s):p<9?i.formatDistance("overXYears",S,s):i.formatDistance("almostXYears",S+1,s)}}function Ne(a,e){return se(1,arguments),Nn(a,Date.now(),e)}function Rn(a){var de,fe;let e,t,n,r=a[1]?Ne(new Date(a[1]))+" ago":"",l,i,o,s,d,u=(((de=a[2])==null?void 0:de.name)??"Bot")+"",f,m,c,b,T,I=a[0]?Ne(new Date(a[0]))+" ago":"",C,p,S,y,R,F=(((fe=a[3])==null?void 0:fe.name)??"Bot")+"",K,Y;return s=new at({props:{size:"xs",class:"mr-1"}}),y=new at({props:{size:"xs",class:"mr-1"}}),{c(){e=E("div"),t=E("div"),n=V("Updated "),l=V(r),i=V(` by
		`),o=E("span"),O(s.$$.fragment),d=U(),f=V(u),m=U(),c=E("div"),b=E("div"),T=V("Created "),C=V(I),p=V(` by
		`),S=E("span"),O(y.$$.fragment),R=U(),K=V(F),this.h()},l(_){e=N(_,"DIV",{class:!0});var B=W(e);t=N(B,"DIV",{class:!0});var P=W(t);n=L(P,"Updated "),l=L(P,r),i=L(P,` by
		`),o=N(P,"SPAN",{class:!0});var h=W(o);z(s.$$.fragment,h),d=X(h),f=L(h,u),h.forEach(g),P.forEach(g),B.forEach(g),m=X(_),c=N(_,"DIV",{class:!0});var ee=W(c);b=N(ee,"DIV",{class:!0});var te=W(b);T=L(te,"Created "),C=L(te,I),p=L(te,` by
		`),S=N(te,"SPAN",{class:!0});var he=W(S);z(y.$$.fragment,he),R=X(he),K=L(he,F),he.forEach(g),te.forEach(g),ee.forEach(g),this.h()},h(){q(o,"class","ml-1 flex items-center"),q(t,"class","flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 justify-end"),q(e,"class","mb-3"),q(S,"class","ml-1 flex items-center"),q(b,"class","flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400 justify-end"),q(c,"class","mb-6")},m(_,B){M(_,e,B),k(e,t),k(t,n),k(t,l),k(t,i),k(t,o),j(s,o,null),k(o,d),k(o,f),M(_,m,B),M(_,c,B),k(c,b),k(b,T),k(b,C),k(b,p),k(b,S),j(y,S,null),k(S,R),k(S,K),Y=!0},p(_,[B]){var P,h;(!Y||B&2)&&r!==(r=_[1]?Ne(new Date(_[1]))+" ago":"")&&ne(l,r),(!Y||B&4)&&u!==(u=(((P=_[2])==null?void 0:P.name)??"Bot")+"")&&ne(f,u),(!Y||B&1)&&I!==(I=_[0]?Ne(new Date(_[0]))+" ago":"")&&ne(C,I),(!Y||B&8)&&F!==(F=(((h=_[3])==null?void 0:h.name)??"Bot")+"")&&ne(K,F)},i(_){Y||(v(s.$$.fragment,_),v(y.$$.fragment,_),Y=!0)},o(_){D(s.$$.fragment,_),D(y.$$.fragment,_),Y=!1},d(_){_&&(g(e),g(m),g(c)),x(s),x(y)}}}function An(a,e,t){let n,r,l,{created_by_id:i}=e,{created_at:o}=e,{updated_by_id:s}=e,{updated_at:d}=e;const{store:{users:u}}=Me;return J(a,u,f=>t(7,l=f)),a.$$set=f=>{"created_by_id"in f&&t(5,i=f.created_by_id),"created_at"in f&&t(0,o=f.created_at),"updated_by_id"in f&&t(6,s=f.updated_by_id),"updated_at"in f&&t(1,d=f.updated_at)},a.$$.update=()=>{a.$$.dirty&160&&t(3,n=i?l.find(f=>f.id===i):null),a.$$.dirty&192&&t(2,r=s?l.find(f=>f.id===s):null)},[o,d,r,n,u,i,s,l]}class Wn extends le{constructor(e){super(),ie(this,e,An,Rn,re,{created_by_id:5,created_at:0,updated_by_id:6,updated_at:1})}}function _t(a){var ee,te,he,Be,He,Ge;let e,t,n,r,l,i,o,s,d,u,f,m,c,b,T,I,C,p,S,y,R,F;function K(w){a[15](w)}let Y={type:"text",name:"role-name",label:"Name",placeholder:"Name",disabled:a[3],isInvalid:((ee=a[4])==null?void 0:ee.name)!==void 0,helperMessage:(he=(te=a[4])==null?void 0:te.name)==null?void 0:he.message,novalidate:!0,required:!0};a[2].name!==void 0&&(Y.value=a[2].name),n=new Kt({props:Y}),_e.push(()=>pe(n,"value",K)),n.$on("input",a[12]);function de(w){a[16](w)}let fe={name:"role-sort-index",label:"Sort Index",disabled:a[3],isInvalid:((Be=a[4])==null?void 0:Be.sort_index)!==void 0,helperMessage:(Ge=(He=a[4])==null?void 0:He.sort_index)==null?void 0:Ge.message,novalidate:!0,required:!0};a[2].sort_index!==void 0&&(fe.value=a[2].sort_index),i=new Da({props:fe}),_e.push(()=>pe(i,"value",de)),i.$on("input",a[12]);function _(w){a[17](w)}let B={name:"role-group",label:"Role Group"};a[2].group_id!==void 0&&(B.value=a[2].group_id),d=new Ea({props:B}),_e.push(()=>pe(d,"value",_));let P=a[1]==="update"&&bt(a),h=a[1]!=="add"&&pt(a);return C=new Fe({props:{type:"button",size:"xs",class:"mr-2",color:"alternative",disabled:a[3],$$slots:{default:[On]},$$scope:{ctx:a}}}),C.$on("click",a[11]),S=new Fe({props:{type:"button",size:"xs",disabled:a[3],$$slots:{default:[xn]},$$scope:{ctx:a}}}),S.$on("click",a[13]),{c(){e=E("form"),t=E("div"),O(n.$$.fragment),l=U(),O(i.$$.fragment),s=U(),O(d.$$.fragment),f=U(),P&&P.c(),m=U(),c=E("div"),b=E("div"),h&&h.c(),T=U(),I=E("div"),O(C.$$.fragment),p=U(),O(S.$$.fragment),this.h()},l(w){e=N(w,"FORM",{class:!0});var A=W(e);t=N(A,"DIV",{class:!0});var G=W(t);z(n.$$.fragment,G),l=X(G),z(i.$$.fragment,G),s=X(G),z(d.$$.fragment,G),f=X(G),P&&P.l(G),G.forEach(g),m=X(A),c=N(A,"DIV",{class:!0});var oe=W(c);b=N(oe,"DIV",{});var Se=W(b);h&&h.l(Se),Se.forEach(g),T=X(oe),I=N(oe,"DIV",{});var ce=W(I);z(C.$$.fragment,ce),p=X(ce),z(S.$$.fragment,ce),ce.forEach(g),oe.forEach(g),A.forEach(g),this.h()},h(){q(t,"class","space-y-6"),q(c,"class","flex justify-between"),e.noValidate=!0,q(e,"class","form mb-0 flex flex-col justify-between svelte-b6q6p2")},m(w,A){M(w,e,A),k(e,t),j(n,t,null),k(t,l),j(i,t,null),k(t,s),j(d,t,null),k(t,f),P&&P.m(t,null),k(e,m),k(e,c),k(c,b),h&&h.m(b,null),k(c,T),k(c,I),j(C,I,null),k(I,p),j(S,I,null),y=!0,R||(F=Ie(e,"submit",Ot(a[14])),R=!0)},p(w,A){var Je,Qe,Ke,Ze,$e,et;const G={};A&8&&(G.disabled=w[3]),A&16&&(G.isInvalid=((Je=w[4])==null?void 0:Je.name)!==void 0),A&16&&(G.helperMessage=(Ke=(Qe=w[4])==null?void 0:Qe.name)==null?void 0:Ke.message),!r&&A&4&&(r=!0,G.value=w[2].name,be(()=>r=!1)),n.$set(G);const oe={};A&8&&(oe.disabled=w[3]),A&16&&(oe.isInvalid=((Ze=w[4])==null?void 0:Ze.sort_index)!==void 0),A&16&&(oe.helperMessage=(et=($e=w[4])==null?void 0:$e.sort_index)==null?void 0:et.message),!o&&A&4&&(o=!0,oe.value=w[2].sort_index,be(()=>o=!1)),i.$set(oe);const Se={};!u&&A&4&&(u=!0,Se.value=w[2].group_id,be(()=>u=!1)),d.$set(Se),w[1]==="update"?P?(P.p(w,A),A&2&&v(P,1)):(P=bt(w),P.c(),v(P,1),P.m(t,null)):P&&(ve(),D(P,1,1,()=>{P=null}),ye()),w[1]!=="add"?h?(h.p(w,A),A&2&&v(h,1)):(h=pt(w),h.c(),v(h,1),h.m(b,null)):h&&(ve(),D(h,1,1,()=>{h=null}),ye());const ce={};A&8&&(ce.disabled=w[3]),A&134217728&&(ce.$$scope={dirty:A,ctx:w}),C.$set(ce);const ze={};A&8&&(ze.disabled=w[3]),A&134217738&&(ze.$$scope={dirty:A,ctx:w}),S.$set(ze)},i(w){y||(v(n.$$.fragment,w),v(i.$$.fragment,w),v(d.$$.fragment,w),v(P),v(h),v(C.$$.fragment,w),v(S.$$.fragment,w),y=!0)},o(w){D(n.$$.fragment,w),D(i.$$.fragment,w),D(d.$$.fragment,w),D(P),D(h),D(C.$$.fragment,w),D(S.$$.fragment,w),y=!1},d(w){w&&g(e),x(n),x(i),x(d),P&&P.d(),h&&h.d(),x(C),x(S),R=!1,F()}}}function bt(a){var n,r,l,i;let e,t;return e=new Wn({props:{created_at:(n=a[0])==null?void 0:n.created_at,created_by_id:(r=a[0])==null?void 0:r.created_by_id,updated_at:(l=a[0])==null?void 0:l.updated_at,updated_by_id:(i=a[0])==null?void 0:i.updated_by_id}}),{c(){O(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,s){j(e,o,s),t=!0},p(o,s){var u,f,m,c;const d={};s&1&&(d.created_at=(u=o[0])==null?void 0:u.created_at),s&1&&(d.created_by_id=(f=o[0])==null?void 0:f.created_by_id),s&1&&(d.updated_at=(m=o[0])==null?void 0:m.updated_at),s&1&&(d.updated_by_id=(c=o[0])==null?void 0:c.updated_by_id),e.$set(d)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){x(e,o)}}}function pt(a){let e,t;return e=new Fe({props:{type:"button",size:"xs",color:"red",disabled:a[3],$$slots:{default:[Fn]},$$scope:{ctx:a}}}),e.$on("click",a[18]),{c(){O(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,r){j(e,n,r),t=!0},p(n,r){const l={};r&8&&(l.disabled=n[3]),r&134217728&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function Fn(a){let e;return{c(){e=V("Delete")},l(t){e=L(t,"Delete")},m(t,n){M(t,e,n)},d(t){t&&g(e)}}}function On(a){let e;return{c(){e=V("Reset")},l(t){e=L(t,"Reset")},m(t,n){M(t,e,n)},d(t){t&&g(e)}}}function zn(a){let e=a[1]==="add"?"Add":"Update",t;return{c(){t=V(e)},l(n){t=L(n,e)},m(n,r){M(n,t,r)},p(n,r){r&2&&e!==(e=n[1]==="add"?"Add":"Update")&&ne(t,e)},d(n){n&&g(t)}}}function jn(a){let e;return{c(){e=V("...")},l(t){e=L(t,"...")},m(t,n){M(t,e,n)},p:ge,d(t){t&&g(e)}}}function xn(a){let e;function t(l,i){return l[3]?jn:zn}let n=t(a),r=n(a);return{c(){r.c(),e=$()},l(l){r.l(l),e=$()},m(l,i){r.m(l,i),M(l,e,i)},p(l,i){n===(n=t(l))&&r?r.p(l,i):(r.d(1),r=n(l),r&&(r.c(),r.m(e.parentNode,e)))},d(l){l&&g(e),r.d(l)}}}function Vn(a){let e,t,n=a[2]&&_t(a);return{c(){n&&n.c(),e=$()},l(r){n&&n.l(r),e=$()},m(r,l){n&&n.m(r,l),M(r,e,l),t=!0},p(r,[l]){r[2]?n?(n.p(r,l),l&4&&v(n,1)):(n=_t(r),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(ve(),D(n,1,1,()=>{n=null}),ye())},i(r){t||(v(n),t=!0)},o(r){D(n),t=!1},d(r){r&&g(e),n&&n.d(r)}}}function Ln(a,e,t){let n,r,l,i,o,s;const{loading:d,targetRole:u,model:f,action:m,addRole:c,updateRole:b,deleteRole:T}=Et();J(a,d,h=>t(3,o=h)),J(a,u,h=>t(0,n=h)),J(a,f,h=>t(2,l=h)),J(a,m,h=>t(1,r=h));const{closeDrawer:I}=Ye(),{store:{roles:C}}=Me,{errors:p,submitted:S,validate:y,reset:R}=Ht(Gt({name:Jt().required("Name is required").label("Name"),sort_index:Qt().required().label("Sort Index")}));J(a,p,h=>t(4,s=h)),J(a,S,h=>t(19,i=h));const F=()=>{n&&f.set({name:n.name,sort_index:(n==null?void 0:n.sort_index)??0,group_id:`${n==null?void 0:n.role_group_id}`??"0"}),S.set(!1),R()},K=async()=>{if(!i)return;const{name:h,sort_index:ee}=l;await y({name:h,sort_index:ee})},Y=async()=>{try{d.set(!0),S.set(!0);const{name:h,sort_index:ee,group_id:te}=l;switch(await y({name:h,sort_index:ee}),r){case"add":await c({...n,name:h,sort_index:ee,role_group_id:parseInt(te,10)});break;case"update":await b({...n,name:h,sort_index:ee,role_group_id:parseInt(te,10)});break;case"delete":n!=null&&n.id&&await T(n.id);break;default:}await C.reload(),I()}catch(h){console.log("submit failed",h)}finally{d.set(!1)}};u.subscribe(h=>{h&&f.set({name:h==null?void 0:h.name,sort_index:(h==null?void 0:h.sort_index)??0,group_id:`${h==null?void 0:h.role_group_id}`??"0"})});function de(h){ue.call(this,a,h)}function fe(h){a.$$.not_equal(l.name,h)&&(l.name=h,f.set(l))}function _(h){a.$$.not_equal(l.sort_index,h)&&(l.sort_index=h,f.set(l))}function B(h){a.$$.not_equal(l.group_id,h)&&(l.group_id=h,f.set(l))}return[n,r,l,o,s,d,u,f,m,p,S,F,K,Y,de,fe,_,B,()=>{m.set("delete"),Y()}]}class qn extends le{constructor(e){super(),ie(this,e,Ln,Vn,re,{})}}function Un(a){let e,t,n="Role",r,l,i,o,s;return l=new Ut({props:{class:"mb-4 dark:text-white"}}),l.$on("click",a[3]),o=new qn({}),{c(){e=E("div"),t=E("h5"),t.textContent=n,r=U(),O(l.$$.fragment),i=U(),O(o.$$.fragment),this.h()},l(d){e=N(d,"DIV",{class:!0});var u=W(e);t=N(u,"H5",{id:!0,class:!0,"data-svelte-h":!0}),Xe(t)!=="svelte-1mqrwvg"&&(t.textContent=n),r=X(u),z(l.$$.fragment,u),u.forEach(g),i=X(d),z(o.$$.fragment,d),this.h()},h(){q(t,"id","drawer-label"),q(t,"class","inline-flex items-center mb-6 text-base font-semibold text-gray-500 uppercase dark:text-gray-400"),q(e,"class","flex items-center")},m(d,u){M(d,e,u),k(e,t),k(e,r),j(l,e,null),M(d,i,u),j(o,d,u),s=!0},p:ge,i(d){s||(v(l.$$.fragment,d),v(o.$$.fragment,d),s=!0)},o(d){D(l.$$.fragment,d),D(o.$$.fragment,d),s=!1},d(d){d&&(g(e),g(i)),x(l),x(o,d)}}}function Xn(a){let e,t,n;function r(i){a[4](i)}let l={transitionType:"fly",transitionParams:a[1],id:"sidebar4",placement:"right",class:"mt-0",$$slots:{default:[Un]},$$scope:{ctx:a}};return a[0]!==void 0&&(l.hidden=a[0]),e=new Yt({props:l}),_e.push(()=>pe(e,"hidden",r)),{c(){O(e.$$.fragment)},l(i){z(e.$$.fragment,i)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const s={};o&32&&(s.$$scope={dirty:o,ctx:i}),!t&&o&1&&(t=!0,s.hidden=i[0],be(()=>t=!1)),e.$set(s)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){D(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Yn(a,e,t){let n,r={x:320,duration:200,easing:Xt};const{drawerClosed:l,closeDrawer:i}=Ye();J(a,l,s=>t(0,n=s));function o(s){n=s,l.set(n)}return[n,r,l,i,o]}class Bn extends le{constructor(e){super(),ie(this,e,Yn,Xn,re,{})}}function vt(a,e,t){const n=a.slice();return n[2]=e[t],n}function yt(a){let e,t,n=We(a[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=wt(vt(a,n,i));const l=i=>D(r[i],1,1,()=>{r[i]=null});return{c(){e=E("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=N(i,"DIV",{class:!0});var o=W(e);for(let s=0;s<r.length;s+=1)r[s].l(o);o.forEach(g),this.h()},h(){q(e,"class","flex flex-col space-y-3")},m(i,o){M(i,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);t=!0},p(i,o){if(o&1){n=We(i[0]);let s;for(s=0;s<n.length;s+=1){const d=vt(i,n,s);r[s]?(r[s].p(d,o),v(r[s],1)):(r[s]=wt(d),r[s].c(),v(r[s],1),r[s].m(e,null))}for(ve(),s=n.length;s<r.length;s+=1)l(s);ye()}},i(i){if(!t){for(let o=0;o<n.length;o+=1)v(r[o]);t=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);t=!1},d(i){i&&g(e),kt(r,i)}}}function wt(a){let e,t;return e=new pa({props:{title:a[2].name,group_id:a[2].id}}),{c(){O(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,r){j(e,n,r),t=!0},p(n,r){const l={};r&1&&(l.title=n[2].name),r&1&&(l.group_id=n[2].id),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function Hn(a){let e,t,n,r=a[0]&&a[0].length>0&&yt(a);return t=new Bn({}),{c(){r&&r.c(),e=U(),O(t.$$.fragment)},l(l){r&&r.l(l),e=X(l),z(t.$$.fragment,l)},m(l,i){r&&r.m(l,i),M(l,e,i),j(t,l,i),n=!0},p(l,[i]){l[0]&&l[0].length>0?r?(r.p(l,i),i&1&&v(r,1)):(r=yt(l),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(ve(),D(r,1,1,()=>{r=null}),ye())},i(l){n||(v(r),v(t.$$.fragment,l),n=!0)},o(l){D(r),D(t.$$.fragment,l),n=!1},d(l){l&&g(e),r&&r.d(l),x(t,l)}}}function Gn(a,e,t){let n;const{store:{roleGroups:r}}=Me;return J(a,r,l=>t(0,n=l)),[n,r]}class Jn extends le{constructor(e){super(),ie(this,e,Gn,Hn,re,{})}}function Qn(a){let e;return{c(){e=V(`The navbar component can be used to show a list of navigation links positioned on the top side
		of your page based on multiple layouts, sizes, and dropdowns`)},l(t){e=L(t,`The navbar component can be used to show a list of navigation links positioned on the top side
		of your page based on multiple layouts, sizes, and dropdowns`)},m(t,n){M(t,e,n)},d(t){t&&g(e)}}}function Kn(a){let e;return{c(){e=V(`Get started with the responsive navbar component from Flowbite to quickly set up a navigation
		menu for your website and set up the logo, list of pages, CTA button, search input, user profile
		options with a dropdown, and more.`)},l(t){e=L(t,`Get started with the responsive navbar component from Flowbite to quickly set up a navigation
		menu for your website and set up the logo, list of pages, CTA button, search input, user profile
		options with a dropdown, and more.`)},m(t,n){M(t,e,n)},d(t){t&&g(e)}}}function Zn(a){let e,t,n="Roles",r,l,i,o,s,d,u,f;return l=new st({props:{class:"text-lg text-gray-600 dark:text-gray-400",$$slots:{default:[Qn]},$$scope:{ctx:a}}}),s=new st({props:{$$slots:{default:[Kn]},$$scope:{ctx:a}}}),u=new Jn({}),{c(){e=E("div"),t=E("h1"),t.textContent=n,r=U(),O(l.$$.fragment),i=U(),o=E("div"),O(s.$$.fragment),d=U(),O(u.$$.fragment),this.h()},l(m){e=N(m,"DIV",{class:!0});var c=W(e);t=N(c,"H1",{class:!0,"data-svelte-h":!0}),Xe(t)!=="svelte-1pq2ohe"&&(t.textContent=n),r=X(c),z(l.$$.fragment,c),c.forEach(g),i=X(m),o=N(m,"DIV",{class:!0});var b=W(o);z(s.$$.fragment,b),b.forEach(g),d=X(m),z(u.$$.fragment,m),this.h()},h(){q(t,"class","text-3xl w-full inline-block mb-2 font-extrabold tracking-tight text-gray-900 dark:text-white"),q(e,"class","pb-8 pt-8"),q(o,"class","pb-8")},m(m,c){M(m,e,c),k(e,t),k(e,r),j(l,e,null),M(m,i,c),M(m,o,c),j(s,o,null),M(m,d,c),j(u,m,c),f=!0},p(m,[c]){const b={};c&1&&(b.$$scope={dirty:c,ctx:m}),l.$set(b);const T={};c&1&&(T.$$scope={dirty:c,ctx:m}),s.$set(T)},i(m){f||(v(l.$$.fragment,m),v(s.$$.fragment,m),v(u.$$.fragment,m),f=!0)},o(m){D(l.$$.fragment,m),D(s.$$.fragment,m),D(u.$$.fragment,m),f=!1},d(m){m&&(g(e),g(i),g(o),g(d)),x(l),x(s),x(u,m)}}}class cr extends le{constructor(e){super(),ie(this,e,null,Zn,re,{})}}export{cr as component};
