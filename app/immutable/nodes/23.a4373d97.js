import{s as he,I as x,p as fe,f as S,a as j,g as q,w as pe,c as A,h as U,d as m,j as C,i as B,y as g,z as Ie,a0 as Pe,S as ce,l as G,m as J,H as ye}from"../chunks/scheduler.5ee162ca.js";import{S as _e,i as ve,b as M,d as T,m as V,a as D,t as E,e as R,h as me}from"../chunks/index.56c32700.js";import{w as Se}from"../chunks/index.d5413678.js";import{B as $e}from"../chunks/Button.b6f667b3.js";import{T as qe}from"../chunks/Toggle.c8fecda7.js";import{f as Ce,c as Me,a as ge,e as Te,T as we}from"../chunks/TextField.8c39e89a.js";import{a as Ve}from"../chunks/auth.state.d295d359.js";import{A as De}from"../chunks/AuthSection.3e7849da.js";import{g as Ee}from"../chunks/navigation.3603624e.js";function Re(t){let e;return{c(){e=G("Show password")},l(a){e=J(a,"Show password")},m(a,n){B(a,e,n)},d(a){a&&m(e)}}}function ze(t){let e;return{c(){e=G("Reset")},l(a){e=J(a,"Reset")},m(a,n){B(a,e,n)},d(a){a&&m(e)}}}function Fe(t){let e;return{c(){e=G("Submit")},l(a){e=J(a,"Submit")},m(a,n){B(a,e,n)},d(a){a&&m(e)}}}function He(t){var X,Z,ee,te,se,ae;let e,a="Reset Password",n,r,u,i,L,z,f,d,F,P,w,p,h,_,Y='Not registered? <a href="/auth/sign-up" class="text-primary-700 hover:underline dark:text-primary-500">Create account</a>',O,$,c,N,l,k,y,K;function be(s){t[11](s)}let Q={type:t[1],name:"password1",label:"Password",placeholder:"Password",disabled:t[3],isInvalid:((X=t[4])==null?void 0:X.password1)!==void 0,helperMessage:(ee=(Z=t[4])==null?void 0:Z.password1)==null?void 0:ee.message,novalidate:!0,required:!0};t[2].password1!==void 0&&(Q.value=t[2].password1),i=new we({props:Q}),fe.push(()=>me(i,"value",be)),i.$on("input",t[9]);function ke(s){t[12](s)}let W={type:t[1],name:"password2",label:"Re-type your password",placeholder:"Password",disabled:t[3],isInvalid:((te=t[4])==null?void 0:te.password2)!==void 0,helperMessage:(ae=(se=t[4])==null?void 0:se.password2)==null?void 0:ae.message,novalidate:!0,required:!0};return t[2].password2!==void 0&&(W.value=t[2].password2),d=new we({props:W}),fe.push(()=>me(d,"value",ke)),d.$on("input",t[9]),p=new qe({props:{checked:t[0],size:"small",$$slots:{default:[Re]},$$scope:{ctx:t}}}),p.$on("click",t[13]),c=new $e({props:{type:"button",class:"mr-3",color:"alternative",disabled:t[3],$$slots:{default:[ze]},$$scope:{ctx:t}}}),c.$on("click",t[8]),l=new $e({props:{type:"button",$$slots:{default:[Fe]},$$scope:{ctx:t}}}),l.$on("click",t[10]),{c(){e=S("h1"),e.textContent=a,n=j(),r=S("form"),u=S("div"),M(i.$$.fragment),z=j(),f=S("div"),M(d.$$.fragment),P=j(),w=S("div"),M(p.$$.fragment),h=j(),_=S("div"),_.innerHTML=Y,O=j(),$=S("div"),M(c.$$.fragment),N=j(),M(l.$$.fragment),this.h()},l(s){e=q(s,"H1",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-rj19s"&&(e.textContent=a),n=A(s),r=q(s,"FORM",{class:!0});var o=U(r);u=q(o,"DIV",{class:!0});var v=U(u);T(i.$$.fragment,v),v.forEach(m),z=A(o),f=q(o,"DIV",{class:!0});var b=U(f);T(d.$$.fragment,b),b.forEach(m),P=A(o),w=q(o,"DIV",{class:!0});var H=U(w);T(p.$$.fragment,H),H.forEach(m),h=A(o),_=q(o,"DIV",{class:!0,"data-svelte-h":!0}),pe(_)!=="svelte-1rrzm7r"&&(_.innerHTML=Y),O=A(o),$=q(o,"DIV",{class:!0});var I=U($);T(c.$$.fragment,I),N=A(I),T(l.$$.fragment,I),I.forEach(m),o.forEach(m),this.h()},h(){C(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),C(u,"class","space-y-2"),C(f,"class","space-y-2"),C(w,"class","flex items-start"),C(_,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),C($,"class","flex justify-end"),C(r,"class","space-y-4 md:space-y-6"),r.noValidate=!0},m(s,o){B(s,e,o),B(s,n,o),B(s,r,o),g(r,u),V(i,u,null),g(r,z),g(r,f),V(d,f,null),g(r,P),g(r,w),V(p,w,null),g(r,h),g(r,_),g(r,O),g(r,$),V(c,$,null),g($,N),V(l,$,null),k=!0,y||(K=Ie(r,"submit",Pe(t[10])),y=!0)},p(s,o){var ne,oe,le,ie,de,ue;const v={};o&2&&(v.type=s[1]),o&8&&(v.disabled=s[3]),o&16&&(v.isInvalid=((ne=s[4])==null?void 0:ne.password1)!==void 0),o&16&&(v.helperMessage=(le=(oe=s[4])==null?void 0:oe.password1)==null?void 0:le.message),!L&&o&4&&(L=!0,v.value=s[2].password1,ce(()=>L=!1)),i.$set(v);const b={};o&2&&(b.type=s[1]),o&8&&(b.disabled=s[3]),o&16&&(b.isInvalid=((ie=s[4])==null?void 0:ie.password2)!==void 0),o&16&&(b.helperMessage=(ue=(de=s[4])==null?void 0:de.password2)==null?void 0:ue.message),!F&&o&4&&(F=!0,b.value=s[2].password2,ce(()=>F=!1)),d.$set(b);const H={};o&1&&(H.checked=s[0]),o&524288&&(H.$$scope={dirty:o,ctx:s}),p.$set(H);const I={};o&8&&(I.disabled=s[3]),o&524288&&(I.$$scope={dirty:o,ctx:s}),c.$set(I);const re={};o&524288&&(re.$$scope={dirty:o,ctx:s}),l.$set(re)},i(s){k||(D(i.$$.fragment,s),D(d.$$.fragment,s),D(p.$$.fragment,s),D(c.$$.fragment,s),D(l.$$.fragment,s),k=!0)},o(s){E(i.$$.fragment,s),E(d.$$.fragment,s),E(p.$$.fragment,s),E(c.$$.fragment,s),E(l.$$.fragment,s),k=!1},d(s){s&&(m(e),m(n),m(r)),R(i),R(d),R(p),R(c),R(l),y=!1,K()}}}function je(t){let e,a;return e=new De({props:{$$slots:{default:[He]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},l(n){T(e.$$.fragment,n)},m(n,r){V(e,n,r),a=!0},p(n,[r]){const u={};r&524319&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){E(e.$$.fragment,n),a=!1},d(n){R(e,n)}}}function Ae(t,e,a){let n,r,u,i;const{actions:{resetPassword:L},store:{loading:z}}=Ve;x(t,z,l=>a(3,u=l));const f=Se({password1:"",password2:""});x(t,f,l=>a(2,r=l));const d=l=>`Your password must have at least 1 ${l} character`,{errors:F,submitted:P,validate:w,reset:p}=Ce(Me({password1:ge().required("Please enter a password").min(8,"Password must have at least 8 characters").matches(/[0-9]/,d("digit")).matches(/[a-z]/,d("lowercase")),password2:ge().required("Please re-type your password").oneOf([Te("password1")],"Passwords does not match")}));x(t,F,l=>a(4,i=l));let h=!1;const _=()=>{f.set({password1:"",password2:""}),P.set(!1),a(0,h=!1),p()},Y=async()=>{if(!P)return;const{password1:l,password2:k}=r;await w({password1:l,password2:k})},O=async()=>{try{P.set(!0);const{password1:l,password2:k}=r;await w({password1:l,password2:k});const y=await L(r.password1);y!=null&&y.success&&await Ee("/auth/sign-in")}catch(l){console.log("submit failed",l)}};function $(l){t.$$.not_equal(r.password1,l)&&(r.password1=l,f.set(r))}function c(l){t.$$.not_equal(r.password2,l)&&(r.password2=l,f.set(r))}const N=()=>{a(0,h=!h)};return t.$$.update=()=>{t.$$.dirty&1&&a(1,n=h?"text":"password")},[h,n,r,u,i,z,f,F,_,Y,O,$,c,N]}class Be extends _e{constructor(e){super(),ve(this,e,Ae,je,he,{})}}function Le(t){let e,a;return e=new Be({}),{c(){M(e.$$.fragment)},l(n){T(e.$$.fragment,n)},m(n,r){V(e,n,r),a=!0},p:ye,i(n){a||(D(e.$$.fragment,n),a=!0)},o(n){E(e.$$.fragment,n),a=!1},d(n){R(e,n)}}}class We extends _e{constructor(e){super(),ve(this,e,null,Le,he,{})}}export{We as component};
