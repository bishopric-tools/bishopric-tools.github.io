import{s as O,p as Q,M as W,l as Z,m as ee,i as D,n as ge,d as _,e as B,z as C,f as A,a as L,g as E,h as J,c as q,j as F,x as N,E as be,a0 as he,C as de,y as R,a1 as ke}from"../chunks/scheduler.8e28fde2.js";import{S as j,i as x,f as X,b as g,d as b,m as h,a as m,t as p,e as k,g as me,c as pe}from"../chunks/index.7310de3c.js";import{D as re,a as se,b as we,c as ve}from"../chunks/DataTable.5e58b13c.js";import{d as De,r as $e}from"../chunks/rbac.state.809eeacf.js";import{w as V}from"../chunks/index.e56d8ce4.js";import{C as Ce,c as ye}from"../chunks/CloseButton.1a9c47d6.js";import{D as Ue}from"../chunks/Drawer.adfaabd7.js";import{B as fe}from"../chunks/Button.483fa7bd.js";import{f as Te,c as Se,a as Pe,d as Ne,T as Ie}from"../chunks/TextField.da583b18.js";import{C as Ae}from"../chunks/Checkbox.17327d96.js";import{P as Le,a as Ee}from"../chunks/PageLayout.e01325d0.js";let v=null;const qe=()=>(v={drawerClosed:V(!0),focusedUser:V(null),closeDrawer:()=>{var n,e;v&&((e=(n=v==null?void 0:v.drawerClosed)==null?void 0:n.set)==null||e.call(n,!0))},openDrawer:()=>{var n,e;v&&((e=(n=v==null?void 0:v.drawerClosed)==null?void 0:n.set)==null||e.call(n,!1))}},v),le=()=>v||qe(),Fe={name:"",is_active:!1};let Y=null;const Be=()=>(Y={loading:V(!1),model:V(Fe),targetUser:V(null),updateUser:async n=>{try{await De.bulkUpdate([n])}catch(e){console.log("submit failed",e)}}},Y),_e=()=>Y===null?Be():Y;function Me(n){let e;return{c(){e=Z(n[1])},l(a){e=ee(a,n[1])},m(a,t){D(a,e,t)},p(a,t){t&2&&ge(e,a[1])},d(a){a&&_(e)}}}function Re(n){let e,a,t;function s(r){n[2](r)}let l={$$slots:{default:[Me]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.checked=n[0]),e=new Ae({props:l}),Q.push(()=>X(e,"checked",s)),{c(){g(e.$$.fragment)},l(r){b(e.$$.fragment,r)},m(r,o){h(e,r,o),t=!0},p(r,[o]){const c={};o&10&&(c.$$scope={dirty:o,ctx:r}),!a&&o&1&&(a=!0,c.checked=r[0],W(()=>a=!1)),e.$set(c)},i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){p(e.$$.fragment,r),t=!1},d(r){k(e,r)}}}function Ve(n,e,a){let{label:t=""}=e,{checked:s=!1}=e;function l(r){s=r,a(0,s)}return n.$$set=r=>{"label"in r&&a(1,t=r.label),"checked"in r&&a(0,s=r.checked)},[s,t,l]}class Oe extends j{constructor(e){super(),x(this,e,Ve,Re,O,{label:1,checked:0})}}function ue(n){var H,K,G;let e,a,t,s,l,r,o,c,f,u,P,w,y,U,T;function I(i){n[11](i)}let $={type:"text",name:"name",label:"Name",placeholder:"Name",disabled:n[1],isInvalid:((H=n[2])==null?void 0:H.name)!==void 0,helperMessage:(G=(K=n[2])==null?void 0:K.name)==null?void 0:G.message,novalidate:!0,required:!0};n[0].name!==void 0&&($.value=n[0].name),t=new Ie({props:$}),Q.push(()=>X(t,"value",I)),t.$on("input",n[9]);function te(i){n[12](i)}let z={label:"Is Active"};return n[0].is_active!==void 0&&(z.checked=n[0].is_active),o=new Oe({props:z}),Q.push(()=>X(o,"checked",te)),u=new fe({props:{type:"button",class:"mr-3",color:"alternative",disabled:n[1],$$slots:{default:[je]},$$scope:{ctx:n}}}),u.$on("click",n[8]),w=new fe({props:{type:"submit",class:"",disabled:n[1],$$slots:{default:[He]},$$scope:{ctx:n}}}),{c(){e=A("form"),a=A("div"),g(t.$$.fragment),l=L(),r=A("div"),g(o.$$.fragment),f=L(),g(u.$$.fragment),P=L(),g(w.$$.fragment),this.h()},l(i){e=E(i,"FORM",{class:!0});var d=J(e);a=E(d,"DIV",{class:!0});var S=J(a);b(t.$$.fragment,S),S.forEach(_),l=q(d),r=E(d,"DIV",{class:!0});var M=J(r);b(o.$$.fragment,M),M.forEach(_),f=q(d),b(u.$$.fragment,d),P=q(d),b(w.$$.fragment,d),d.forEach(_),this.h()},h(){F(a,"class","mb-6"),F(r,"class","mb-6"),e.noValidate=!0,F(e,"class","mb-6")},m(i,d){D(i,e,d),N(e,a),h(t,a,null),N(e,l),N(e,r),h(o,r,null),N(e,f),h(u,e,null),N(e,P),h(w,e,null),y=!0,U||(T=be(e,"submit",he(n[10])),U=!0)},p(i,d){var ie,oe,ce;const S={};d&2&&(S.disabled=i[1]),d&4&&(S.isInvalid=((ie=i[2])==null?void 0:ie.name)!==void 0),d&4&&(S.helperMessage=(ce=(oe=i[2])==null?void 0:oe.name)==null?void 0:ce.message),!s&&d&1&&(s=!0,S.value=i[0].name,W(()=>s=!1)),t.$set(S);const M={};!c&&d&1&&(c=!0,M.checked=i[0].is_active,W(()=>c=!1)),o.$set(M);const ae={};d&2&&(ae.disabled=i[1]),d&1048576&&(ae.$$scope={dirty:d,ctx:i}),u.$set(ae);const ne={};d&2&&(ne.disabled=i[1]),d&1048578&&(ne.$$scope={dirty:d,ctx:i}),w.$set(ne)},i(i){y||(m(t.$$.fragment,i),m(o.$$.fragment,i),m(u.$$.fragment,i),m(w.$$.fragment,i),y=!0)},o(i){p(t.$$.fragment,i),p(o.$$.fragment,i),p(u.$$.fragment,i),p(w.$$.fragment,i),y=!1},d(i){i&&_(e),k(t),k(o),k(u),k(w),U=!1,T()}}}function je(n){let e;return{c(){e=Z("Reset")},l(a){e=ee(a,"Reset")},m(a,t){D(a,e,t)},d(a){a&&_(e)}}}function xe(n){let e;return{c(){e=Z("Update")},l(a){e=ee(a,"Update")},m(a,t){D(a,e,t)},d(a){a&&_(e)}}}function ze(n){let e;return{c(){e=Z("...")},l(a){e=ee(a,"...")},m(a,t){D(a,e,t)},d(a){a&&_(e)}}}function He(n){let e;function a(l,r){return l[1]?ze:xe}let t=a(n),s=t(n);return{c(){s.c(),e=B()},l(l){s.l(l),e=B()},m(l,r){s.m(l,r),D(l,e,r)},p(l,r){t!==(t=a(l))&&(s.d(1),s=t(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){l&&_(e),s.d(l)}}}function Ke(n){let e,a,t=n[0]&&ue(n);return{c(){t&&t.c(),e=B()},l(s){t&&t.l(s),e=B()},m(s,l){t&&t.m(s,l),D(s,e,l),a=!0},p(s,[l]){s[0]?t?(t.p(s,l),l&1&&m(t,1)):(t=ue(s),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(me(),p(t,1,1,()=>{t=null}),pe())},i(s){a||(m(t),a=!0)},o(s){p(t),a=!1},d(s){s&&_(e),t&&t.d(s)}}}function Ge(n,e,a){let t,s,l,r,o;const{loading:c,targetUser:f,model:u,updateUser:P}=_e();C(n,c,i=>a(1,r=i)),C(n,f,i=>a(13,t=i)),C(n,u,i=>a(0,s=i));const{closeDrawer:w}=le(),{store:{users:y}}=$e,{errors:U,submitted:T,validate:I,reset:$}=Te(Se({name:Pe().required("Name is required").label("Name"),is_active:Ne()}));C(n,U,i=>a(2,o=i)),C(n,T,i=>a(14,l=i));const te=()=>{t&&u.set({name:t.name,is_active:t.is_active}),T.set(!1),$()},z=async()=>{if(!l)return;const{name:i}=s;await I({name:i})},H=async()=>{try{c.set(!0),T.set(!0);const{name:i,is_active:d}=s;await I({name:i}),await P({...t,name:i,is_active:d}),await y.reload(),w()}catch(i){console.log("submit failed",i)}finally{c.set(!1)}};f.subscribe(i=>{i&&u.set({name:i.name,is_active:i.is_active})});function K(i){n.$$.not_equal(s.name,i)&&(s.name=i,u.set(s))}function G(i){n.$$.not_equal(s.is_active,i)&&(s.is_active=i,u.set(s))}return[s,r,o,c,f,u,U,T,te,z,H,K,G]}class Je extends j{constructor(e){super(),x(this,e,Ge,Ke,O,{})}}function Qe(n){let e,a,t="User",s,l,r,o,c;return l=new Ce({props:{class:"mb-4 dark:text-white"}}),l.$on("click",n[3]),o=new Je({}),{c(){e=A("div"),a=A("h5"),a.textContent=t,s=L(),g(l.$$.fragment),r=L(),g(o.$$.fragment),this.h()},l(f){e=E(f,"DIV",{class:!0});var u=J(e);a=E(u,"H5",{id:!0,class:!0,"data-svelte-h":!0}),de(a)!=="svelte-tpi0tj"&&(a.textContent=t),s=q(u),b(l.$$.fragment,u),u.forEach(_),r=q(f),b(o.$$.fragment,f),this.h()},h(){F(a,"id","drawer-label"),F(a,"class","inline-flex items-center mb-6 text-base font-semibold text-gray-500 uppercase dark:text-gray-400"),F(e,"class","flex items-center")},m(f,u){D(f,e,u),N(e,a),N(e,s),h(l,e,null),D(f,r,u),h(o,f,u),c=!0},p:R,i(f){c||(m(l.$$.fragment,f),m(o.$$.fragment,f),c=!0)},o(f){p(l.$$.fragment,f),p(o.$$.fragment,f),c=!1},d(f){f&&(_(e),_(r)),k(l),k(o,f)}}}function We(n){let e,a,t;function s(r){n[4](r)}let l={transitionType:"fly",transitionParams:n[1],id:"users-drawer",placement:"right",$$slots:{default:[Qe]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.hidden=n[0]),e=new Ue({props:l}),Q.push(()=>X(e,"hidden",s)),{c(){g(e.$$.fragment)},l(r){b(e.$$.fragment,r)},m(r,o){h(e,r,o),t=!0},p(r,[o]){const c={};o&32&&(c.$$scope={dirty:o,ctx:r}),!a&&o&1&&(a=!0,c.hidden=r[0],W(()=>a=!1)),e.$set(c)},i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){p(e.$$.fragment,r),t=!1},d(r){k(e,r)}}}function Xe(n,e,a){let t,s={x:320,duration:200,easing:ye};const{drawerClosed:l,closeDrawer:r}=le();C(n,l,c=>a(0,t=c));function o(c){t=c,l.set(t)}return[t,s,l,r,o]}class Ye extends j{constructor(e){super(),x(this,e,Xe,We,O,{})}}function Ze(n){let e,a="No data";return{c(){e=A("p"),e.textContent=a},l(t){e=E(t,"P",{"data-svelte-h":!0}),de(e)!=="svelte-t5me1l"&&(e.textContent=a)},m(t,s){D(t,e,s)},p:R,i:R,o:R,d(t){t&&_(e)}}}function et(n){let e,a,t,s;return e=new we({props:{options:n[0],data:n[2],loading:n[3]}}),t=new Ye({}),{c(){g(e.$$.fragment),a=L(),g(t.$$.fragment)},l(l){b(e.$$.fragment,l),a=q(l),b(t.$$.fragment,l)},m(l,r){h(e,l,r),D(l,a,r),h(t,l,r),s=!0},p(l,r){const o={};r&1&&(o.options=l[0]),r&4&&(o.data=l[2]),r&8&&(o.loading=l[3]),e.$set(o)},i(l){s||(m(e.$$.fragment,l),m(t.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),p(t.$$.fragment,l),s=!1},d(l){l&&_(a),k(e,l),k(t,l)}}}function tt(n){let e,a,t,s;const l=[et,Ze],r=[];function o(c,f){return c[0]&&c[1]&&c[1].length>0?0:1}return e=o(n),a=r[e]=l[e](n),{c(){a.c(),t=B()},l(c){a.l(c),t=B()},m(c,f){r[e].m(c,f),D(c,t,f),s=!0},p(c,[f]){let u=e;e=o(c),e===u?r[e].p(c,f):(me(),p(r[u],1,1,()=>{r[u]=null}),pe(),a=r[e],a?a.p(c,f):(a=r[e]=l[e](c),a.c()),m(a,1),a.m(t.parentNode,t))},i(c){s||(m(a),s=!0)},o(c){p(a),s=!1},d(c){c&&_(t),r[e].d(c)}}}function at(n,e,a){let t,s,l,r;const{store:{users:o}}=$e;C(n,o,$=>a(1,s=$));const{openDrawer:c}=le(),{targetUser:f}=_e(),{loading:u}=o;C(n,u,$=>a(3,r=$));const P={sortable:!0,onRowClick:$=>{c(),f.set($)},columnDefs:[{label:"Name",dataProperty:"name",dataType:re.String,viewAlignment:se.Left},{label:"Email",dataProperty:"email",dataType:re.String,viewAlignment:se.Left},{label:"Active",dataProperty:"is_active",dataType:re.String,viewAlignment:se.Left}]},w=ve(P),{store:{options:y,data:U},actions:{setRowData:T}}=w;C(n,y,$=>a(0,t=$)),C(n,U,$=>a(2,l=$));const I=o.subscribe($=>{T($)});return ke(()=>{I()}),[t,s,l,r,o,u,y,U]}class nt extends j{constructor(e){super(),x(this,e,at,tt,O,{})}}function rt(n){let e,a;return e=new Ee({props:{title:"Users"}}),{c(){g(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){h(e,t,s),a=!0},p:R,i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){k(e,t)}}}function st(n){let e,a;return e=new nt({}),{c(){g(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){h(e,t,s),a=!0},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){k(e,t)}}}function lt(n){let e,a;return e=new Le({props:{title:"Users",$$slots:{body:[st],header:[rt]},$$scope:{ctx:n}}}),{c(){g(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){h(e,t,s),a=!0},p(t,[s]){const l={};s&1&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){k(e,t)}}}class bt extends j{constructor(e){super(),x(this,e,null,lt,O,{})}}export{bt as component};
