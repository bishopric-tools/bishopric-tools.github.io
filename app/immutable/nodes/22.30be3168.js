import{s as we,I as O,U as ye,p as pe,f as E,a as B,l as Q,g as D,w as ce,c as H,h as R,d as c,m as W,j as k,i as G,y as p,z as qe,S as $e,H as Ee}from"../chunks/scheduler.eb33ae00.js";import{S as be,i as Ie,b as C,d as V,m as x,a as A,t as P,e as T,h as ge}from"../chunks/index.3134e3af.js";import{w as De}from"../chunks/index.70276595.js";import{B as _e}from"../chunks/Button.b81df063.js";import{T as Ce}from"../chunks/Toggle.8cd8eb62.js";import{f as Ve,c as xe,a as he,T as ve}from"../chunks/TextField.7d592578.js";import{a as Ae}from"../chunks/auth.state.f6f5c1c1.js";import{A as Pe}from"../chunks/AuthSection.2cc119f2.js";import{g as Te}from"../chunks/navigation.27311ab1.js";function Ue(t){let e;return{c(){e=Q("Show password")},l(a){e=W(a,"Show password")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function Me(t){let e;return{c(){e=Q("Reset")},l(a){e=W(a,"Reset")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function je(t){let e;return{c(){e=Q("Sign up")},l(a){e=W(a,"Sign up")},m(a,n){G(a,e,n)},d(a){a&&c(e)}}}function Fe(t){var te,se,ae,ne,re,le;let e,a="Sign Up",n,r,f,u,U,J,h,o,M,S,v,$,w,m,g,K,_,L,b,i,d,j="Sign In",N,X,Y;function ke(s){t[12](s)}let Z={type:"email",name:"email",label:"Username",placeholder:"Email",disabled:t[3],isInvalid:((te=t[4])==null?void 0:te.email)!==void 0,helperMessage:(ae=(se=t[4])==null?void 0:se.email)==null?void 0:ae.message,novalidate:!0,required:!0};t[2].email!==void 0&&(Z.value=t[2].email),u=new ve({props:Z}),pe.push(()=>ge(u,"value",ke)),u.$on("input",t[10]);function Se(s){t[13](s)}let ee={type:t[1],name:"password",label:"Password",placeholder:"Password",disabled:t[3],isInvalid:((ne=t[4])==null?void 0:ne.password)!==void 0,helperMessage:(le=(re=t[4])==null?void 0:re.password)==null?void 0:le.message,novalidate:!0,required:!0};return t[2].password!==void 0&&(ee.value=t[2].password),o=new ve({props:ee}),pe.push(()=>ge(o,"value",Se)),$=new Ce({props:{checked:t[0],size:"small",$$slots:{default:[Ue]},$$scope:{ctx:t}}}),$.$on("click",t[14]),g=new _e({props:{type:"button",class:"mr-3",color:"alternative",disabled:t[3],$$slots:{default:[Me]},$$scope:{ctx:t}}}),g.$on("click",t[9]),_=new _e({props:{type:"button",$$slots:{default:[je]},$$scope:{ctx:t}}}),_.$on("click",t[11]),{c(){e=E("h1"),e.textContent=a,n=B(),r=E("div"),f=E("div"),C(u.$$.fragment),J=B(),h=E("div"),C(o.$$.fragment),S=B(),v=E("div"),C($.$$.fragment),w=B(),m=E("div"),C(g.$$.fragment),K=B(),C(_.$$.fragment),L=B(),b=E("div"),i=Q("Already registered? "),d=E("a"),d.textContent=j,this.h()},l(s){e=D(s,"H1",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-uy5m8m"&&(e.textContent=a),n=H(s),r=D(s,"DIV",{class:!0});var l=R(r);f=D(l,"DIV",{class:!0});var y=R(f);V(u.$$.fragment,y),y.forEach(c),J=H(l),h=D(l,"DIV",{class:!0});var I=R(h);V(o.$$.fragment,I),I.forEach(c),S=H(l),v=D(l,"DIV",{class:!0});var F=R(v);V($.$$.fragment,F),F.forEach(c),w=H(l),m=D(l,"DIV",{class:!0});var q=R(m);V(g.$$.fragment,q),K=H(q),V(_.$$.fragment,q),q.forEach(c),L=H(l),b=D(l,"DIV",{class:!0});var z=R(b);i=W(z,"Already registered? "),d=D(z,"A",{href:!0,class:!0,"data-svelte-h":!0}),ce(d)!=="svelte-j3f5p7"&&(d.textContent=j),z.forEach(c),l.forEach(c),this.h()},h(){k(e,"class","text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"),k(f,"class","space-y-2"),k(h,"class","space-y-2"),k(v,"class","flex items-start"),k(m,"class","flex justify-end"),k(d,"href","/auth/sign-in"),k(d,"class","text-primary-700 hover:underline dark:text-primary-500"),k(b,"class","text-sm font-medium text-gray-500 dark:text-gray-300"),k(r,"class","space-y-4 md:space-y-6")},m(s,l){G(s,e,l),G(s,n,l),G(s,r,l),p(r,f),x(u,f,null),p(r,J),p(r,h),x(o,h,null),p(r,S),p(r,v),x($,v,null),p(r,w),p(r,m),x(g,m,null),p(m,K),x(_,m,null),p(r,L),p(r,b),p(b,i),p(b,d),N=!0,X||(Y=qe(d,"click",t[9]),X=!0)},p(s,l){var ie,oe,de,ue,fe,me;const y={};l&8&&(y.disabled=s[3]),l&16&&(y.isInvalid=((ie=s[4])==null?void 0:ie.email)!==void 0),l&16&&(y.helperMessage=(de=(oe=s[4])==null?void 0:oe.email)==null?void 0:de.message),!U&&l&4&&(U=!0,y.value=s[2].email,$e(()=>U=!1)),u.$set(y);const I={};l&2&&(I.type=s[1]),l&8&&(I.disabled=s[3]),l&16&&(I.isInvalid=((ue=s[4])==null?void 0:ue.password)!==void 0),l&16&&(I.helperMessage=(me=(fe=s[4])==null?void 0:fe.password)==null?void 0:me.message),!M&&l&4&&(M=!0,I.value=s[2].password,$e(()=>M=!1)),o.$set(I);const F={};l&1&&(F.checked=s[0]),l&524288&&(F.$$scope={dirty:l,ctx:s}),$.$set(F);const q={};l&8&&(q.disabled=s[3]),l&524288&&(q.$$scope={dirty:l,ctx:s}),g.$set(q);const z={};l&524288&&(z.$$scope={dirty:l,ctx:s}),_.$set(z)},i(s){N||(A(u.$$.fragment,s),A(o.$$.fragment,s),A($.$$.fragment,s),A(g.$$.fragment,s),A(_.$$.fragment,s),N=!0)},o(s){P(u.$$.fragment,s),P(o.$$.fragment,s),P($.$$.fragment,s),P(g.$$.fragment,s),P(_.$$.fragment,s),N=!1},d(s){s&&(c(e),c(n),c(r)),T(u),T(o),T($),T(g),T(_),X=!1,Y()}}}function ze(t){let e,a;return e=new Pe({props:{$$slots:{default:[Fe]},$$scope:{ctx:t}}}),{c(){C(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,r){x(e,n,r),a=!0},p(n,[r]){const f={};r&524319&&(f.$$scope={dirty:r,ctx:n}),e.$set(f)},i(n){a||(A(e.$$.fragment,n),a=!0)},o(n){P(e.$$.fragment,n),a=!1},d(n){T(e,n)}}}function Be(t,e,a){let n,r,f,u,U;const{actions:{signUp:J},store:{loading:h}}=Ae;O(t,h,i=>a(3,u=i));const o=De({email:"",password:""});O(t,o,i=>a(2,r=i));const{errors:M,submitted:S,validate:v,reset:$}=Ve(xe({email:he().required("Email is required").email("Email is not valid"),password:he().required("Password is required")}));O(t,M,i=>a(4,U=i)),O(t,S,i=>a(15,f=i));let w=!1;const m=()=>{o.set({email:"",password:""}),S.set(!1),a(0,w=!1),$()},g=async()=>{if(!f)return;const{email:i,password:d}=r;await v({email:i,password:d})},K=async()=>{try{S.set(!0);const{email:i,password:d}=r;await v({email:i,password:d});const j=await J(i,d);j!=null&&j.success&&(await Te("/"),m())}catch(i){console.log("submit failed",i)}};ye(m);function _(i){t.$$.not_equal(r.email,i)&&(r.email=i,o.set(r))}function L(i){t.$$.not_equal(r.password,i)&&(r.password=i,o.set(r))}const b=()=>{a(0,w=!w)};return t.$$.update=()=>{t.$$.dirty&1&&a(1,n=w?"text":"password")},[w,n,r,u,U,h,o,M,S,m,g,K,_,L,b]}class He extends be{constructor(e){super(),Ie(this,e,Be,ze,we,{})}}function Re(t){let e,a;return e=new He({}),{c(){C(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,r){x(e,n,r),a=!0},p:Ee,i(n){a||(A(e.$$.fragment,n),a=!0)},o(n){P(e.$$.fragment,n),a=!1},d(n){T(e,n)}}}class Ye extends be{constructor(e){super(),Ie(this,e,null,Re,we,{})}}export{Ye as component};
