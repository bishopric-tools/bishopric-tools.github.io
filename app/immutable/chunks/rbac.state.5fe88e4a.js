var re=Object.defineProperty;var se=(e,t,r)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var V=(e,t,r)=>(se(e,typeof t!="symbol"?t+"":t,r),r);import{s as ae,e as z,i as k,d as y,F as U,A as j,G as q,r as ie,a as oe,f as I,c as ne,g as T,h as S,D as B,L as le,u as ce,v as de,w as ue,Y as fe,j as N,y as Q,E as me}from"./scheduler.05098771.js";import{S as he,i as be,a as A,g as _e,t as G,c as ye,h as H}from"./index.1afa7b11.js";import{t as F,g as ge}from"./tw-merge.222c61b5.js";import{a as pe,f as Oe,b as Pe,s as Ee}from"./CloseButton.9ae9b063.js";import{s as _}from"./client.3f1dd265.js";import{w as Y}from"./index.e2459265.js";function Je(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const ke=(e,t)=>{const r=s=>{s!=null&&s.target&&e&&!e.contains(s.target)&&!s.defaultPrevented&&t()};return document.addEventListener("click",r,!0),{destroy(){document.removeEventListener("click",r,!0)}}},Ce=e=>({hidden:e&1}),J=e=>({hidden:e[0]});function K(e){let t,r,s,i,a,c,m;function l(n,u){if(n[4]&&n[1])return Ne;if(n[4]&&!n[1])return Ae}let h=l(e),d=h&&h(e);const g=e[25].default,f=ie(g,e,e[24],J);let p=[{id:e[6]},e[15],{class:s=F(e[7],e[3],e[2],e[10][e[5]],e[16].class)},{tabindex:"-1"},{"aria-controls":e[6]},{"aria-labelledby":e[6]}],O={};for(let n=0;n<p.length;n+=1)O=j(O,p[n]);return{c(){d&&d.c(),t=oe(),r=I("div"),f&&f.c(),this.h()},l(n){d&&d.l(n),t=ne(n),r=T(n,"DIV",{id:!0,class:!0,tabindex:!0,"aria-controls":!0,"aria-labelledby":!0});var u=S(r);f&&f.l(u),u.forEach(y),this.h()},h(){B(r,O)},m(n,u){d&&d.m(n,u),k(n,t,u),k(n,r,u),f&&f.m(r,null),a=!0,c||(m=le(e[14].call(null,r,e[12])),c=!0)},p(n,u){e=n,h===(h=l(e))&&d?d.p(e,u):(d&&d.d(1),d=h&&h(e),d&&(d.c(),d.m(t.parentNode,t))),f&&f.p&&(!a||u&16777217)&&ce(f,g,e,e[24],a?ue(g,e[24],u,Ce):de(e[24]),J),B(r,O=ge(p,[(!a||u&64)&&{id:e[6]},u&32768&&e[15],(!a||u&65708&&s!==(s=F(e[7],e[3],e[2],e[10][e[5]],e[16].class)))&&{class:s},{tabindex:"-1"},(!a||u&64)&&{"aria-controls":e[6]},(!a||u&64)&&{"aria-labelledby":e[6]}]))},i(n){a||(A(f,n),n&&fe(()=>{a&&(i||(i=H(r,e[9],e[8],!0)),i.run(1))}),a=!0)},o(n){G(f,n),n&&(i||(i=H(r,e[9],e[8],!1)),i.run(0)),a=!1},d(n){n&&(y(t),y(r)),d&&d.d(n),f&&f.d(n),n&&i&&i.end(),c=!1,m()}}}function Ae(e){let t;return{c(){t=I("div"),this.h()},l(r){t=T(r,"DIV",{role:!0,class:!0}),S(t).forEach(y),this.h()},h(){N(t,"role","presentation"),N(t,"class",e[13])},m(r,s){k(r,t,s)},p:Q,d(r){r&&y(t)}}}function Ne(e){let t,r,s;return{c(){t=I("div"),this.h()},l(i){t=T(i,"DIV",{role:!0,class:!0}),S(t).forEach(y),this.h()},h(){N(t,"role","presentation"),N(t,"class",e[13])},m(i,a){k(i,t,a),r||(s=me(t,"click",e[26]),r=!0)},p:Q,d(i){i&&y(t),r=!1,s()}}}function we(e){let t,r,s=!e[0]&&K(e);return{c(){s&&s.c(),t=z()},l(i){s&&s.l(i),t=z()},m(i,a){s&&s.m(i,a),k(i,t,a),r=!0},p(i,[a]){i[0]?s&&(_e(),G(s,1,1,()=>{s=null}),ye()):s?(s.p(i,a),a&1&&A(s,1)):(s=K(i),s.c(),A(s,1),s.m(t.parentNode,t))},i(i){r||(A(s),r=!0)},o(i){G(s),r=!1},d(i){i&&y(t),s&&s.d(i)}}}function ve(e,t,r){const s=["activateClickOutside","hidden","position","leftOffset","rightOffset","topOffset","bottomOffset","width","backdrop","bgColor","bgOpacity","placement","id","divClass","transitionParams","transitionType"];let i=U(t,s),{$$slots:a={},$$scope:c}=t,{activateClickOutside:m=!0}=t,{hidden:l=!0}=t,{position:h="fixed"}=t,{leftOffset:d="inset-y-0 left-0"}=t,{rightOffset:g="inset-y-0 right-0"}=t,{topOffset:f="inset-x-0 top-0"}=t,{bottomOffset:p="inset-x-0 bottom-0"}=t,{width:O="w-80"}=t,{backdrop:n=!0}=t,{bgColor:u="bg-gray-900"}=t,{bgOpacity:w="bg-opacity-75"}=t,{placement:R="left"}=t,{id:W="drawer-example"}=t,{divClass:L="overflow-y-auto z-50 p-4 bg-white dark:bg-gray-800"}=t,{transitionParams:M={}}=t,{transitionType:v="fly"}=t;function X(o,E){switch(v){case"slide":return Ee(o,E);case"blur":return Pe(o,E);case"fade":return Oe(o,E);default:return pe(o,E)}}const Z={left:d,right:g,top:f,bottom:p},D=()=>{r(0,l=!l)},x=()=>m&&!l&&D();let $=F("fixed top-0 left-0 z-50 w-full h-full",n&&u,n&&w);function ee(o,E){return m?ke(o,E):void 0}const te=()=>!l&&D();return e.$$set=o=>{r(16,t=j(j({},t),q(o))),r(15,i=U(t,s)),"activateClickOutside"in o&&r(1,m=o.activateClickOutside),"hidden"in o&&r(0,l=o.hidden),"position"in o&&r(2,h=o.position),"leftOffset"in o&&r(17,d=o.leftOffset),"rightOffset"in o&&r(18,g=o.rightOffset),"topOffset"in o&&r(19,f=o.topOffset),"bottomOffset"in o&&r(20,p=o.bottomOffset),"width"in o&&r(3,O=o.width),"backdrop"in o&&r(4,n=o.backdrop),"bgColor"in o&&r(21,u=o.bgColor),"bgOpacity"in o&&r(22,w=o.bgOpacity),"placement"in o&&r(5,R=o.placement),"id"in o&&r(6,W=o.id),"divClass"in o&&r(7,L=o.divClass),"transitionParams"in o&&r(8,M=o.transitionParams),"transitionType"in o&&r(23,v=o.transitionType),"$$scope"in o&&r(24,c=o.$$scope)},t=q(t),[l,m,h,O,n,R,W,L,M,X,Z,D,x,$,ee,i,t,d,g,f,p,u,w,v,c,a,te]}class Ke extends he{constructor(t){super(),be(this,t,ve,we,ae,{activateClickOutside:1,hidden:0,position:2,leftOffset:17,rightOffset:18,topOffset:19,bottomOffset:20,width:3,backdrop:4,bgColor:21,bgOpacity:22,placement:5,id:6,divClass:7,transitionParams:8,transitionType:23})}}var b={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.throwTypescriptError=e.throwError=void 0;const t=s=>{throw new Error(`[svelte-preprocess] ${s}`)};e.throwError=t;const r=()=>{(0,e.throwError)("Encountered type error")};e.throwTypescriptError=r})(b);const P=(e,t)=>{const{subscribe:r,set:s}=Y(e),i=Y(!0),a=async()=>{i.set(!0);const c=await t();s(c),i.set(!1)};return t().then(c=>s(c)).catch(c=>b.throwError(c)).finally(()=>{i.set(!1)}),{subscribe:r,reload:a,reset:()=>s([]),loading:i}};class C{constructor(t){V(this,"tableName");this.tableName=t}async bulkCreate(t){try{const{data:r,error:s}=await _.from(this.tableName).insert(t).select();return s?(console.error(s),Promise.reject(`Creation of ${this.tableName} records failed, please try again.`)):Promise.resolve(r)}catch(r){return console.error(r),Promise.reject(`Creation of ${this.tableName} records failed, please try again.`)}}async bulkUpdate(t,r){try{const{data:s,error:i}=await _.from(this.tableName).upsert(t,r).select();return i?(console.error(i),Promise.reject(`Creation of ${this.tableName} records failed, please try again.`)):Promise.resolve(s)}catch(s){return console.error(s),Promise.reject(`Creation of ${this.tableName} records failed, please try again.`)}}async getAll(){try{const{data:t,error:r}=await _.from(this.tableName).select();return r?(console.error(r),Promise.reject(`Fetch of ${this.tableName} records failed, please try again.`)):Promise.resolve(t)}catch(t){return console.error(t),Promise.reject(`Fetch of ${this.tableName} records failed, please try again.`)}}async bulkDelete(t){try{const{error:r}=await _.from(this.tableName).delete().in("id",t);return r?(console.error(r),Promise.reject(`Deletion of ${this.tableName} record failed, please try again.`)):Promise.resolve()}catch(r){return console.error(r),Promise.reject(`Deletion of ${this.tableName} record failed, please try again.`)}}}class De extends C{constructor(){super("users")}}const je=new De;class Ge extends C{constructor(){super("permission_groups")}}const Fe=new Ge;class Ie extends C{constructor(){super("permissions")}async getAllWithGroupDetails(){try{const{data:t,error:r}=await _.from(this.tableName).select(`
					id, 
					description, 
					sort_index, 
					uuid, 
					created_at, 
					created_by_id, 
					updated_at, 
					updated_by_id, 
					permission_groups(id, name)
				`).order("sort_index",{ascending:!0});if(r)return console.error(r),Promise.reject(`Fetch of ${this.tableName} records failed, please try again.`);const s=t.map(i=>{var c,m;const a=i;return{id:a.id,description:a.description,sort_index:a.sort_index,group_id:(c=a.permission_groups)==null?void 0:c.id,group_name:(m=a.permission_groups)==null?void 0:m.name,uuid:a.uuid,created_by_id:a.created_by_id,created_at:a.created_at,updated_by_id:a.updated_by_id,updated_at:a.updated_at}});return Promise.resolve(s)}catch(t){return console.error(t),Promise.reject(`Fetch of ${this.tableName} records failed, please try again.`)}}}const Te=new Ie;class Se extends C{constructor(){super("roles")}async getAllWithGroupDetails(){try{const{data:t,error:r}=await _.from(this.tableName).select(`
					id, 
					name, 
					sort_index, 
					uuid, 
					created_at, 
					created_by_id, 
					updated_at, 
					updated_by_id, 
					role_groups(id, name)
				`).order("sort_index",{ascending:!0});if(r)return console.error(r),Promise.reject(`Fetch of ${this.tableName} records failed, please try again.`);const s=t.map(i=>{var c,m;const a=i;return{id:a.id,name:a.name,sort_index:a.sort_index,group_id:(c=a.role_groups)==null?void 0:c.id,group_name:(m=a.role_groups)==null?void 0:m.name,uuid:a.uuid,created_by_id:a.created_by_id,created_at:a.created_at,updated_by_id:a.updated_by_id,updated_at:a.updated_at}});return Promise.resolve(s)}catch(t){return console.error(t),Promise.reject(`Fetch of ${this.tableName} records failed, please try again.`)}}}const Re=new Se;class We extends C{constructor(){super("role_groups")}}const Le=new We,Me=()=>{const e="Failed to fetch data, please refresh browser and try again",t=P([],async()=>{try{return await je.getAll()}catch{return b.throwError(e)}}),r=P([],async()=>{try{return await Fe.getAll()}catch{return b.throwError(e)}}),s=P([],async()=>{try{return Te.getAllWithGroupDetails()}catch{return b.throwError(e)}}),i=P([],async()=>{try{return Le.getAll()}catch{return b.throwError(e)}}),a=P([],async()=>{try{return Re.getAllWithGroupDetails()}catch{return b.throwError(e)}}),c=P([],async()=>{try{const{data:l,error:h}=await _.from("role_permissions").select("*");return h?b.throwError(e):l}catch{return b.throwError(e)}}),m=P([],async()=>{try{const{data:l,error:h}=await _.from("user_roles").select("*");return h?b.throwError(e):l}catch{return b.throwError(e)}});return{store:{users:t,permissionGroups:r,permissions:s,roleGroups:i,roles:a,rolePermissions:c,userRoles:m}}},Qe=Me();export{Ke as D,Re as a,Je as e,Te as p,Qe as r,je as u};
